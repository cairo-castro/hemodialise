System.register(["./vendor-legacy-C5HeBJnl.js","./ionic-legacy-DmxRaRhy.js","./_plugin-vue_export-helper-legacy-CdN-Y2Rg.js","./main-legacy-CVhMZu9L.js"],function(e,a){"use strict";var t,l,o,i,n,s,r,c,d,u,f,m,p,v,g,_,h,b,y,k,w,x,V,C,P,S,E,q,A,D,I,U,B,j,z,N,M,T,F,G,R,H,L,O,J,K;return{setters:[e=>{t=e.d,l=e.r,o=e.c,i=e.o,n=e.z,s=e.n,r=e.v,c=e.x,d=e.t,u=e.B,f=e.q,m=e.D,p=e.l,v=e.E,g=e.G,_=e.F,h=e.A},e=>{b=e.e,y=e.n,k=e.p,w=e.z,x=e.o,V=e.q,C=e.u,P=e.A,S=e.B,E=e.v,q=e.h,A=e.i,D=e.j,I=e.k,U=e.g,B=e.w,j=e.C,z=e.D,N=e.E,M=e.F,T=e.m,F=e.G,G=e.t,R=e.H},e=>{H=e.g,L=e.h,O=e.i,J=e._},e=>{K=e.C}],execute:function(){var a=document.createElement("style");a.textContent=".checklist-container[data-v-683f643f]{padding:1rem}.patient-search-card[data-v-683f643f],.checklist-form-card[data-v-683f643f],.safety-checks-card[data-v-683f643f]{margin-bottom:1rem;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1)}.form-group[data-v-683f643f]{margin-bottom:1rem}.mobile-input[data-v-683f643f]{--background: #f9fafb;--border-color: #d1d5db;--border-radius: 8px;margin-bottom:8px}.mobile-button[data-v-683f643f]{--border-radius: 8px;margin:8px 0;height:48px;font-weight:600}.patient-found[data-v-683f643f]{margin-top:1rem;padding:1rem;background:#f0fdf4;border-radius:8px;border:1px solid #bbf7d0}.patient-info h4[data-v-683f643f]{margin:.5rem 0 .25rem;color:var(--ion-color-dark)}.patient-info p[data-v-683f643f]{margin:.25rem 0;color:var(--ion-color-medium);font-size:.875rem}.safety-checks[data-v-683f643f]{margin-bottom:1rem}.safety-check-item[data-v-683f643f]{--padding: 16px 0;--border-color: #e5e7eb;margin-bottom:8px}.safety-check-label h3[data-v-683f643f]{margin:0;font-size:1rem;font-weight:600;color:var(--ion-color-dark)}.safety-check-label p[data-v-683f643f]{margin:.25rem 0 0;font-size:.875rem;color:var(--ion-color-medium)}\n",document.head.appendChild(a);const Q={class:"checklist-container"},W={class:"form-group"},X={class:"form-group"},Y={key:0,class:"patient-found"},Z={class:"patient-info"},$={key:0},ee={class:"form-group"},ae={class:"form-group"},te={class:"safety-checks"},le={class:"form-group"};e("default",J(t({__name:"ChecklistPage",setup(e){const a=h(),t=K.getInstance(),J=t.getSearchPatientUseCase(),oe=t.getCreateChecklistUseCase(),ie=t.getMachineRepository(),ne=l({full_name:"",birth_date:""}),se=l(null),re=l([]),ce=l({patient_id:0,machine_id:0,shift:"matutino",patient_identification:!1,access_patency:!1,vital_signs:!1,weight_measurement:!1,machine_parameters:!1,anticoagulation:!1,alarm_tests:!1,emergency_procedures:!1,observations:""}),de=[{key:"patient_identification",label:"Identificação do Paciente",description:"Confirmar identidade com dois identificadores"},{key:"access_patency",label:"Permeabilidade do Acesso",description:"Verificar funcionamento do acesso vascular"},{key:"vital_signs",label:"Sinais Vitais",description:"Aferir pressão arterial, temperatura e peso"},{key:"weight_measurement",label:"Pesagem do Paciente",description:"Peso seco e ganho de peso interdialítico"},{key:"machine_parameters",label:"Parâmetros da Máquina",description:"Configurar parâmetros de diálise prescritos"},{key:"anticoagulation",label:"Anticoagulação",description:"Verificar prescrição e dosagem de heparina"},{key:"alarm_tests",label:"Teste de Alarmes",description:"Verificar funcionamento dos alarmes de segurança"},{key:"emergency_procedures",label:"Procedimentos de Emergência",description:"Confirmar conhecimento dos procedimentos"}],ue=o(()=>ne.value.full_name.length>0&&ne.value.birth_date.length>0),fe=o(()=>se.value&&ce.value.machine_id&&ce.value.shift),me=o(()=>{const e=de.every(e=>{const a=e.key;return!0===ce.value[a]});return fe.value&&e}),pe=async()=>{const e=await F.create({message:"Buscando paciente...",spinner:"crescent"});await e.present();try{const e=await J.execute(ne.value);if(e){se.value=e,ce.value.patient_id=Number(e.id);const a=await G.create({message:"Paciente encontrado!",duration:2e3,color:"success",position:"top"});await a.present()}else{const e=await G.create({message:"Paciente não encontrado. Você pode cadastrá-lo na seção de pacientes.",duration:3e3,color:"warning",position:"top"});await e.present()}}catch(a){const e=await G.create({message:a.message||"Erro ao buscar paciente",duration:3e3,color:"danger",position:"top"});await e.present()}finally{await e.dismiss()}},ve=async()=>{const e=await F.create({message:"Salvando checklist...",spinner:"crescent"});await e.present();try{await oe.execute(ce.value);const e=await G.create({message:"Checklist salvo com sucesso!",duration:2e3,color:"success",position:"top"});await e.present(),a.replace("/dashboard")}catch(t){const e=await G.create({message:t.message||"Erro ao salvar checklist",duration:3e3,color:"danger",position:"top"});await e.present()}finally{await e.dismiss()}};return i(()=>{(async()=>{try{re.value=await ie.getAvailable()}catch(e){console.error("Error loading machines:",e)}})()}),(e,a)=>(s(),n(c(b),null,{default:r(()=>[d(c(V),{translucent:!0},{default:r(()=>[d(c(y),null,{default:r(()=>[d(c(k),{slot:"start"},{default:r(()=>[d(c(w),{"default-href":"/dashboard"})]),_:1}),d(c(x),null,{default:r(()=>[...a[5]||(a[5]=[u("Checklist de Segurança",-1)])]),_:1})]),_:1})]),_:1}),d(c(T),{fullscreen:!0},{default:r(()=>[f("div",Q,[d(c(C),{class:"patient-search-card"},{default:r(()=>[d(c(P),null,{default:r(()=>[d(c(S),null,{default:r(()=>[...a[6]||(a[6]=[u("1. Buscar/Cadastrar Paciente",-1)])]),_:1})]),_:1}),d(c(E),null,{default:r(()=>{return[f("div",W,[d(c(q),{class:"mobile-input",fill:"outline"},{default:r(()=>[d(c(A),{position:"floating"},{default:r(()=>[...a[7]||(a[7]=[u("Nome Completo",-1)])]),_:1}),d(c(D),{modelValue:ne.value.full_name,"onUpdate:modelValue":a[0]||(a[0]=e=>ne.value.full_name=e),type:"text",placeholder:"Digite o nome completo do paciente",required:""},null,8,["modelValue"])]),_:1})]),f("div",X,[d(c(q),{class:"mobile-input",fill:"outline"},{default:r(()=>[d(c(A),{position:"floating"},{default:r(()=>[...a[8]||(a[8]=[u("Data de Nascimento",-1)])]),_:1}),d(c(D),{modelValue:ne.value.birth_date,"onUpdate:modelValue":a[1]||(a[1]=e=>ne.value.birth_date=e),type:"date",required:""},null,8,["modelValue"])]),_:1})]),d(c(I),{expand:"block",class:"mobile-button",onClick:pe,disabled:!ue.value},{default:r(()=>[d(c(U),{icon:c(H),slot:"start"},null,8,["icon"]),a[9]||(a[9]=u(" Buscar Paciente ",-1))]),_:1},8,["disabled"]),se.value?(s(),p("div",Y,[d(c(B),{color:"success"},{default:r(()=>[d(c(U),{icon:c(L)},null,8,["icon"]),d(c(A),null,{default:r(()=>[...a[10]||(a[10]=[u("Paciente Encontrado",-1)])]),_:1})]),_:1}),f("div",Z,[f("h4",null,v(se.value.full_name),1),f("p",null,"Nascimento: "+v((e=se.value.birth_date,new Date(e).toLocaleDateString("pt-BR"))),1),f("p",null,"Idade: "+v(se.value.age)+" anos",1),se.value.blood_type?(s(),p("p",$,"Tipo Sanguíneo: "+v(se.value.blood_type),1)):m("",!0)])])):m("",!0)];var e}),_:1})]),_:1}),se.value?(s(),n(c(C),{key:0,class:"checklist-form-card"},{default:r(()=>[d(c(P),null,{default:r(()=>[d(c(S),null,{default:r(()=>[...a[11]||(a[11]=[u("2. Informações do Procedimento",-1)])]),_:1})]),_:1}),d(c(E),null,{default:r(()=>[f("div",ee,[d(c(q),{class:"mobile-input",fill:"outline"},{default:r(()=>[d(c(A),{position:"floating"},{default:r(()=>[...a[12]||(a[12]=[u("Máquina",-1)])]),_:1}),d(c(j),{modelValue:ce.value.machine_id,"onUpdate:modelValue":a[2]||(a[2]=e=>ce.value.machine_id=e),placeholder:"Selecione uma máquina"},{default:r(()=>[(s(!0),p(_,null,g(re.value,e=>(s(),n(c(z),{key:e.id,value:e.id},{default:r(()=>[u(v(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),f("div",ae,[d(c(q),{class:"mobile-input",fill:"outline"},{default:r(()=>[d(c(A),{position:"floating"},{default:r(()=>[...a[13]||(a[13]=[u("Turno",-1)])]),_:1}),d(c(j),{modelValue:ce.value.shift,"onUpdate:modelValue":a[3]||(a[3]=e=>ce.value.shift=e),placeholder:"Selecione o turno"},{default:r(()=>[d(c(z),{value:"matutino"},{default:r(()=>[...a[14]||(a[14]=[u("Matutino",-1)])]),_:1}),d(c(z),{value:"vespertino"},{default:r(()=>[...a[15]||(a[15]=[u("Vespertino",-1)])]),_:1}),d(c(z),{value:"noturno"},{default:r(()=>[...a[16]||(a[16]=[u("Noturno",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})):m("",!0),fe.value?(s(),n(c(C),{key:1,class:"safety-checks-card"},{default:r(()=>[d(c(P),null,{default:r(()=>[d(c(S),null,{default:r(()=>[...a[17]||(a[17]=[u("3. Verificações de Segurança",-1)])]),_:1}),d(c(N),null,{default:r(()=>[...a[18]||(a[18]=[u("Todos os itens devem ser verificados",-1)])]),_:1})]),_:1}),d(c(E),null,{default:r(()=>[f("div",te,[(s(),p(_,null,g(de,(e,a)=>d(c(q),{key:a,class:"safety-check-item"},{default:r(()=>{return[d(c(R),{slot:"start",checked:(a=e.key,ce.value[a]||!1),onIonChange:a=>((e,a)=>{ce.value[e]=a})(e.key,a.detail.checked)},null,8,["checked","onIonChange"]),d(c(A),{class:"safety-check-label"},{default:r(()=>[f("h3",null,v(e.label),1),f("p",null,v(e.description),1)]),_:2},1024)];var a}),_:2},1024)),64))]),f("div",le,[d(c(q),{class:"mobile-input",fill:"outline"},{default:r(()=>[d(c(A),{position:"floating"},{default:r(()=>[...a[19]||(a[19]=[u("Observações (opcional)",-1)])]),_:1}),d(c(M),{modelValue:ce.value.observations,"onUpdate:modelValue":a[4]||(a[4]=e=>ce.value.observations=e),rows:"3",placeholder:"Digite observações adicionais..."},null,8,["modelValue"])]),_:1})]),d(c(I),{expand:"block",class:"mobile-button",disabled:!me.value,onClick:ve},{default:r(()=>[d(c(U),{icon:c(O),slot:"start"},null,8,["icon"]),a[20]||(a[20]=u(" Salvar Checklist ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})):m("",!0)])]),_:1})]),_:1}))}}),[["__scopeId","data-v-683f643f"]]))}}});
