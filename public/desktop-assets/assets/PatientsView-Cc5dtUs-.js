import{r as l,y as V,a as X,z as Z,e as a,f as s,i as t,B as O,H as x,q as i,l as k,p as f,k as d,m as _,v as H,R as U,j as q,F as ee,E as te}from"./vendor-79Zpdr1v.js";import{P as oe}from"./PatientFormModal-G0IgdRRP.js";import{C as re}from"./ConfirmDeleteModal-CM7y_Z0g.js";import{_ as ae,d as se}from"./desktop-egkIOPej.js";import"./XMarkIcon-DxDHpm9v.js";import"./CheckIcon-Z3r3qH2E.js";import"./BeakerIcon-CTT3FdLj.js";import"./DocumentTextIcon-CRcOPSAz.js";const ne={class:"patients-view space-y-6"},le={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ie={class:"bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 p-4"},de={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},ue={class:"bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 p-4"},pe={class:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1"},ge={class:"bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 p-4"},ve={class:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1"},ce={class:"bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 p-4"},xe={class:"text-2xl font-bold text-orange-600 dark:text-orange-400 mt-1"},me={class:"bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden"},ye={key:0,class:"text-center py-12"},ke={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},fe={class:"text-gray-500 dark:text-gray-400 mb-4"},be={key:1,class:"w-full"},he={class:"bg-gray-50 dark:bg-gray-800/50"},we={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},Ce={class:"flex items-center gap-2"},Me={class:"relative"},_e={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},Te={class:"flex items-center gap-2"},Be={class:"relative"},Ae={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},Ve={class:"flex items-center gap-2"},Le={class:"relative"},Pe={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},ze={class:"flex items-center gap-2"},De={class:"relative"},Ee={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},je={class:"divide-y divide-gray-200 dark:divide-gray-700"},Fe={class:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white"},Ne={class:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400"},Se={class:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400"},$e={class:"px-6 py-4"},Oe={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"},He={key:1,class:"text-sm text-gray-400 dark:text-gray-500"},Ue={class:"px-6 py-4"},qe={class:"px-6 py-4 text-right space-x-2"},Ie=["onClick"],Re=["onClick"],Ye={__name:"PatientsView",setup(Ge){const b=l(!1),m=l(null),h=l(!1),T=l(null),L=l(null),p=l(""),g=l(""),v=l(""),c=l(""),u=l(null),y=l([]),P=l(!1);async function B(){P.value=!0;try{const o=await se.get("/api/patients?per_page=100&include_inactive=true");if(!o.ok)throw new Error("Erro ao carregar pacientes");const e=await o.json();e.success?y.value=e.patients||[]:(console.error("Erro ao carregar pacientes:",e.message),$(e.message||"Erro ao carregar pacientes"))}catch(o){console.error("Erro ao carregar pacientes:",o),$("Erro ao carregar pacientes. Verifique sua conexão.")}finally{P.value=!1}}const I=V(()=>y.value.length),z=V(()=>{let o=y.value;if(p.value){const e=p.value.toLowerCase();o=o.filter(n=>n.full_name.toLowerCase().includes(e))}return g.value&&(o=o.filter(e=>F(e.birth_date).toString().includes(g.value))),v.value&&(o=o.filter(e=>e.blood_type===v.value)),c.value&&(o=o.filter(e=>(e.status||"ativo")===c.value)),o}),w=V(()=>!!(p.value||g.value||v.value||c.value));function D(o){u.value=null}X(()=>{document.addEventListener("click",D),B()}),Z(()=>{document.removeEventListener("click",D)});function C(o){u.value===o?u.value=null:u.value=o}function E(){p.value="",g.value="",v.value="",c.value="",u.value=null}function j(o,e){return y.value.filter(n=>n.blood_group===o&&n.rh_factor===e).length}function R(o){return{ativo:"Ativo",inativo:"Inativo",transferido:"Transferido",alta:"Alta Médica",obito:"Óbito"}[o]||o}function Y(o){return{ativo:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",inativo:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",transferido:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",alta:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",obito:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}[o]||"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}function G(o){return o?new Date(o+"T00:00:00").toLocaleDateString("pt-BR"):"N/A"}function F(o){if(!o)return 0;const e=new Date(o+"T00:00:00"),n=new Date;let r=n.getFullYear()-e.getFullYear();const M=n.getMonth()-e.getMonth();return(M<0||M===0&&n.getDate()<e.getDate())&&r--,r}function N(){m.value=null,b.value=!0}function J(o){m.value=o,b.value=!0}function S(){b.value=!1,m.value=null}async function K(o){m.value?A("Paciente atualizado com sucesso!"):A("Paciente cadastrado com sucesso!"),S(),await B()}function Q(o){T.value=o,h.value=!0}async function W(){var o;(o=L.value)==null||o.resetDeletingState(),h.value=!1,A("Paciente excluído com sucesso!"),await B(),T.value=null}function A(o){const e=document.createElement("div");e.className="fixed top-4 right-4 z-[100] px-6 py-4 bg-green-600 text-white rounded-lg shadow-lg flex items-center gap-3 animate-slide-in-right",e.innerHTML=`
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
    </svg>
    <span class="font-medium">${o}</span>
  `,document.body.appendChild(e),setTimeout(()=>{e.style.animation="slide-out-right 0.3s ease-out forwards",setTimeout(()=>e.remove(),300)},3e3)}function $(o){const e=document.createElement("div");e.className="fixed top-4 right-4 z-[100] px-6 py-4 bg-red-600 text-white rounded-lg shadow-lg flex items-center gap-3 animate-slide-in-right",e.innerHTML=`
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
    </svg>
    <span class="font-medium">${o}</span>
  `,document.body.appendChild(e),setTimeout(()=>{e.style.animation="slide-out-right 0.3s ease-out forwards",setTimeout(()=>e.remove(),300)},3e3)}return(o,e)=>{var n;return s(),a("div",ne,[t("div",{class:"flex items-center justify-between"},[e[18]||(e[18]=t("div",null,[t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Pacientes"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Gerenciamento de pacientes em tratamento")],-1)),t("button",{onClick:N,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-medium flex items-center"},[...e[17]||(e[17]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),x(" Novo Paciente ",-1)])])]),t("div",le,[t("div",ie,[e[19]||(e[19]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total de Pacientes",-1)),t("p",de,i(y.value.length),1)]),t("div",ue,[e[20]||(e[20]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Em Tratamento",-1)),t("p",pe,i(I.value),1)]),t("div",ge,[e[21]||(e[21]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Tipo A+",-1)),t("p",ve,i(j("A","+")),1)]),t("div",ce,[e[22]||(e[22]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Tipo O+",-1)),t("p",xe,i(j("O","+")),1)])]),t("div",me,[z.value.length===0?(s(),a("div",ye,[e[24]||(e[24]=t("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t("h3",ke,i(w.value?"Nenhum paciente encontrado":"Nenhum paciente cadastrado"),1),t("p",fe,i(w.value?"Tente ajustar os filtros de busca":"Comece cadastrando o primeiro paciente"),1),w.value?(s(),a("button",{key:0,onClick:E,class:"inline-flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium"},[...e[23]||(e[23]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),x(" Limpar Filtros ",-1)])])):(s(),a("button",{key:1,onClick:N,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-medium"}," Cadastrar Primeiro Paciente "))])):(s(),a("table",be,[t("thead",he,[t("tr",null,[t("th",we,[t("div",Ce,[e[26]||(e[26]=x(" Nome Completo ",-1)),t("div",Me,[t("button",{onClick:e[0]||(e[0]=d(r=>C("name"),["stop"])),class:f(["p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",{"text-primary-600 dark:text-primary-400":p.value}])},[...e[25]||(e[25]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1)])],2),u.value==="name"?(s(),a("div",{key:0,onClick:e[3]||(e[3]=d(()=>{},["stop"])),class:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg p-3 z-10 min-w-[200px]"},[_(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>p.value=r),type:"text",placeholder:"Filtrar nome...",class:"w-full px-2 py-1.5 text-sm bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded focus:ring-1 focus:ring-primary-500 focus:border-primary-500 text-gray-900 dark:text-white",onClick:e[2]||(e[2]=d(()=>{},["stop"]))},null,512),[[H,p.value]])])):k("",!0)])])]),e[36]||(e[36]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Data de Nascimento",-1)),t("th",_e,[t("div",Te,[e[28]||(e[28]=x(" Idade ",-1)),t("div",Be,[t("button",{onClick:e[4]||(e[4]=d(r=>C("age"),["stop"])),class:f(["p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",{"text-primary-600 dark:text-primary-400":g.value}])},[...e[27]||(e[27]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1)])],2),u.value==="age"?(s(),a("div",{key:0,onClick:e[7]||(e[7]=d(()=>{},["stop"])),class:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg p-3 z-10 min-w-[150px]"},[_(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>g.value=r),type:"text",placeholder:"Filtrar idade...",class:"w-full px-2 py-1.5 text-sm bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded focus:ring-1 focus:ring-primary-500 focus:border-primary-500 text-gray-900 dark:text-white",onClick:e[6]||(e[6]=d(()=>{},["stop"]))},null,512),[[H,g.value]])])):k("",!0)])])]),t("th",Ae,[t("div",Ve,[e[31]||(e[31]=x(" Tipo Sanguíneo ",-1)),t("div",Le,[t("button",{onClick:e[8]||(e[8]=d(r=>C("bloodType"),["stop"])),class:f(["p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",{"text-primary-600 dark:text-primary-400":v.value}])},[...e[29]||(e[29]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1)])],2),u.value==="bloodType"?(s(),a("div",{key:0,onClick:e[11]||(e[11]=d(()=>{},["stop"])),class:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg p-3 z-10 min-w-[150px]"},[_(t("select",{"onUpdate:modelValue":e[9]||(e[9]=r=>v.value=r),class:"w-full px-2 py-1.5 text-sm bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded focus:ring-1 focus:ring-primary-500 focus:border-primary-500 text-gray-900 dark:text-white",onClick:e[10]||(e[10]=d(()=>{},["stop"]))},[...e[30]||(e[30]=[q('<option value="" data-v-50a10167>Todos</option><option value="A+" data-v-50a10167>A+</option><option value="A-" data-v-50a10167>A-</option><option value="B+" data-v-50a10167>B+</option><option value="B-" data-v-50a10167>B-</option><option value="AB+" data-v-50a10167>AB+</option><option value="AB-" data-v-50a10167>AB-</option><option value="O+" data-v-50a10167>O+</option><option value="O-" data-v-50a10167>O-</option>',9)])],512),[[U,v.value]])])):k("",!0)])])]),t("th",Pe,[t("div",ze,[e[34]||(e[34]=x(" Status ",-1)),t("div",De,[t("button",{onClick:e[12]||(e[12]=d(r=>C("status"),["stop"])),class:f(["p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",{"text-primary-600 dark:text-primary-400":c.value}])},[...e[32]||(e[32]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1)])],2),u.value==="status"?(s(),a("div",{key:0,onClick:e[15]||(e[15]=d(()=>{},["stop"])),class:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg p-3 z-10 min-w-[150px]"},[_(t("select",{"onUpdate:modelValue":e[13]||(e[13]=r=>c.value=r),class:"w-full px-2 py-1.5 text-sm bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded focus:ring-1 focus:ring-primary-500 focus:border-primary-500 text-gray-900 dark:text-white",onClick:e[14]||(e[14]=d(()=>{},["stop"]))},[...e[33]||(e[33]=[q('<option value="" data-v-50a10167>Todos</option><option value="ativo" data-v-50a10167>Ativo</option><option value="inativo" data-v-50a10167>Inativo</option><option value="transferido" data-v-50a10167>Transferido</option><option value="alta" data-v-50a10167>Alta Médica</option><option value="obito" data-v-50a10167>Óbito</option>',6)])],512),[[U,c.value]])])):k("",!0)])])]),t("th",Ee,[w.value?(s(),a("button",{key:0,onClick:E,class:"inline-flex items-center gap-1 px-2 py-1 text-xs text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Limpar todos os filtros"},[...e[35]||(e[35]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):k("",!0)])])]),t("tbody",je,[(s(!0),a(ee,null,te(z.value,r=>(s(),a("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800/50"},[t("td",Fe,i(r.full_name),1),t("td",Ne,i(G(r.birth_date)),1),t("td",Se,i(F(r.birth_date))+" anos ",1),t("td",$e,[r.blood_group&&r.rh_factor?(s(),a("span",Oe,i(r.blood_group)+i(r.rh_factor),1)):(s(),a("span",He,"N/A"))]),t("td",Ue,[t("span",{class:f(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",Y(r.status||"ativo")])},i(R(r.status||"ativo")),3)]),t("td",qe,[t("button",{onClick:M=>J(r),class:"text-primary-600 dark:text-primary-400 hover:underline text-sm font-medium"}," Editar ",8,Ie),t("button",{onClick:M=>Q(r),class:"text-red-600 dark:text-red-400 hover:underline text-sm font-medium"}," Excluir ",8,Re)])]))),128))])]))]),O(oe,{"is-open":b.value,patient:m.value,onClose:S,onSaved:K},null,8,["is-open","patient"]),O(re,{"is-open":h.value,title:"Confirmar Exclusão do Paciente",message:"Tem certeza que deseja excluir este paciente? Todos os registros associados serão mantidos.","item-name":(n=T.value)==null?void 0:n.full_name,onClose:e[16]||(e[16]=r=>h.value=!1),onConfirm:W,ref_key:"deleteModalRef",ref:L},null,8,["is-open","item-name"])])}}},ot=ae(Ye,[["__scopeId","data-v-50a10167"]]);export{ot as default};
