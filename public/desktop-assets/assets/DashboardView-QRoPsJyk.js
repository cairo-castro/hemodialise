import{c as o,o as s,b as e,r as d,l as z,m as q,j as F,k as J,d as A,C as h,g as U,n as u,F as $,y as V,q as j,u as W,t as n,p as I,z as N,e as K}from"./vendor-XHYqZCca.js";import{m as Q,r as X}from"./vue3-apexcharts-Ch0WBv8s.js";import{_ as Y,r as M,a as D,b as R,c as ee}from"./desktop-DWXkO5Y4.js";import{r as te}from"./BeakerIcon-CmYqc7Xh.js";function re(S,f){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function P(S,f={}){const{interval:w=3e4,immediate:_=!0,enabled:i=!0}=f,c=d(null),g=d(null),m=d(!1),v=d(!1);let b=null;const l=async()=>{if(!m.value){m.value=!0,g.value=null;try{const y=await S();c.value=y}catch(y){g.value=y,console.error("Polling error:",y)}finally{m.value=!1}}},p=()=>{v.value||!i||(v.value=!0,_&&l(),b=setInterval(()=>{l()},w))},x=()=>{b&&(clearInterval(b),b=null),v.value=!1},B=()=>{l()};z(()=>{i&&p()}),q(()=>{x()});const C=()=>{document.hidden?x():i&&p()};return z(()=>{document.addEventListener("visibilitychange",C)}),q(()=>{document.removeEventListener("visibilitychange",C)}),{data:c,error:g,loading:m,isPolling:v,startPolling:p,stopPolling:x,refresh:B}}const ae={class:"dashboard-view space-y-6"},se={class:"flex items-center justify-between mb-4"},oe=["disabled"],ne={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},ie={class:"flex items-start justify-between"},le={class:"flex-1"},de={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},ce={class:"text-3xl font-bold text-gray-900 dark:text-white mt-2"},ue={class:"flex items-center mt-2"},ge={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},pe={class:"w-12 h-12 bg-primary-100 dark:bg-primary-900/20 rounded-lg flex items-center justify-center mr-4 group-hover:bg-primary-200 dark:group-hover:bg-primary-900/30 transition-colors"},xe={class:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center mr-4 group-hover:bg-green-200 dark:group-hover:bg-green-900/30 transition-colors"},he={class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center mr-4 group-hover:bg-purple-200 dark:group-hover:bg-purple-900/30 transition-colors"},me={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ve={class:"bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 p-6"},be={key:0},ye={key:1,class:"h-64 flex items-center justify-center"},ke={class:"bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 p-6"},fe={class:"flex items-center justify-between mb-4"},we={key:0,class:"space-y-2"},_e=["onClick"],Ce={class:"flex-1 min-w-0"},Ae={class:"text-sm font-medium text-gray-900 dark:text-white"},je={class:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-1"},Me={class:"flex items-center mt-2 space-x-3"},Se={class:"text-xs text-gray-400 dark:text-gray-500"},Be={key:1,class:"h-64 flex items-center justify-center"},$e={key:2,class:"h-64 flex items-center justify-center"},Ve={class:"bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 p-6 mt-6"},Pe={class:"flex items-center justify-between mb-4"},Ee={class:"overflow-x-auto"},Le={class:"w-full text-sm"},ze={class:"divide-y divide-gray-200 dark:divide-gray-700"},qe={class:"px-4 py-3 text-gray-900 dark:text-white font-medium"},Fe={class:"px-4 py-3 text-gray-600 dark:text-gray-400"},Ie={class:"px-4 py-3 text-gray-900 dark:text-white"},Ne={class:"px-4 py-3 text-gray-600 dark:text-gray-400"},De={class:"px-4 py-3"},Re={class:"px-4 py-3"},He={class:"px-4 py-3 text-right"},Te=["onClick"],Oe={__name:"DashboardView",setup(S){const f=Q,w=W(),_=d(!0),i=d([{label:"Checklists Hoje",value:"...",change:0,icon:M,bgColor:"bg-blue-500"},{label:"Máquinas Ativas",value:"...",change:0,icon:D,bgColor:"bg-green-500"},{label:"Pacientes",value:"...",change:0,icon:R,bgColor:"bg-purple-500"},{label:"Conformidade",value:"...",change:0,icon:ee,bgColor:"bg-orange-500"}]),c=d(null),g=d([]),m=F(()=>c.value?c.value.datasets.map(a=>({name:a.label,data:a.data})):[]),v=F(()=>{var a;return{chart:{type:"bar",stacked:!1,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",borderRadius:4}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:((a=c.value)==null?void 0:a.labels)||[],labels:{style:{colors:document.documentElement.classList.contains("dark")?"#9CA3AF":"#6B7280",fontSize:"12px",fontFamily:"inherit"}}},yaxis:{title:{text:"Sessões",style:{color:document.documentElement.classList.contains("dark")?"#9CA3AF":"#6B7280",fontSize:"12px",fontFamily:"inherit"}},labels:{style:{colors:document.documentElement.classList.contains("dark")?"#9CA3AF":"#6B7280",fontSize:"12px",fontFamily:"inherit"}}},colors:["#3B82F6","#10B981","#A855F7"],legend:{position:"bottom",horizontalAlign:"center",labels:{colors:document.documentElement.classList.contains("dark")?"#9CA3AF":"#6B7280"},markers:{width:12,height:12,radius:2}},fill:{opacity:1},tooltip:{theme:document.documentElement.classList.contains("dark")?"dark":"light",y:{formatter:function(t){return t+" sessões"}}},grid:{borderColor:document.documentElement.classList.contains("dark")?"#374151":"#E5E7EB",strokeDashArray:3}}}),b=d([{id:1234,date:"02/11/2025 08:30",patient:"Maria Silva Santos",machine:"Máquina 05",shift:"Matutino",status:"Concluído"},{id:1233,date:"02/11/2025 07:45",patient:"João Carlos Oliveira",machine:"Máquina 03",shift:"Matutino",status:"Concluído"},{id:1232,date:"01/11/2025 19:20",patient:"Ana Paula Costa",machine:"Máquina 08",shift:"Noturno",status:"Concluído"},{id:1231,date:"01/11/2025 15:15",patient:"Pedro Henrique Lima",machine:"Máquina 02",shift:"Vespertino",status:"Interrompido"},{id:1230,date:"01/11/2025 14:30",patient:"Carla Souza Mendes",machine:"Máquina 01",shift:"Vespertino",status:"Concluído"}]),l=P(C,{interval:1e4,immediate:!0}),p=P(y,{interval:3e4,immediate:!0}),x=P(H,{interval:15e3,immediate:!0});J([l.data,p.data,x.data],()=>{l.data.value&&p.data.value&&x.data.value&&(_.value=!1)});const B=()=>{l.refresh(),p.refresh(),x.refresh()};async function C(){const a=await fetch("/api/dashboard/stats",{credentials:"same-origin",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`Stats API error: ${a.status}`);const t=await a.json(),{data:r}=t;return i.value[0].value=r.checklists.value.toString(),i.value[0].change=r.checklists.change,i.value[1].value=`${r.machines.active}/${r.machines.total}`,i.value[1].change=r.machines.change,i.value[2].value=r.patients.value.toString(),i.value[2].change=r.patients.change,i.value[3].value=`${r.conformity.value}%`,i.value[3].change=r.conformity.change,r}async function y(){const a=await fetch("/api/dashboard/sessions-by-shift",{credentials:"same-origin",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`Sessions API error: ${a.status}`);const{data:t}=await a.json();return c.value=t,t}async function H(){const a=await fetch("/api/dashboard/recent-activity",{credentials:"same-origin",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`Activity API error: ${a.status}`);const{data:t}=await a.json();return g.value=t,t}function k(a){w.push(a)}function T(a){console.log("View record:",a),w.push(`/desktop/checklists/${a}`)}function O(a){console.log("Activity clicked:",a)}function G(a){return{checklist:M,cleaning:X,disinfection:te,warning:re}[a]||M}function E(a){return{Concluído:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",Interrompido:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400","Em Andamento":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",Pendente:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}[a]||"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}function Z(a){return{Matutino:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",Vespertino:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",Noturno:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400"}[a]||"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}return(a,t)=>(s(),o("div",ae,[e("div",se,[t[7]||(t[7]=A('<div class="flex items-center space-x-2" data-v-b5994c85><div class="relative" data-v-b5994c85><div class="w-2 h-2 bg-green-500 rounded-full animate-pulse" data-v-b5994c85></div><div class="absolute inset-0 w-2 h-2 bg-green-500 rounded-full animate-ping" data-v-b5994c85></div></div><span class="text-sm font-medium text-gray-600 dark:text-gray-400" data-v-b5994c85> Atualizações em tempo real ativas </span></div>',1)),e("button",{onClick:B,class:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:h(l).loading.value},[(s(),o("svg",{class:u(["w-4 h-4 inline-block mr-1",{"animate-spin":h(l).loading.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[5]||(t[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),t[6]||(t[6]=U(" Atualizar Agora ",-1))],8,oe)]),e("div",ne,[(s(!0),o($,null,V(i.value,r=>(s(),o("div",{key:r.label,class:u(["metric-card bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 p-6 hover:shadow-lg transition-all duration-200",{"ring-2 ring-blue-500 ring-opacity-50":h(l).loading.value}])},[e("div",ie,[e("div",le,[e("p",de,n(r.label),1),e("p",ce,n(r.value),1),e("div",ue,[e("span",{class:u(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",r.change>=0?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"])},n(r.change>=0?"+":"")+n(r.change)+"% ",3)])]),e("div",{class:u(["w-12 h-12 rounded-lg flex items-center justify-center",r.bgColor])},[(s(),I(N(r.icon),{class:"w-6 h-6 text-white"}))],2)])],2))),128))]),e("div",ge,[e("button",{onClick:t[0]||(t[0]=r=>k("/desktop/checklists")),class:"flex items-center p-4 bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 hover:border-primary-300 dark:hover:border-primary-700 hover:shadow-md transition-all group"},[e("div",pe,[j(h(M),{class:"w-6 h-6 text-primary-600 dark:text-primary-400"})]),t[8]||(t[8]=A('<div class="flex-1 text-left" data-v-b5994c85><p class="text-sm font-medium text-gray-900 dark:text-white" data-v-b5994c85>Novo Checklist</p><p class="text-xs text-gray-500 dark:text-gray-400" data-v-b5994c85>Criar checklist de segurança</p></div><svg class="w-5 h-5 text-gray-400 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b5994c85><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-b5994c85></path></svg>',2))]),e("button",{onClick:t[1]||(t[1]=r=>k("/desktop/patients")),class:"flex items-center p-4 bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 hover:border-green-300 dark:hover:border-green-700 hover:shadow-md transition-all group"},[e("div",xe,[j(h(R),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),t[9]||(t[9]=A('<div class="flex-1 text-left" data-v-b5994c85><p class="text-sm font-medium text-gray-900 dark:text-white" data-v-b5994c85>Novo Paciente</p><p class="text-xs text-gray-500 dark:text-gray-400" data-v-b5994c85>Cadastrar novo paciente</p></div><svg class="w-5 h-5 text-gray-400 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b5994c85><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-b5994c85></path></svg>',2))]),e("button",{onClick:t[2]||(t[2]=r=>k("/desktop/machines")),class:"flex items-center p-4 bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 hover:border-purple-300 dark:hover:border-purple-700 hover:shadow-md transition-all group"},[e("div",he,[j(h(D),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),t[10]||(t[10]=A('<div class="flex-1 text-left" data-v-b5994c85><p class="text-sm font-medium text-gray-900 dark:text-white" data-v-b5994c85>Ver Máquinas</p><p class="text-xs text-gray-500 dark:text-gray-400" data-v-b5994c85>Gerenciar equipamentos</p></div><svg class="w-5 h-5 text-gray-400 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b5994c85><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-b5994c85></path></svg>',2))])]),e("div",me,[e("div",ve,[t[12]||(t[12]=e("div",{class:"flex items-center justify-between mb-4"},[e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Sessões por Turno"),e("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Últimos 7 dias")],-1)),c.value?(s(),o("div",be,[j(h(f),{type:"bar",height:"300",options:v.value,series:m.value},null,8,["options","series"])])):(s(),o("div",ye,[...t[11]||(t[11]=[e("p",{class:"text-gray-500 dark:text-gray-400"},"Carregando...",-1)])]))]),e("div",ke,[e("div",fe,[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Atividade Recente",-1)),e("button",{onClick:t[3]||(t[3]=r=>k("/desktop/checklists")),class:"text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors"}," Ver todas → ")]),g.value.length>0?(s(),o("div",we,[(s(!0),o($,null,V(g.value,(r,L)=>(s(),o("div",{key:L,class:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors cursor-pointer group",onClick:Ge=>O(r)},[e("div",{class:u(["w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",r.bgColor])},[(s(),I(N(G(r.type)),{class:"w-5 h-5 text-white"}))],2),e("div",Ce,[e("p",Ae,n(r.title),1),e("p",je,n(r.description),1),e("div",Me,[e("span",Se,n(r.time),1),r.status?(s(),o("span",{key:0,class:u(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",E(r.status)])},n(r.status),3)):K("",!0)])]),t[14]||(t[14]=e("svg",{class:"w-5 h-5 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,_e))),128))])):_.value?(s(),o("div",Be,[...t[15]||(t[15]=[e("div",{class:"text-center"},[e("div",{class:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-3"}),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Carregando atividades...")],-1)])])):(s(),o("div",$e,[...t[16]||(t[16]=[e("div",{class:"text-center"},[e("svg",{class:"w-12 h-12 mx-auto text-gray-300 dark:text-gray-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Nenhuma atividade recente")],-1)])]))])]),e("div",Ve,[e("div",Pe,[t[17]||(t[17]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Checklists Recentes"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Últimas verificações de segurança realizadas")],-1)),e("button",{onClick:t[4]||(t[4]=r=>k("/desktop/checklists")),class:"px-4 py-2 text-sm font-medium text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors"}," Ver todos ")]),e("div",Ee,[e("table",Le,[t[18]||(t[18]=e("thead",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase bg-gray-50 dark:bg-gray-800/50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left font-semibold"},"ID"),e("th",{class:"px-4 py-3 text-left font-semibold"},"Data"),e("th",{class:"px-4 py-3 text-left font-semibold"},"Paciente"),e("th",{class:"px-4 py-3 text-left font-semibold"},"Máquina"),e("th",{class:"px-4 py-3 text-left font-semibold"},"Turno"),e("th",{class:"px-4 py-3 text-left font-semibold"},"Status"),e("th",{class:"px-4 py-3 text-right font-semibold"},"Ações")])],-1)),e("tbody",ze,[(s(!0),o($,null,V(b.value,r=>(s(),o("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors"},[e("td",qe,"#"+n(r.id),1),e("td",Fe,n(r.date),1),e("td",Ie,n(r.patient),1),e("td",Ne,n(r.machine),1),e("td",De,[e("span",{class:u(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",Z(r.shift)])},n(r.shift),3)]),e("td",Re,[e("span",{class:u(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",E(r.status)])},n(r.status),3)]),e("td",He,[e("button",{onClick:L=>T(r.id),class:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium transition-colors"}," Ver detalhes ",8,Te)])]))),128))])])])])]))}},Ke=Y(Oe,[["__scopeId","data-v-b5994c85"]]);export{Ke as default};
