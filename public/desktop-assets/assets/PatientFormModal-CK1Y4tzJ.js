import{e as i,f as s,i as e,r as $,y as A,w as N,A as b,B as d,C as z,l as _,k as j,J as l,q as x,p as y,m as g,H as n,v as f,R as B,T as I,I as q}from"./vendor-CiUp6LWl.js";import{_ as L,c as O,d as P}from"./desktop-D7czA7Q8.js";import{r as R}from"./XMarkIcon-3s64TdeG.js";import{r as S}from"./CheckIcon-Cz9GaYQ_.js";import{r as U}from"./BeakerIcon-YntvKYXv.js";import{r as Y}from"./DocumentTextIcon-BS4TBxaJ.js";function J(u,c){return s(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function G(u,c){return s(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})])}function K(u,c){return s(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function Q(u,c){return s(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function W(u,c){return s(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})])}function X(u,c){return s(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}const ee={class:"flex min-h-full items-center justify-center p-4"},te={class:"border-b border-gray-200 dark:border-gray-700 px-6 py-4 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20"},re={class:"flex items-center justify-between"},ae={class:"flex items-center space-x-3"},oe={class:"w-10 h-10 rounded-lg bg-primary-600 flex items-center justify-center"},se={class:"text-xl font-bold text-gray-900 dark:text-white"},le={class:"px-6 py-4 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700"},ie={class:"flex items-center justify-center space-x-3"},de={class:"flex items-center space-x-2"},ne={key:1},ue={class:"flex items-center space-x-2"},ge={key:1},ce={class:"flex items-center space-x-2"},pe={key:1},me={class:"space-y-2"},xe={class:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},ye={class:"space-y-2"},ve={class:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},be={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},fe={class:"grid grid-cols-2 gap-4"},ke={class:"space-y-2"},he={class:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},we={class:"space-y-2"},_e={class:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},Ce={key:0,class:"p-4 bg-primary-50 dark:bg-primary-900/20 border border-primary-200 dark:border-primary-800 rounded-lg"},Me={class:"flex items-center"},Ae={class:"ml-2 text-lg font-bold text-primary-700 dark:text-primary-300"},je={class:"space-y-2"},Be={class:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},Se={class:"space-y-2"},De={class:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},Ve={class:"space-y-2"},Te={class:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},$e={class:"space-y-2"},Ne={class:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},Oe={key:0,class:"flex items-center"},Ue={class:"border-t border-gray-200 dark:border-gray-700 px-6 py-4 bg-gray-50 dark:bg-gray-800/50 flex items-center justify-end space-x-3"},Ee=["disabled"],Ze={key:1,class:"w-5 h-5 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"},Fe={__name:"PatientFormModal",props:{isOpen:{type:Boolean,default:!1},patient:{type:Object,default:null}},emits:["close","saved"],setup(u,{emit:c}){const v=u,C=c,r=$({full_name:"",birth_date:"",blood_group:"",rh_factor:"",medical_record:"",allergies:"",observations:"",status:"ativo"}),p=$(!1),k=A(()=>v.patient!==null),D=A(()=>{if(!r.value.birth_date)return null;const a=new Date(r.value.birth_date),t=new Date;let o=t.getFullYear()-a.getFullYear();const m=t.getMonth()-a.getMonth();return(m<0||m===0&&t.getDate()<a.getDate())&&o--,o}),V=A(()=>r.value.full_name.trim().length>0&&r.value.birth_date.length>0&&r.value.status.length>0);N(()=>v.patient,a=>{a&&(r.value={full_name:a.full_name||"",birth_date:a.birth_date||"",blood_group:a.blood_group||"",rh_factor:a.rh_factor||"",medical_record:a.medical_record||"",allergies:a.allergies||"",observations:a.observations||"",status:a.status||"ativo"})},{immediate:!0}),N(()=>v.isOpen,a=>{a&&!v.patient&&M()});function M(){r.value={full_name:"",birth_date:"",blood_group:"",rh_factor:"",medical_record:"",allergies:"",observations:"",status:"ativo"}}function E(a){return{ativo:"Ativo",inativo:"Inativo",transferido:"Transferido",alta:"Alta Médica",obito:"Óbito"}[a]||a}function Z(a){return{ativo:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",inativo:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",transferido:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",alta:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",obito:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}[a]||"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}async function T(){if(!(!V.value||p.value)){p.value=!0;try{const a={full_name:r.value.full_name.trim(),birth_date:r.value.birth_date,blood_group:r.value.blood_group||null,rh_factor:r.value.rh_factor||null,medical_record:r.value.medical_record||null,allergies:r.value.allergies||null,observations:r.value.observations||null,status:r.value.status,active:r.value.status==="ativo"},t=k.value?`/api/patients/${v.patient.id}`:"/api/patients",o=k.value?"PUT":"POST",m=await P[o.toLowerCase()](t,a);if(!m.ok){const H=await m.json();throw new Error(H.message||"Erro ao salvar paciente")}const w=await m.json();if(!w.success)throw new Error(w.message||"Erro ao salvar paciente");C("saved",w.patient||w.data),M(),C("close")}catch(a){console.error("Error saving patient:",a),alert("Erro ao salvar paciente. Tente novamente.")}finally{p.value=!1}}}function F(){r.value.full_name||r.value.birth_date?confirm("Deseja realmente sair? Os dados não salvos serão perdidos.")&&h():h()}function h(){p.value||(M(),C("close"))}return(a,t)=>(s(),b(q,{to:"body"},[d(I,{name:"modal"},{default:z(()=>[u.isOpen?(s(),i("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:j(F,["self"])},[t[33]||(t[33]=e("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity"},null,-1)),e("div",ee,[e("div",{class:"relative w-full max-w-2xl bg-white dark:bg-gray-900 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",onClick:t[8]||(t[8]=j(()=>{},["stop"]))},[e("div",te,[e("div",re,[e("div",ae,[e("div",oe,[d(l(W),{class:"w-6 h-6 text-white"})]),e("div",null,[e("h2",se,x(k.value?"Editar Paciente":"Novo Paciente"),1),t[9]||(t[9]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Preencha as informações básicas do paciente ",-1))])]),e("button",{onClick:h,class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[d(l(R),{class:"w-6 h-6"})])])]),e("div",le,[e("div",ie,[e("div",de,[e("div",{class:y(["w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold transition-all",r.value.full_name?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500"])},[r.value.full_name?(s(),b(l(S),{key:0,class:"w-5 h-5"})):(s(),i("span",ne,"1"))],2),t[10]||(t[10]=e("span",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"Nome",-1))]),e("div",{class:y(["w-12 h-1 rounded-full",r.value.birth_date?"bg-primary-600":"bg-gray-200 dark:bg-gray-700"])},null,2),e("div",ue,[e("div",{class:y(["w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold transition-all",r.value.birth_date?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500"])},[r.value.birth_date?(s(),b(l(S),{key:0,class:"w-5 h-5"})):(s(),i("span",ge,"2"))],2),t[11]||(t[11]=e("span",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"Data",-1))]),e("div",{class:y(["w-12 h-1 rounded-full",r.value.blood_group&&r.value.rh_factor?"bg-primary-600":"bg-gray-200 dark:bg-gray-700"])},null,2),e("div",ce,[e("div",{class:y(["w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold transition-all",r.value.blood_group&&r.value.rh_factor?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500"])},[r.value.blood_group&&r.value.rh_factor?(s(),b(l(S),{key:0,class:"w-5 h-5"})):(s(),i("span",pe,"3"))],2),t[12]||(t[12]=e("span",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"Sangue",-1))])])]),e("form",{onSubmit:j(T,["prevent"]),class:"p-6 space-y-5"},[e("div",me,[e("label",xe,[d(l(X),{class:"w-4 h-4 mr-2 text-primary-600 dark:text-primary-400"}),t[13]||(t[13]=n(" Nome Completo ",-1)),t[14]||(t[14]=e("span",{class:"text-red-500 ml-1"},"*",-1))]),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.value.full_name=o),type:"text",required:"",placeholder:"Digite o nome completo do paciente",class:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 dark:text-white placeholder-gray-400"},null,512),[[f,r.value.full_name]])]),e("div",ye,[e("label",ve,[d(l(J),{class:"w-4 h-4 mr-2 text-green-600 dark:text-green-400"}),t[15]||(t[15]=n(" Data de Nascimento ",-1)),t[16]||(t[16]=e("span",{class:"text-red-500 ml-1"},"*",-1))]),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>r.value.birth_date=o),type:"date",required:"",class:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 dark:text-white"},null,512),[[f,r.value.birth_date]]),D.value?(s(),i("p",be," Idade: "+x(D.value)+" anos ",1)):_("",!0)]),e("div",fe,[e("div",ke,[e("label",he,[d(l(U),{class:"w-4 h-4 mr-2 text-orange-600 dark:text-orange-400"}),t[17]||(t[17]=n(" Tipo Sanguíneo ",-1)),t[18]||(t[18]=e("span",{class:"text-gray-400 text-xs ml-1"},"(opcional)",-1))]),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.value.blood_group=o),class:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 dark:text-white"},[...t[19]||(t[19]=[e("option",{value:""},"Selecione",-1),e("option",{value:"A"},"A",-1),e("option",{value:"B"},"B",-1),e("option",{value:"AB"},"AB",-1),e("option",{value:"O"},"O",-1)])],512),[[B,r.value.blood_group]])]),e("div",we,[e("label",_e,[d(l(Q),{class:"w-4 h-4 mr-2 text-green-600 dark:text-green-400"}),t[20]||(t[20]=n(" Fator RH ",-1)),t[21]||(t[21]=e("span",{class:"text-gray-400 text-xs ml-1"},"(opcional)",-1))]),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>r.value.rh_factor=o),class:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 dark:text-white"},[...t[22]||(t[22]=[e("option",{value:""},"Selecione",-1),e("option",{value:"+"},"Positivo (+)",-1),e("option",{value:"-"},"Negativo (-)",-1)])],512),[[B,r.value.rh_factor]])])]),r.value.blood_group&&r.value.rh_factor?(s(),i("div",Ce,[e("div",Me,[d(l(U),{class:"w-5 h-5 text-primary-600 dark:text-primary-400 mr-2"}),t[23]||(t[23]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Tipo Sanguíneo Completo:",-1)),e("span",Ae,x(r.value.blood_group)+x(r.value.rh_factor),1)])])):_("",!0),e("div",je,[e("label",Be,[d(l(G),{class:"w-4 h-4 mr-2 text-purple-600 dark:text-purple-400"}),t[24]||(t[24]=n(" Prontuário Médico ",-1)),t[25]||(t[25]=e("span",{class:"text-gray-400 text-xs ml-1"},"(opcional)",-1))]),g(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>r.value.medical_record=o),type:"text",placeholder:"Número do prontuário",class:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 dark:text-white placeholder-gray-400"},null,512),[[f,r.value.medical_record]])]),e("div",Se,[e("label",De,[d(l(K),{class:"w-4 h-4 mr-2 text-red-600 dark:text-red-400"}),t[26]||(t[26]=n(" Alergias ",-1)),t[27]||(t[27]=e("span",{class:"text-gray-400 text-xs ml-1"},"(opcional)",-1))]),g(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>r.value.allergies=o),rows:"3",placeholder:"Descreva alergias conhecidas",class:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 dark:text-white placeholder-gray-400 resize-none"},null,512),[[f,r.value.allergies]])]),e("div",Ve,[e("label",Te,[d(l(Y),{class:"w-4 h-4 mr-2 text-gray-600 dark:text-gray-400"}),t[28]||(t[28]=n(" Observações Médicas ",-1)),t[29]||(t[29]=e("span",{class:"text-gray-400 text-xs ml-1"},"(opcional)",-1))]),g(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=o=>r.value.observations=o),rows:"4",placeholder:"Observações gerais sobre o paciente",class:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 dark:text-white placeholder-gray-400 resize-none"},null,512),[[f,r.value.observations]])]),e("div",$e,[e("label",Ne,[d(l(O),{class:"w-4 h-4 mr-2 text-green-600 dark:text-green-400"}),t[30]||(t[30]=n(" Status do Paciente ",-1)),t[31]||(t[31]=e("span",{class:"text-red-500 ml-1"},"*",-1))]),g(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>r.value.status=o),required:"",class:"w-full px-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 dark:text-white"},[...t[32]||(t[32]=[e("option",{value:""},"Selecione o status",-1),e("option",{value:"ativo"},"Ativo",-1),e("option",{value:"inativo"},"Inativo",-1),e("option",{value:"transferido"},"Transferido",-1),e("option",{value:"alta"},"Alta Médica",-1),e("option",{value:"obito"},"Óbito",-1)])],512),[[B,r.value.status]]),r.value.status?(s(),i("div",Oe,[e("span",{class:y(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",Z(r.value.status)])},x(E(r.value.status)),3)])):_("",!0)])],32),e("div",Ue,[e("button",{type:"button",onClick:h,class:"px-5 py-2.5 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium"}," Cancelar "),e("button",{onClick:T,disabled:!V.value||p.value,class:"px-5 py-2.5 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[p.value?(s(),i("div",Ze)):(s(),b(l(O),{key:0,class:"w-5 h-5 mr-2"})),n(" "+x(p.value?"Salvando...":k.value?"Atualizar":"Cadastrar"),1)],8,Ee)])])])])):_("",!0)]),_:1})]))}},Re=L(Fe,[["__scopeId","data-v-c6572a41"]]);export{Re as P,K as r};
