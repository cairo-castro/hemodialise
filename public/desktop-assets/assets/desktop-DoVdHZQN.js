const __vite__fileDeps=["assets/DashboardView-BCzI1sq_.js","assets/vendor-DRnPkkuw.js","assets/DashboardView-lqgCyVkX.css","assets/ChecklistsView-SqZIcI3R.js","assets/MachinesView-B7z_GdoK.js","assets/PatientsView-CXGhviz6.js","assets/ProfileView-f0oSQwfq.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{r as x,a as j,c as n,o as r,b as e,w as O,d as _,e as E,v as $,n as b,t as k,f as R,g as C,h as L,i as B,F as U,j as z,k as N,u as Z,l as H,m as A,p as D,q as F,s as W,x as G,y as K,z as X,A as J}from"./vendor-DRnPkkuw.js";const M=(c,u)=>{const a=c.__vccOpts||c;for(const[p,i]of u)a[p]=i;return a},Q={class:"login-view w-full max-w-md px-6"},Y={class:"bg-white rounded-2xl shadow-2xl p-8"},ee={key:0,class:"mt-1 text-sm text-red-600"},te={key:0,class:"mt-1 text-sm text-red-600"},oe={class:"flex items-center"},se=["disabled"],re={key:0},ae={key:1,class:"flex items-center justify-center"},ne={key:0,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},le={class:"text-sm text-red-600"},ie={__name:"LoginView",emits:["login-success"],setup(c,{emit:u}){const a=u,p=x(!1),i=j({email:"",password:"",remember:!1}),o=j({email:"",password:"",general:""});async function d(){var m,t,g;o.email="",o.password="",o.general="",p.value=!0;try{const h=(m=document.querySelector('meta[name="csrf-token"]'))==null?void 0:m.getAttribute("content"),y=await fetch("/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":h},credentials:"same-origin",body:JSON.stringify({email:i.email,password:i.password,remember:i.remember})}),v=await y.json();y.ok?a("login-success",v.user):v.errors?(o.email=((t=v.errors.email)==null?void 0:t[0])||"",o.password=((g=v.errors.password)==null?void 0:g[0])||""):o.general=v.message||"Erro ao fazer login. Tente novamente."}catch(h){console.error("Login error:",h),o.general="Erro de conexão. Verifique sua internet e tente novamente."}finally{p.value=!1}}return(m,t)=>(r(),n("div",Q,[e("div",Y,[t[7]||(t[7]=e("div",{class:"text-center mb-8"},[e("img",{src:"/hemodialise_logo.png",alt:"Logo Hemodiálise",class:"w-24 h-24 mx-auto mb-4"}),e("h1",{class:"text-3xl font-bold text-gray-900"},"Sistema Hemodiálise"),e("p",{class:"text-gray-600 mt-2"},"Interface Desktop")],-1)),e("form",{onSubmit:O(d,["prevent"]),class:"space-y-6"},[e("div",null,[t[3]||(t[3]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email ",-1)),E(e("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=g=>i.email=g),type:"email",required:"",class:b(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",{"border-red-500":o.email}]),placeholder:"seu@email.com"},null,2),[[$,i.email]]),o.email?(r(),n("p",ee,k(o.email),1)):_("",!0)]),e("div",null,[t[4]||(t[4]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"}," Senha ",-1)),E(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=g=>i.password=g),type:"password",required:"",class:b(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",{"border-red-500":o.password}]),placeholder:"••••••••"},null,2),[[$,i.password]]),o.password?(r(),n("p",te,k(o.password),1)):_("",!0)]),e("div",oe,[E(e("input",{id:"remember","onUpdate:modelValue":t[2]||(t[2]=g=>i.remember=g),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[R,i.remember]]),t[5]||(t[5]=e("label",{for:"remember",class:"ml-2 block text-sm text-gray-700"}," Lembrar-me ",-1))]),e("button",{type:"submit",disabled:p.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(r(),n("span",ae,[...t[6]||(t[6]=[e("svg",{class:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C(" Entrando... ",-1)])])):(r(),n("span",re,"Entrar"))],8,se),o.general?(r(),n("div",ne,[e("p",le,k(o.general),1)])):_("",!0)],32),t[8]||(t[8]=e("div",{class:"mt-6 text-center text-sm text-gray-600"},[e("p",null,[C("Acesso móvel? "),e("a",{href:"/mobile",class:"text-blue-600 hover:underline"},"Clique aqui")]),e("p",{class:"mt-2"},[C("Admin? "),e("a",{href:"/admin",class:"text-blue-600 hover:underline"},"Painel Admin")])],-1))])]))}},de=M(ie,[["__scopeId","data-v-a43e4e90"]]);function ce(c,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"})])}function ue(c,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"})])}function me(c,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})])}function pe(c,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function he(c,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}const ge={class:"desktop-layout flex h-screen bg-gray-50 dark:bg-gray-900"},ke={class:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800"},ve={key:0,class:"flex items-center space-x-3"},fe={key:1,src:"/hemodialise_logo.png",alt:"Logo",class:"w-8 h-8 mx-auto"},ye={class:"flex-1 px-3 py-4 space-y-1 overflow-y-auto"},be={key:0,class:"truncate"},xe={key:1,class:"ml-auto inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/50 dark:text-primary-300"},_e={class:"border-t border-gray-200 dark:border-gray-800 p-3"},we={key:0,class:"flex items-center space-x-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer transition-colors"},Ce={class:"w-8 h-8 rounded-full bg-primary-600 flex items-center justify-center text-white text-sm font-semibold"},Ae={class:"flex-1 min-w-0"},Ee={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},Le={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},Me={class:"w-8 h-8 rounded-full bg-primary-600 flex items-center justify-center text-white text-sm font-semibold mx-auto"},Se={class:"flex-1 flex flex-col overflow-hidden"},Te={class:"bg-white dark:bg-gray-950 border-b border-gray-200 dark:border-gray-800 px-6 py-4"},Ve={class:"flex items-center justify-between"},je={class:"text-2xl font-bold text-gray-900 dark:text-white"},$e={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},qe={class:"flex items-center space-x-4"},Be={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},He={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},De={class:"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900 p-6"},Pe={__name:"DesktopLayout",setup(c){const u=Z(),a=x(!1),p=x("light"),i=x({name:"Usuário",email:"usuario@hemodialise.ma.gov.br"}),o=[{name:"dashboard",path:"/desktop",label:"Dashboard",icon:me},{name:"checklists",path:"/desktop/checklists",label:"Checklists",icon:ce,badge:4},{name:"machines",path:"/desktop/machines",label:"Máquinas",icon:ue},{name:"patients",path:"/desktop/patients",label:"Pacientes",icon:he},{name:"profile",path:"/desktop/profile",label:"Perfil",icon:pe}],d=L(()=>{const s=o.find(l=>l.path===u.path);return(s==null?void 0:s.label)||"Dashboard"}),m=L(()=>({"/desktop":"Visão geral do sistema","/desktop/checklists":"Checklists de segurança","/desktop/machines":"Gerenciamento de máquinas","/desktop/patients":"Cadastro de pacientes","/desktop/profile":"Configurações do perfil"})[u.path]||""),t=L(()=>{var s;return(s=i.value)!=null&&s.name?i.value.name.split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2):"U"});B(()=>{const s=localStorage.getItem("theme")||"light";p.value=s,y(s)});function g(){a.value=!a.value}function h(){const s=p.value==="dark"?"light":"dark";p.value=s,localStorage.setItem("theme",s),y(s),console.log("Theme toggled to:",s),console.log("HTML classList:",document.documentElement.classList.toString())}function y(s){const l=document.documentElement;s==="dark"?l.classList.add("dark"):l.classList.remove("dark")}function v(s){return u.path===s||s!=="/desktop"&&u.path.startsWith(s)}async function S(){var s;try{const l=(s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content");await fetch("/logout",{method:"POST",headers:{"X-CSRF-TOKEN":l,Accept:"application/json"},credentials:"same-origin"}),window.location.href="/desktop"}catch(l){console.error("Logout error:",l),window.location.href="/desktop"}}return(s,l)=>{var T,V;const I=H("router-link");return r(),n("div",ge,[e("aside",{class:b(["sidebar bg-white dark:bg-gray-950 border-r border-gray-200 dark:border-gray-800 transition-all duration-300 flex flex-col",a.value?"w-16":"w-64"])},[e("div",ke,[a.value?(r(),n("img",fe)):(r(),n("div",ve,[...l[0]||(l[0]=[e("img",{src:"/hemodialise_logo.png",alt:"Logo",class:"w-8 h-8"},null,-1),e("span",{class:"font-semibold text-gray-900 dark:text-white"},"Hemodiálise",-1)])])),e("button",{onClick:g,class:b(["p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",{"ml-auto":a.value}])},[...l[1]||(l[1]=[e("svg",{class:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])],2)]),e("nav",ye,[(r(),n(U,null,z(o,f=>A(I,{key:f.name,to:f.path,class:b(["nav-item flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-200",{"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":v(f.path),"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800":!v(f.path)}])},{default:D(()=>[(r(),F(W(f.icon),{class:b(["w-5 h-5 flex-shrink-0",a.value?"":"mr-3"])},null,8,["class"])),a.value?_("",!0):(r(),n("span",be,k(f.label),1)),f.badge&&!a.value?(r(),n("span",xe,k(f.badge),1)):_("",!0)]),_:2},1032,["to","class"])),64))]),e("div",_e,[a.value?(r(),n("button",{key:1,onClick:S,class:"w-full p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[e("div",Me,k(t.value),1)])):(r(),n("div",we,[e("div",Ce,k(t.value),1),e("div",Ae,[e("p",Ee,k(((T=i.value)==null?void 0:T.name)||"Usuário"),1),e("p",Le,k((V=i.value)==null?void 0:V.email),1)])])),a.value?_("",!0):(r(),n("button",{key:2,onClick:S,class:"mt-2 w-full flex items-center px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[...l[2]||(l[2]=[e("svg",{class:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),C(" Sair ",-1)])]))])],2),e("div",Se,[e("header",Te,[e("div",Ve,[e("div",null,[e("h1",je,k(d.value),1),e("p",$e,k(m.value),1)]),e("div",qe,[l[5]||(l[5]=e("button",{class:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),e("button",{onClick:h,class:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",title:"Alternar tema"},[p.value==="dark"?(r(),n("svg",Be,[...l[3]||(l[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])])):(r(),n("svg",He,[...l[4]||(l[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])]))])])])]),e("main",De,[N(s.$slots,"default",{},void 0)])])])}}},Ie=M(Pe,[["__scopeId","data-v-3f7c3590"]]),Oe={class:"desktop-app h-screen bg-gray-50 dark:bg-gray-900 antialiased"},Re={key:0,class:"auth-container"},Ue={key:1,class:"main-container h-full"},ze={__name:"DesktopApp",setup(c){const u=G(),a=x(!1),p=x(null);B(async()=>{await i()});async function i(){try{const d=await fetch("/api/me",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"same-origin"});if(d.ok){const m=await d.json();p.value=m.user,a.value=!0}else a.value=!1}catch(d){console.error("Auth check failed:",d),a.value=!1}}function o(d){p.value=d,a.value=!0,u.push("/desktop")}return(d,m)=>{const t=H("router-view");return r(),n("div",Oe,[a.value?(r(),n("div",Ue,[A(Ie,null,{default:D(()=>[A(t)]),_:1})])):(r(),n("div",Re,[A(de,{onLoginSuccess:o})]))])}}},Ne=M(ze,[["__scopeId","data-v-e7708747"]]),Ze="modulepreload",Fe=function(c){return"/desktop-assets/"+c},q={},w=function(u,a,p){let i=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),d=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.all(a.map(m=>{if(m=Fe(m),m in q)return;q[m]=!0;const t=m.endsWith(".css"),g=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${g}`))return;const h=document.createElement("link");if(h.rel=t?"stylesheet":Ze,t||(h.as="script",h.crossOrigin=""),h.href=m,d&&h.setAttribute("nonce",d),document.head.appendChild(h),t)return new Promise((y,v)=>{h.addEventListener("load",y),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${m}`)))})}))}return i.then(()=>u()).catch(o=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=o,window.dispatchEvent(d),!d.defaultPrevented)throw o})},We=[{path:"/desktop",name:"desktop.home",component:()=>w(()=>import("./DashboardView-BCzI1sq_.js"),__vite__mapDeps([0,1,2])),meta:{requiresAuth:!0}},{path:"/desktop/checklists",name:"desktop.checklists",component:()=>w(()=>import("./ChecklistsView-SqZIcI3R.js"),__vite__mapDeps([3,1])),meta:{requiresAuth:!0}},{path:"/desktop/machines",name:"desktop.machines",component:()=>w(()=>import("./MachinesView-B7z_GdoK.js"),__vite__mapDeps([4,1])),meta:{requiresAuth:!0}},{path:"/desktop/patients",name:"desktop.patients",component:()=>w(()=>import("./PatientsView-CXGhviz6.js"),__vite__mapDeps([5,1])),meta:{requiresAuth:!0}},{path:"/desktop/profile",name:"desktop.profile",component:()=>w(()=>import("./ProfileView-f0oSQwfq.js"),__vite__mapDeps([6,1])),meta:{requiresAuth:!0}}],Ge=K({history:X(),routes:We}),P=J(Ne);P.use(Ge);P.mount("#desktop-app");setTimeout(()=>{const c=document.getElementById("loading-screen");c&&(c.classList.add("fade-out"),setTimeout(()=>{c.style.display="none"},500))},100);export{M as _,ue as a,he as b,ce as r};
