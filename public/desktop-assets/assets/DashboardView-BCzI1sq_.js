import{_ as w,r as j,a as C,b as $}from"./desktop-DoVdHZQN.js";import{c as o,o as a,b as t,r as c,i as S,F as f,j as x,d as g,B,t as i,n as y,q as M,s as V,C as p}from"./vendor-DRnPkkuw.js";function A(b,u){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const D={class:"dashboard-view space-y-6"},N={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},E={class:"flex items-start justify-between"},q={class:"flex-1"},z={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},F={class:"text-3xl font-bold text-gray-900 dark:text-white mt-2"},H={class:"flex items-center mt-2"},P={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},R={class:"bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 p-6"},I={key:0,class:"h-64"},L={class:"h-full flex items-end justify-between space-x-2"},T={class:"w-full flex flex-col items-center space-y-1 flex-1 justify-end"},Z=["title"],G=["title"],J=["title"],K={class:"text-xs text-gray-600 dark:text-gray-400 font-medium"},O={key:1,class:"h-64 flex items-center justify-center"},Q={key:2,class:"flex items-center justify-center space-x-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-800"},U={class:"bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 p-6"},W={key:0,class:"space-y-2"},X={class:"flex-1 min-w-0"},Y={class:"text-sm font-medium text-gray-900 dark:text-white"},ee={class:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate"},te={class:"text-xs text-gray-400 dark:text-gray-500 flex-shrink-0"},ae={key:1,class:"h-64 flex items-center justify-center"},se={key:2,class:"h-64 flex items-center justify-center"},re={__name:"DashboardView",setup(b){const u=c(!0),d=c([{label:"Checklists Hoje",value:"...",change:0,icon:j,bgColor:"bg-blue-500"},{label:"Máquinas Ativas",value:"...",change:0,icon:C,bgColor:"bg-green-500"},{label:"Pacientes",value:"...",change:0,icon:$,bgColor:"bg-purple-500"},{label:"Conformidade",value:"...",change:0,icon:A,bgColor:"bg-orange-500"}]),n=c(null),v=c([]);S(async()=>{await Promise.all([m(),_(),k()]),u.value=!1});async function m(){try{const s=await fetch("/api/dashboard/stats",{credentials:"same-origin",headers:{Accept:"application/json"}});if(s.ok){const{data:e}=await s.json();d.value[0].value=e.checklists.value.toString(),d.value[0].change=e.checklists.change,d.value[1].value=`${e.machines.active}/${e.machines.total}`,d.value[1].change=e.machines.change,d.value[2].value=e.patients.value.toString(),d.value[2].change=e.patients.change,d.value[3].value=`${e.conformity.value}%`,d.value[3].change=e.conformity.change}}catch(s){console.error("Error loading stats:",s)}}async function _(){try{const s=await fetch("/api/dashboard/sessions-by-shift",{credentials:"same-origin",headers:{Accept:"application/json"}});if(s.ok){const{data:e}=await s.json();n.value=e}}catch(s){console.error("Error loading sessions by shift:",s)}}async function k(){try{const s=await fetch("/api/dashboard/recent-activity",{credentials:"same-origin",headers:{Accept:"application/json"}});if(s.ok){const{data:e}=await s.json();v.value=e}}catch(s){console.error("Error loading recent activity:",s)}}function h(s){if(!n.value)return 0;const e=n.value.datasets.flatMap(l=>l.data).filter(l=>l>0),r=Math.max(...e,1);return Math.max(s/r*90,10)}return(s,e)=>(a(),o("div",D,[t("div",N,[(a(!0),o(f,null,x(d.value,r=>(a(),o("div",{key:r.label,class:"metric-card bg-white dark:bg-gray-950 rounded-xl border border-gray-200 dark:border-gray-800 p-6 hover:shadow-lg transition-shadow duration-200"},[t("div",E,[t("div",q,[t("p",z,i(r.label),1),t("p",F,i(r.value),1),t("div",H,[t("span",{class:y(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",r.change>=0?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"])},i(r.change>=0?"+":"")+i(r.change)+"% ",3)])]),t("div",{class:y(["w-12 h-12 rounded-lg flex items-center justify-center",r.bgColor])},[(a(),M(V(r.icon),{class:"w-6 h-6 text-white"}))],2)])]))),128))]),t("div",P,[t("div",R,[e[2]||(e[2]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Sessões por Turno - Últimos 7 Dias",-1)),n.value?(a(),o("div",I,[t("div",L,[(a(!0),o(f,null,x(n.value.labels,(r,l)=>(a(),o("div",{key:l,class:"flex-1 flex flex-col items-center space-y-1"},[t("div",T,[n.value.datasets[0].data[l]>0?(a(),o("div",{key:0,class:"w-full bg-blue-500 rounded-t transition-all hover:bg-blue-600",style:p({height:`${h(n.value.datasets[0].data[l])}%`}),title:`Matutino: ${n.value.datasets[0].data[l]}`},null,12,Z)):g("",!0),n.value.datasets[1].data[l]>0?(a(),o("div",{key:1,class:"w-full bg-green-500 transition-all hover:bg-green-600",style:p({height:`${h(n.value.datasets[1].data[l])}%`}),title:`Vespertino: ${n.value.datasets[1].data[l]}`},null,12,G)):g("",!0),n.value.datasets[2].data[l]>0?(a(),o("div",{key:2,class:"w-full bg-purple-500 rounded-b transition-all hover:bg-purple-600",style:p({height:`${h(n.value.datasets[2].data[l])}%`}),title:`Noturno: ${n.value.datasets[2].data[l]}`},null,12,J)):g("",!0)]),t("p",K,i(r),1)]))),128))])])):(a(),o("div",O,[...e[0]||(e[0]=[t("p",{class:"text-gray-500 dark:text-gray-400"},"Carregando...",-1)])])),n.value?(a(),o("div",Q,[...e[1]||(e[1]=[B('<div class="flex items-center space-x-2" data-v-1f0a8d46><div class="w-3 h-3 bg-blue-500 rounded" data-v-1f0a8d46></div><span class="text-sm text-gray-600 dark:text-gray-400" data-v-1f0a8d46>Matutino</span></div><div class="flex items-center space-x-2" data-v-1f0a8d46><div class="w-3 h-3 bg-green-500 rounded" data-v-1f0a8d46></div><span class="text-sm text-gray-600 dark:text-gray-400" data-v-1f0a8d46>Vespertino</span></div><div class="flex items-center space-x-2" data-v-1f0a8d46><div class="w-3 h-3 bg-purple-500 rounded" data-v-1f0a8d46></div><span class="text-sm text-gray-600 dark:text-gray-400" data-v-1f0a8d46>Noturno</span></div>',3)])])):g("",!0)]),t("div",U,[e[5]||(e[5]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Atividade Recente",-1)),v.value.length>0?(a(),o("div",W,[(a(!0),o(f,null,x(v.value,(r,l)=>(a(),o("div",{key:l,class:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors cursor-pointer"},[t("div",{class:y(["w-2 h-2 rounded-full mt-2 flex-shrink-0",r.dotColor])},null,2),t("div",X,[t("p",Y,i(r.title),1),t("p",ee,i(r.description),1)]),t("span",te,i(r.time),1)]))),128))])):u.value?(a(),o("div",ae,[...e[3]||(e[3]=[t("p",{class:"text-gray-500 dark:text-gray-400"},"Carregando...",-1)])])):(a(),o("div",se,[...e[4]||(e[4]=[t("p",{class:"text-gray-500 dark:text-gray-400"},"Nenhuma atividade recente",-1)])]))])])]))}},ne=w(re,[["__scopeId","data-v-1f0a8d46"]]);export{ne as default};
