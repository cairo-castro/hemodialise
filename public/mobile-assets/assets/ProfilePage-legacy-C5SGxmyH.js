System.register(["./vendor-legacy-X-yEH-Kx.js","./ionic-legacy-CUiHmorP.js","./_plugin-vue_export-helper-legacy-B7gxhGwx.js"],function(e,a){"use strict";var o,l,t,r,i,n,d,s,u,c,p,f,v,m,b,g,w,h,x,_,y,k,z,C,S,j,V,E,q,A,U,R,M,N,D,P,T,X,B,H,I,J,L,G,O,W;return{setters:[e=>{o=e.d,l=e.r,t=e.c,r=e.o,i=e.B,n=e.q,d=e.x,s=e.y,u=e.v,c=e.H,p=e.t,f=e.n,v=e.J,m=e.G,b=e.C,g=e.z},e=>{w=e.e,h=e.t,x=e.o,_=e.q,y=e.x,k=e.p,z=e.r,C=e.s,S=e.u,j=e.f,V=e.B,E=e.C,q=e.g,A=e.j,U=e.M,R=e.N,M=e.J,N=e.k,D=e.i,P=e.l},e=>{T=e.d,X=e.n,B=e.Z,H=e.e,I=e.b,J=e.l,L=e.s,G=e.a5,O=e.G,W=e._}],execute:function(){var a=document.createElement("style");a.textContent=".profile-content[data-v-7b1db914]{--background: #f5f7fa}.profile-container[data-v-7b1db914]{max-width:600px;margin:0 auto;padding:16px 16px 32px}.loading-state[data-v-7b1db914]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;gap:16px}.loading-state p[data-v-7b1db914]{color:var(--ion-color-step-600);font-size:.9rem}.profile-header-card[data-v-7b1db914]{margin-bottom:20px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.profile-header[data-v-7b1db914]{display:flex;align-items:center;gap:20px;margin-bottom:16px}.profile-avatar[data-v-7b1db914]{width:80px;height:80px;background:rgba(255,255,255,.2);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.profile-avatar ion-icon[data-v-7b1db914]{font-size:4rem;color:#fff}.profile-header-info[data-v-7b1db914]{flex:1;min-width:0}.profile-header-info h2[data-v-7b1db914]{font-size:1.5rem;font-weight:700;margin:0 0 4px;color:#fff}.user-email[data-v-7b1db914]{font-size:.9rem;margin:0 0 8px;opacity:.9;word-break:break-word}.profile-unit[data-v-7b1db914]{display:flex;align-items:center;gap:8px;padding:10px;background:rgba(255,255,255,.15);border-radius:8px}.profile-unit ion-icon[data-v-7b1db914]{font-size:1.2rem;flex-shrink:0}.profile-unit span[data-v-7b1db914]{font-size:.9rem;font-weight:500}.form-card[data-v-7b1db914]{margin-bottom:20px}.form-card ion-card-title[data-v-7b1db914]{font-size:1.1rem;font-weight:700;color:var(--ion-text-color)}.form-group[data-v-7b1db914]{margin-bottom:20px}.form-group label[data-v-7b1db914]{display:block;font-size:.9rem;font-weight:600;color:var(--ion-text-color);margin-bottom:8px}.form-group ion-input[data-v-7b1db914]{--background: var(--ion-background-color);--padding-start: 12px;--padding-end: 12px;border:2px solid var(--ion-color-step-150);border-radius:8px;font-size:.95rem}.form-group ion-input[data-v-7b1db914]:focus-within{--background: var(--ion-card-background);border-color:var(--ion-color-primary)}.password-input[data-v-7b1db914]{position:relative;display:flex;align-items:center}.password-input ion-input[data-v-7b1db914]{flex:1;padding-right:48px}.password-toggle[data-v-7b1db914]{position:absolute;right:0;--padding-start: 8px;--padding-end: 8px;height:100%;margin:0}.password-toggle ion-icon[data-v-7b1db914]{font-size:1.3rem;color:var(--ion-color-step-600)}.password-hint[data-v-7b1db914]{font-size:.8rem;color:var(--ion-color-step-600);margin-top:4px;font-style:italic}.form-actions[data-v-7b1db914]{margin-top:24px}.form-actions ion-button[data-v-7b1db914]{--border-radius: 10px;height:48px;font-weight:600}.info-card[data-v-7b1db914]{margin-bottom:20px}.info-card ion-card-title[data-v-7b1db914]{font-size:1.1rem;font-weight:700;color:var(--ion-text-color)}.info-item[data-v-7b1db914]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--ion-color-step-150)}.info-item[data-v-7b1db914]:last-child{border-bottom:none}.info-label[data-v-7b1db914]{display:flex;align-items:center;gap:10px;font-size:.9rem;color:var(--ion-color-step-600);font-weight:500}.info-label ion-icon[data-v-7b1db914]{font-size:1.2rem;color:var(--ion-color-step-500)}.info-value[data-v-7b1db914]{font-size:.9rem;color:var(--ion-text-color);font-weight:600;text-align:right}@media (max-width: 480px){.profile-container[data-v-7b1db914]{padding:12px}.profile-avatar[data-v-7b1db914]{width:60px;height:60px}.profile-avatar ion-icon[data-v-7b1db914]{font-size:3rem}.profile-header-info h2[data-v-7b1db914]{font-size:1.3rem}.info-item[data-v-7b1db914]{flex-direction:column;align-items:flex-start;gap:4px}.info-value[data-v-7b1db914]{text-align:left}}\n",document.head.appendChild(a);const K={class:"profile-container"},Z={key:0,class:"loading-state"},F={key:1},Q={class:"profile-header"},Y={class:"profile-avatar"},$={class:"profile-header-info"},ee={class:"user-email"},ae={key:0,class:"profile-unit"},oe={class:"form-group"},le={class:"form-group"},te={class:"form-actions"},re={class:"form-group"},ie={class:"password-input"},ne={class:"form-group"},de={class:"password-input"},se={class:"form-group"},ue={class:"password-input"},ce={class:"form-actions"},pe={class:"info-item"},fe={class:"info-label"},ve={class:"info-value"},me={key:0,class:"info-item"},be={class:"info-label"},ge={class:"info-value"},we={class:"info-item"},he={class:"info-label"},xe={class:"info-value"};e("default",W(o({__name:"ProfilePage",setup(e){g();const a=l(null),o=l(!1),W=l(!1),_e=l(!1),ye=l({name:"",email:""}),ke=l({current_password:"",new_password:"",new_password_confirmation:""}),ze=l(!1),Ce=l(!1),Se=l(!1),je=t(()=>!!a.value&&(ye.value.name!==a.value.name||ye.value.email!==a.value.email)),Ve=t(()=>ke.value.current_password.length>0&&ke.value.new_password.length>0&&ke.value.new_password_confirmation.length>0),Ee=async()=>{try{o.value=!0;const e=await fetch("/api/me",{credentials:"include",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),l=await e.json();if(!l.success||!l.user)throw new Error(l.message||"Erro ao carregar perfil");a.value=l.user,ye.value={name:a.value.name||"",email:a.value.email||""}}catch(e){console.error("Error loading profile:",e);const a=await h.create({message:e.message||"Erro ao carregar perfil",duration:3e3,color:"danger",position:"top"});await a.present()}finally{o.value=!1}},qe=async()=>{try{W.value=!0;const e=await fetch("/api/profile/update",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(ye.value)}),o=await e.json();if(!o.success)throw new Error(o.message||"Erro ao atualizar perfil");{a.value=o.user,ye.value={name:a.value.name||"",email:a.value.email||""};const e=await h.create({message:o.message||"Perfil atualizado com sucesso",duration:2e3,color:"success",position:"top"});await e.present()}}catch(e){console.error("Error updating profile:",e);const a=await h.create({message:e.message||"Erro ao atualizar perfil",duration:3e3,color:"danger",position:"top"});await a.present()}finally{W.value=!1}},Ae=async()=>{if(ke.value.new_password!==ke.value.new_password_confirmation){const e=await h.create({message:"As senhas não coincidem",duration:3e3,color:"warning",position:"top"});return void(await e.present())}if(ke.value.new_password.length<8){const e=await h.create({message:"A nova senha deve ter no mínimo 8 caracteres",duration:3e3,color:"warning",position:"top"});return void(await e.present())}try{_e.value=!0;const e=await fetch("/api/profile/password",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(ke.value)}),a=await e.json();if(!a.success)throw new Error(a.message||"Erro ao alterar senha");{ke.value={current_password:"",new_password:"",new_password_confirmation:""},ze.value=!1,Ce.value=!1,Se.value=!1;const e=await P.create({header:"Senha Alterada",message:"Sua senha foi alterada com sucesso!",buttons:["OK"]});await e.present()}}catch(e){console.error("Error updating password:",e);const a=await h.create({message:e.message||"Erro ao alterar senha",duration:3e3,color:"danger",position:"top"});await a.present()}finally{_e.value=!1}},Ue=async e=>{await Ee(),e.target.complete()},Re=e=>({admin:"Administrador",manager:"Gestor",field_user:"Usuário de Campo",tecnico:"Técnico",coordenador:"Coordenador",supervisor:"Supervisor"}[e]||e),Me=e=>e?new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}):"N/A";return r(()=>{Ee()}),(e,l)=>(n(),i(s(w),null,{default:d(()=>[u(s(z),{translucent:!0},{default:d(()=>[u(s(x),{color:"primary"},{default:d(()=>[u(s(_),{slot:"start"},{default:d(()=>[u(s(y),{"default-href":"/dashboard"})]),_:1}),u(s(k),null,{default:d(()=>[...l[8]||(l[8]=[c("Meu Perfil",-1)])]),_:1})]),_:1})]),_:1}),u(s(D),{fullscreen:!0,class:"profile-content"},{default:d(()=>[p("div",K,[u(s(C),{slot:"fixed",onIonRefresh:Ue},{default:d(()=>[u(s(S))]),_:1}),o.value&&!a.value?(n(),f("div",Z,[u(s(j),{name:"crescent"}),l[9]||(l[9]=p("p",null,"Carregando perfil...",-1))])):a.value?(n(),f("div",F,[u(s(V),{class:"profile-header-card"},{default:d(()=>[u(s(E),null,{default:d(()=>{return[p("div",Q,[p("div",Y,[u(s(q),{icon:s(T)},null,8,["icon"])]),p("div",$,[p("h2",null,m(a.value.name),1),p("p",ee,m(a.value.email),1),u(s(A),{color:(e=a.value.role,{admin:"danger",manager:"warning",field_user:"primary",tecnico:"primary",coordenador:"secondary",supervisor:"tertiary"}[e]||"medium")},{default:d(()=>[c(m(Re(a.value.role)),1)]),_:1},8,["color"])])]),a.value.unit?(n(),f("div",ae,[u(s(q),{icon:s(X)},null,8,["icon"]),p("span",null,m(a.value.unit.name),1)])):v("",!0)];var e}),_:1})]),_:1}),u(s(V),{class:"form-card"},{default:d(()=>[u(s(U),null,{default:d(()=>[u(s(R),null,{default:d(()=>[...l[10]||(l[10]=[c("Informações Básicas",-1)])]),_:1})]),_:1}),u(s(E),null,{default:d(()=>[p("form",{onSubmit:b(qe,["prevent"])},[p("div",oe,[l[11]||(l[11]=p("label",null,"Nome Completo",-1)),u(s(M),{modelValue:ye.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>ye.value.name=e),type:"text",placeholder:"Digite seu nome",disabled:W.value,required:""},null,8,["modelValue","disabled"])]),p("div",le,[l[12]||(l[12]=p("label",null,"E-mail",-1)),u(s(M),{modelValue:ye.value.email,"onUpdate:modelValue":l[1]||(l[1]=e=>ye.value.email=e),type:"email",placeholder:"Digite seu e-mail",disabled:W.value,required:""},null,8,["modelValue","disabled"])]),p("div",te,[u(s(N),{expand:"block",type:"submit",disabled:W.value||!je.value},{default:d(()=>[u(s(q),{slot:"start",icon:s(B)},null,8,["icon"]),c(" "+m(W.value?"Salvando...":"Salvar Alterações"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}),u(s(V),{class:"form-card"},{default:d(()=>[u(s(U),null,{default:d(()=>[u(s(R),null,{default:d(()=>[...l[13]||(l[13]=[c("Alterar Senha",-1)])]),_:1})]),_:1}),u(s(E),null,{default:d(()=>[p("form",{onSubmit:b(Ae,["prevent"])},[p("div",re,[l[14]||(l[14]=p("label",null,"Senha Atual",-1)),p("div",ie,[u(s(M),{modelValue:ke.value.current_password,"onUpdate:modelValue":l[2]||(l[2]=e=>ke.value.current_password=e),type:ze.value?"text":"password",placeholder:"Digite sua senha atual",disabled:_e.value,required:""},null,8,["modelValue","type","disabled"]),u(s(N),{fill:"clear",onClick:l[3]||(l[3]=e=>ze.value=!ze.value),class:"password-toggle"},{default:d(()=>[u(s(q),{icon:ze.value?s(H):s(I)},null,8,["icon"])]),_:1})])]),p("div",ne,[l[15]||(l[15]=p("label",null,"Nova Senha",-1)),p("div",de,[u(s(M),{modelValue:ke.value.new_password,"onUpdate:modelValue":l[4]||(l[4]=e=>ke.value.new_password=e),type:Ce.value?"text":"password",placeholder:"Digite a nova senha",disabled:_e.value,required:""},null,8,["modelValue","type","disabled"]),u(s(N),{fill:"clear",onClick:l[5]||(l[5]=e=>Ce.value=!Ce.value),class:"password-toggle"},{default:d(()=>[u(s(q),{icon:Ce.value?s(H):s(I)},null,8,["icon"])]),_:1})]),l[16]||(l[16]=p("div",{class:"password-hint"}," Mínimo de 8 caracteres ",-1))]),p("div",se,[l[17]||(l[17]=p("label",null,"Confirmar Nova Senha",-1)),p("div",ue,[u(s(M),{modelValue:ke.value.new_password_confirmation,"onUpdate:modelValue":l[6]||(l[6]=e=>ke.value.new_password_confirmation=e),type:Se.value?"text":"password",placeholder:"Confirme a nova senha",disabled:_e.value,required:""},null,8,["modelValue","type","disabled"]),u(s(N),{fill:"clear",onClick:l[7]||(l[7]=e=>Se.value=!Se.value),class:"password-toggle"},{default:d(()=>[u(s(q),{icon:Se.value?s(H):s(I)},null,8,["icon"])]),_:1})])]),p("div",ce,[u(s(N),{expand:"block",type:"submit",color:"warning",disabled:_e.value||!Ve.value},{default:d(()=>[u(s(q),{slot:"start",icon:s(J)},null,8,["icon"]),c(" "+m(_e.value?"Alterando...":"Alterar Senha"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}),u(s(V),{class:"info-card"},{default:d(()=>[u(s(U),null,{default:d(()=>[u(s(R),null,{default:d(()=>[...l[18]||(l[18]=[c("Informações da Conta",-1)])]),_:1})]),_:1}),u(s(E),null,{default:d(()=>[p("div",pe,[p("div",fe,[u(s(q),{icon:s(L)},null,8,["icon"]),l[19]||(l[19]=p("span",null,"Tipo de Conta",-1))]),p("div",ve,m(Re(a.value.role)),1)]),a.value.unit?(n(),f("div",me,[p("div",be,[u(s(q),{icon:s(G)},null,8,["icon"]),l[20]||(l[20]=p("span",null,"Unidade",-1))]),p("div",ge,m(a.value.unit.name),1)])):v("",!0),p("div",we,[p("div",he,[u(s(q),{icon:s(O)},null,8,["icon"]),l[21]||(l[21]=p("span",null,"Membro desde",-1))]),p("div",xe,m(Me(a.value.created_at)),1)])]),_:1})]),_:1})])):v("",!0)])]),_:1})]),_:1}))}}),[["__scopeId","data-v-7b1db914"]]))}}});
