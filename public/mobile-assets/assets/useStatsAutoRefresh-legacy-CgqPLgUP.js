System.register(["./main-legacy-BtagstW0.js","./vendor-legacy-X-yEH-Kx.js"],function(e,t){"use strict";var a,s,o,n;return{setters:[e=>{a=e.a},e=>{s=e.r,o=e.b,n=e.o}],execute:function(){e("u",function(e,t={}){const{loadOnMount:l=!0,interval:c=15e3,onStatsUpdated:r,debug:i=!1}=t,u=s(!1),h=s(null),f=s(0),d=async()=>{if(u.value)i&&console.log("[StatsAutoRefresh] Já está atualizando, ignorando...");else try{u.value=!0,i&&console.log("[StatsAutoRefresh] Atualizando stats..."),await e(),h.value=new Date,f.value++,i&&console.log("[StatsAutoRefresh] Stats atualizados com sucesso",{time:h.value.toLocaleTimeString(),count:f.value}),r&&r()}catch(t){console.error("[StatsAutoRefresh] Erro ao atualizar stats:",t)}finally{u.value=!1}},{hasUpdates:g,latestData:v,checkNow:S,invalidateServerCache:R}=a({interval:c,onUpdate:e=>{i&&console.log("[StatsAutoRefresh] Data sync detectou atualizações:",{safety_checklists:e.safety_checklists?.length||0,cleaning_controls:e.cleaning_controls?.length||0,chemical_disinfections:e.chemical_disinfections?.length||0}),d()}});return o(g,e=>{e&&i&&console.log("[StatsAutoRefresh] Novas atualizações detectadas, recarregando stats...")}),n(async()=>{l&&(i&&console.log("[StatsAutoRefresh] Componente montado, carregando stats iniciais..."),await d())}),{isRefreshing:u,hasUpdates:g,latestData:v,lastRefreshTime:h,refreshCount:f,refreshStats:d,forceRefresh:async()=>{i&&console.log("[StatsAutoRefresh] Refresh forçado solicitado"),await R(),await S(),await d()},checkNow:S,invalidateServerCache:R}})}}});
