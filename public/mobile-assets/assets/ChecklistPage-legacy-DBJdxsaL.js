System.register(["./vendor-legacy-B8oEYziD.js","./ionic-legacy-But9DPYG.js","./_plugin-vue_export-helper-legacy-C1HXhe8x.js","./main-legacy-DzrpluBc.js"],function(e,a){"use strict";var t,i,o,n,l,s,r,c,d,u,p,m,v,f,g,_,h,y,b,k,w,x,C,V,z,S,I,P,q,D,E,A,j,T,M,B,R,F,O,H,L,N,U,J,$,G,K,W,Q,X,Y,Z,ee,ae,te,ie,oe,ne,le,se,re,ce,de;return{setters:[e=>{t=e.d,i=e.r,o=e.c,n=e.o,l=e.e,s=e.z,r=e.n,c=e.v,d=e.x,u=e.t,p=e.B,m=e.q,v=e.D,f=e.l,g=e.E,_=e.G,h=e.F,y=e.A,b=e.H},e=>{k=e.e,w=e.n,x=e.p,C=e.z,V=e.o,z=e.q,S=e.u,I=e.v,P=e.g,q=e.A,D=e.B,E=e.h,A=e.i,j=e.j,T=e.k,M=e.w,B=e.C,R=e.D,F=e.E,O=e.F,H=e.G,L=e.H,N=e.m,U=e.J,J=e.t,$=e.K},e=>{G=e.g,K=e.t,W=e.h,Q=e.i,X=e.j,Y=e.k,Z=e.n,ee=e.o,ae=e.q,te=e.r,ie=e.u,oe=e.v,ne=e.x,le=e.y,se=e.z,re=e._},e=>{ce=e.C,de=e.A}],execute:function(){var a=document.createElement("style");a.textContent=".checklist-container[data-v-1e539e09]{padding:1rem;max-width:100%}.time-header-card[data-v-1e539e09]{background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-secondary) 100%);color:#fff;margin-bottom:1rem}.time-display[data-v-1e539e09]{display:flex;justify-content:space-between;align-items:center}.current-date[data-v-1e539e09],.current-time[data-v-1e539e09]{display:flex;align-items:center;gap:.5rem;font-weight:600}.date-icon[data-v-1e539e09],.time-icon[data-v-1e539e09]{font-size:1.2rem}.patient-search-card[data-v-1e539e09],.machine-selection-card[data-v-1e539e09],.checklist-phase-card[data-v-1e539e09],.phase-progress-card[data-v-1e539e09],.patient-summary-card[data-v-1e539e09],.interrupted-card[data-v-1e539e09],.completed-card[data-v-1e539e09]{margin-bottom:1rem;border-radius:12px;box-shadow:0 2px 12px rgba(0,0,0,.1)}.patient-input[data-v-1e539e09]{--border-radius: 12px;--border-width: 2px;--highlight-color-focused: var(--ion-color-primary);--highlight-color-invalid: var(--ion-color-danger);margin-bottom:16px;transition:all .3s ease}.patient-input ion-label[data-v-1e539e09]{--color: var(--ion-color-medium);font-weight:500;margin-bottom:4px}.mobile-button[data-v-1e539e09]{--border-radius: 12px;--padding: 16px;margin:8px 0;height:52px;font-weight:600;--transition: all .2s ease}.primary-button[data-v-1e539e09]{--background: var(--ion-color-primary);--color: white;font-size:1.1rem}.patient-found[data-v-1e539e09]{margin-top:1rem;padding:1rem;background:var(--ion-color-success-tint);border-radius:12px;border:2px solid var(--ion-color-success)}.patient-info h4[data-v-1e539e09]{margin:.5rem 0 .25rem;color:var(--ion-color-dark);font-weight:600}.patient-info p[data-v-1e539e09]{margin:.25rem 0;color:var(--ion-color-medium);font-size:.875rem}.phase-header[data-v-1e539e09]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.phase-header h3[data-v-1e539e09]{margin:0;font-size:1.3rem;font-weight:700}.progress-steps[data-v-1e539e09]{display:flex;justify-content:space-between;margin:1rem 0}.step[data-v-1e539e09]{display:flex;flex-direction:column;align-items:center;gap:.5rem;flex:1}.step-circle[data-v-1e539e09]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--ion-color-light);color:var(--ion-color-medium);font-weight:700;transition:all .3s ease}.step.active .step-circle[data-v-1e539e09]{background:var(--ion-color-primary);color:#fff}.step.completed .step-circle[data-v-1e539e09]{background:var(--ion-color-success);color:#fff}.step.interrupted .step-circle[data-v-1e539e09]{background:var(--ion-color-danger);color:#fff}.step-label[data-v-1e539e09]{font-size:.75rem;text-align:center;font-weight:500;color:var(--ion-color-medium)}.step.active .step-label[data-v-1e539e09]{color:var(--ion-color-primary);font-weight:600}.phase-completion[data-v-1e539e09]{margin-top:1rem}.phase-completion p[data-v-1e539e09]{text-align:center;margin-top:.5rem;font-weight:600;color:var(--ion-color-dark)}.patient-summary[data-v-1e539e09]{display:flex;justify-content:space-between;align-items:center}.patient-details h4[data-v-1e539e09]{margin:0;font-weight:600}.patient-details p[data-v-1e539e09]{margin:.25rem 0 0;color:var(--ion-color-medium);font-size:.875rem}.session-time p[data-v-1e539e09]{margin:0;font-size:.875rem;color:var(--ion-color-primary);font-weight:500}.checklist-items[data-v-1e539e09]{margin-bottom:1.5rem}.checklist-item[data-v-1e539e09]{--border-color: var(--ion-color-light);--padding: 16px 0;margin-bottom:12px;border-radius:8px;transition:all .3s ease}.checklist-item.completed[data-v-1e539e09]{--background: var(--ion-color-success-tint);--border-color: var(--ion-color-success)}.checklist-label h3[data-v-1e539e09]{margin:0;font-size:1rem;font-weight:600;color:var(--ion-color-dark)}.checklist-label p[data-v-1e539e09]{margin:.25rem 0 0;font-size:.875rem;color:var(--ion-color-medium)}.completed-icon[data-v-1e539e09]{font-size:1.5rem}.action-buttons[data-v-1e539e09]{display:flex;flex-direction:column;gap:12px;margin-top:1.5rem}.interrupt-button[data-v-1e539e09]{--border-color: var(--ion-color-danger);--color: var(--ion-color-danger)}.advance-button[data-v-1e539e09]{font-size:1.1rem;font-weight:700}.interrupted-content[data-v-1e539e09],.completed-content[data-v-1e539e09]{text-align:center;padding:2rem 1rem}.interrupted-icon[data-v-1e539e09],.completed-icon[data-v-1e539e09]{font-size:4rem;margin-bottom:1rem;color:var(--ion-color-danger)}.completed-icon[data-v-1e539e09]{color:var(--ion-color-success)}.interrupted-content h3[data-v-1e539e09],.completed-content h3[data-v-1e539e09]{margin:0 0 1rem;font-size:1.5rem;font-weight:700}.interruption-reason[data-v-1e539e09]{padding:1rem;background:var(--ion-color-light);border-radius:8px;margin:1rem 0;text-align:left}.interrupt-modal-content[data-v-1e539e09]{padding:1rem}.warning-section[data-v-1e539e09]{text-align:center;padding:1rem;margin-bottom:1.5rem;background:var(--ion-color-warning-tint);border-radius:12px;border:2px solid var(--ion-color-warning)}.warning-icon[data-v-1e539e09]{font-size:3rem;color:var(--ion-color-warning);margin-bottom:.5rem}.warning-section h3[data-v-1e539e09]{margin:0 0 .5rem;color:var(--ion-color-warning-shade)}.modal-buttons[data-v-1e539e09]{display:flex;flex-direction:column;gap:12px;margin-top:1.5rem}.form-group[data-v-1e539e09]{margin-bottom:1rem}.return-button[data-v-1e539e09]{margin-top:1rem;font-size:1.1rem;font-weight:600}\n",document.head.appendChild(a);const ue={class:"checklist-container"},pe={class:"time-display"},me={class:"current-date"},ve={class:"current-time"},fe={class:"form-group"},ge={class:"form-group"},_e={key:0,class:"patient-found"},he={class:"patient-info"},ye={key:0},be={class:"form-group"},ke={class:"form-group"},we={key:2},xe={class:"phase-header"},Ce={class:"phase-time"},Ve={class:"phase-progress"},ze={class:"progress-steps"},Se={class:"step-circle"},Ie={key:2},Pe={class:"step-label"},qe={class:"phase-completion"},De={class:"patient-summary"},Ee={class:"patient-details"},Ae={class:"session-time"},je={class:"checklist-items"},Te={class:"form-group"},Me={class:"action-buttons"},Be={class:"interrupted-content"},Re={class:"interruption-reason"},Fe={class:"completed-content"},Oe={class:"interrupt-modal-content"},He={class:"warning-section"},Le={class:"form-group"},Ne={class:"modal-buttons"};e("default",re(t({__name:"ChecklistPage",setup(e){const a=y(),t=ce.getInstance(),re=t.getSearchPatientUseCase(),Ue=t.getMachineRepository(),Je=i(""),$e=i(""),Ge=i(!1),Ke=i(""),We=i(0),Qe=i({full_name:"",birth_date:""}),Xe=i(null),Ye=i(null),Ze=i([]),ea=i(null),aa=i({machine_id:0,shift:"matutino",observations:"",machine_disinfected:!1,capillary_lines_identified:!1,patient_identification_confirmed:!1,vascular_access_evaluated:!1,vital_signs_checked:!1,medications_reviewed:!1,dialyzer_membrane_checked:!1,equipment_functioning_verified:!1,dialysis_parameters_verified:!1,patient_comfort_assessed:!1,fluid_balance_monitored:!1,alarms_responded:!1,session_completed_safely:!1,vascular_access_secured:!1,patient_vital_signs_stable:!1,equipment_cleaned:!1}),ta=["pre_dialysis","during_session","post_dialysis"];let ia;const oa=o(()=>Qe.value.full_name.length>0&&Qe.value.birth_date.length>0),na=o(()=>Xe.value&&aa.value.machine_id&&aa.value.shift),la=o(()=>!!ea.value&&pa().every(e=>xa(e.key))),sa=e=>({pre_dialysis:"Pré-Diálise",during_session:"Durante a Sessão",post_dialysis:"Pós-Diálise",completed:"Concluído",interrupted:"Interrompido"}[e]||e),ra=e=>({pre_dialysis:"Pré",during_session:"Durante",post_dialysis:"Pós"}[e]||e),ca=e=>({pre_dialysis:"Preparando",during_session:"Em Andamento",post_dialysis:"Finalizando",completed:"Concluído",interrupted:"Interrompido"}[e]||e),da=e=>({pre_dialysis:"1",during_session:"2",post_dialysis:"3"}[e]||""),ua=e=>{if(!ea.value)return!1;switch(e){case"pre_dialysis":return null!==ea.value.pre_dialysis_completed_at;case"during_session":return null!==ea.value.during_session_completed_at;case"post_dialysis":return null!==ea.value.post_dialysis_completed_at;default:return!1}},pa=()=>({pre_dialysis:[{key:"machine_disinfected",label:"Máquina Desinfetada",description:"Verificar se a máquina foi devidamente desinfetada"},{key:"capillary_lines_identified",label:"Linhas Capilares Identificadas",description:"Identificar e verificar as linhas capilares"},{key:"patient_identification_confirmed",label:"Identificação do Paciente",description:"Confirmar identidade com dois identificadores"},{key:"vascular_access_evaluated",label:"Acesso Vascular Avaliado",description:"Avaliar condições do acesso vascular"},{key:"vital_signs_checked",label:"Sinais Vitais Verificados",description:"Aferir pressão arterial, temperatura e peso"},{key:"medications_reviewed",label:"Medicações Revisadas",description:"Revisar medicações e dosagens prescritas"},{key:"dialyzer_membrane_checked",label:"Membrana do Dialisador Verificada",description:"Verificar integridade da membrana"},{key:"equipment_functioning_verified",label:"Funcionamento dos Equipamentos",description:"Testar funcionamento de todos os equipamentos"}],during_session:[{key:"dialysis_parameters_verified",label:"Parâmetros de Diálise Verificados",description:"Confirmar e ajustar parâmetros de diálise"},{key:"patient_comfort_assessed",label:"Conforto do Paciente Avaliado",description:"Verificar conforto e bem-estar do paciente"},{key:"fluid_balance_monitored",label:"Balanço Hídrico Monitorado",description:"Acompanhar remoção e balanço de fluidos"},{key:"alarms_responded",label:"Resposta a Alarmes",description:"Verificar e responder adequadamente aos alarmes"}],post_dialysis:[{key:"session_completed_safely",label:"Sessão Finalizada com Segurança",description:"Finalizar sessão seguindo protocolos de segurança"},{key:"vascular_access_secured",label:"Acesso Vascular Protegido",description:"Proteger e cuidar do acesso vascular"},{key:"patient_vital_signs_stable",label:"Sinais Vitais Estáveis",description:"Confirmar estabilidade dos sinais vitais"},{key:"equipment_cleaned",label:"Equipamentos Limpos",description:"Limpar e preparar equipamentos para próximo uso"}]}[ea.value?.current_phase]||[]),ma=()=>{if(!la.value)return"Complete todos os itens para continuar";switch(ea.value?.current_phase){case"pre_dialysis":return"Iniciar Sessão de Diálise";case"during_session":return"Finalizar Sessão";case"post_dialysis":return"Concluir Checklist";default:return"Continuar"}},va=()=>{const e=new Date;Je.value=e.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),$e.value=e.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},fa=async()=>{const e=await U.create({message:"Buscando paciente...",spinner:"crescent"});await e.present();try{const e=await re.execute(Qe.value);if(e){Xe.value=e;const a=await J.create({message:e.created?"Paciente cadastrado e selecionado!":"Paciente encontrado!",duration:2e3,color:"success",position:"top"});await a.present()}else{const e=await J.create({message:"Erro ao buscar/cadastrar paciente.",duration:3e3,color:"warning",position:"top"});await e.present()}}catch(a){const e=await J.create({message:a.message||"Erro ao buscar paciente",duration:3e3,color:"danger",position:"top"});await e.present()}finally{await e.dismiss()}},ga=async()=>{const e=await U.create({message:"Iniciando checklist...",spinner:"crescent"});await e.present();try{const e=await fetch("/api/checklists",{method:"POST",headers:de.getAuthHeaders(),body:JSON.stringify({patient_id:Xe.value?.id,machine_id:aa.value.machine_id,shift:aa.value.shift,observations:aa.value.observations})}),a=await e.json();if(!a.success)throw new Error(a.message||"Erro ao iniciar checklist");{ea.value=a.checklist,Ye.value=Ze.value.find(e=>e.id===aa.value.machine_id)||null,ka();const e=await J.create({message:"Checklist iniciado com sucesso!",duration:2e3,color:"success",position:"top"});await e.present()}}catch(a){const e=await J.create({message:a.message||"Erro ao iniciar checklist",duration:3e3,color:"danger",position:"top"});await e.present()}finally{await e.dismiss()}},_a=async()=>{if(!la.value)return;const e=await U.create({message:"Avançando para próxima fase...",spinner:"crescent"});await e.present();try{await ha();const e=await fetch(`/api/checklists/${ea.value.id}/advance`,{method:"POST",headers:{"Content-Type":"application/json",...de.getAuthHeaders()}}),a=await e.json();if(!a.success)throw new Error(a.message||"Erro ao avançar fase");{ea.value=a.checklist,ka();const e=await J.create({message:a.message,duration:2e3,color:"success",position:"top"});await e.present()}}catch(a){const e=await J.create({message:a.message||"Erro ao avançar fase",duration:3e3,color:"danger",position:"top"});await e.present()}finally{await e.dismiss()}},ha=async()=>{if(!ea.value)return;const e={};pa().forEach(a=>{e[a.key]=xa(a.key)});const a=await fetch(`/api/checklists/${ea.value.id}/phase`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({phase_data:e,observations:aa.value.observations})}),t=await a.json();t.success&&(We.value=t.phase_completion)},ya=async()=>{const e=await U.create({message:"Interrompendo checklist...",spinner:"crescent"});await e.present();try{const e=await fetch(`/api/checklists/${ea.value.id}/interrupt`,{method:"POST",headers:de.getAuthHeaders(),body:JSON.stringify({reason:Ke.value})}),a=await e.json();if(!a.success)throw new Error(a.message||"Erro ao interromper checklist");{ea.value=a.checklist,Ge.value=!1;const e=await J.create({message:"Checklist interrompido com sucesso.",duration:3e3,color:"warning",position:"top"});await e.present()}}catch(a){const e=await J.create({message:a.message||"Erro ao interromper checklist",duration:3e3,color:"danger",position:"top"});await e.present()}finally{await e.dismiss()}},ba=()=>{a.replace("/dashboard")},ka=()=>{const e=pa(),a=e.filter(e=>xa(e.key)).length;We.value=e.length>0?a/e.length*100:0},wa=e=>new Date(e).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),xa=e=>aa.value[e]||!1;return n(()=>{(async()=>{try{Ze.value=await Ue.getAvailable()}catch(e){console.error("Error loading machines:",e)}})(),va(),ia=setInterval(va,1e3)}),l(()=>{ia&&clearInterval(ia)}),(e,a)=>(r(),s(d(k),null,{default:c(()=>[u(d(z),{translucent:!0},{default:c(()=>[u(d(w),null,{default:c(()=>[u(d(x),{slot:"start"},{default:c(()=>[u(d(C),{"default-href":"/dashboard"})]),_:1}),u(d(V),null,{default:c(()=>[...a[10]||(a[10]=[p("Checklist de Segurança",-1)])]),_:1})]),_:1})]),_:1}),u(d(N),{fullscreen:!0},{default:c(()=>[m("div",ue,[u(d(S),{class:"time-header-card"},{default:c(()=>[u(d(I),null,{default:c(()=>[m("div",pe,[m("div",me,[u(d(P),{icon:d(G),class:"date-icon"},null,8,["icon"]),p(" "+g($e.value),1)]),m("div",ve,[u(d(P),{icon:d(K),class:"time-icon"},null,8,["icon"]),p(" "+g(Je.value),1)])])]),_:1})]),_:1}),ea.value?v("",!0):(r(),s(d(S),{key:0,class:"patient-search-card"},{default:c(()=>[u(d(q),null,{default:c(()=>[u(d(D),null,{default:c(()=>[u(d(P),{icon:d(W)},null,8,["icon"]),a[11]||(a[11]=p(" 1. Buscar/Cadastrar Paciente ",-1))]),_:1})]),_:1}),u(d(I),null,{default:c(()=>{return[m("div",fe,[u(d(E),{fill:"outline",class:"patient-input"},{default:c(()=>[u(d(A),{position:"floating"},{default:c(()=>[...a[12]||(a[12]=[p("Nome Completo",-1)])]),_:1}),u(d(j),{modelValue:Qe.value.full_name,"onUpdate:modelValue":a[0]||(a[0]=e=>Qe.value.full_name=e),type:"text",placeholder:"Digite o nome completo do paciente",required:""},null,8,["modelValue"])]),_:1})]),m("div",ge,[u(d(E),{fill:"outline",class:"patient-input"},{default:c(()=>[u(d(A),{position:"floating"},{default:c(()=>[...a[13]||(a[13]=[p("Data de Nascimento",-1)])]),_:1}),u(d(j),{modelValue:Qe.value.birth_date,"onUpdate:modelValue":a[1]||(a[1]=e=>Qe.value.birth_date=e),type:"date",required:""},null,8,["modelValue"])]),_:1})]),u(d(T),{expand:"block",class:"mobile-button",onClick:fa,disabled:!oa.value},{default:c(()=>[u(d(P),{icon:d(Q),slot:"start"},null,8,["icon"]),a[14]||(a[14]=p(" Buscar Paciente ",-1))]),_:1},8,["disabled"]),Xe.value?(r(),f("div",_e,[u(d(M),{color:"success"},{default:c(()=>[u(d(P),{icon:d(X)},null,8,["icon"]),u(d(A),null,{default:c(()=>[...a[15]||(a[15]=[p("Paciente Selecionado",-1)])]),_:1})]),_:1}),m("div",he,[m("h4",null,g(Xe.value.full_name),1),m("p",null,"Nascimento: "+g((e=Xe.value.birth_date,new Date(e).toLocaleDateString("pt-BR"))),1),m("p",null,"Idade: "+g(Xe.value.age)+" anos",1),Xe.value.medical_record?(r(),f("p",ye,"Prontuário: "+g(Xe.value.medical_record),1)):v("",!0)])])):v("",!0)];var e}),_:1})]),_:1})),Xe.value&&!ea.value?(r(),s(d(S),{key:1,class:"machine-selection-card"},{default:c(()=>[u(d(q),null,{default:c(()=>[u(d(D),null,{default:c(()=>[u(d(P),{icon:d(Y)},null,8,["icon"]),a[16]||(a[16]=p(" 2. Selecionar Máquina e Turno ",-1))]),_:1})]),_:1}),u(d(I),null,{default:c(()=>[m("div",be,[u(d(E),{fill:"outline",class:"patient-input"},{default:c(()=>[u(d(A),{position:"floating"},{default:c(()=>[...a[17]||(a[17]=[p("Máquina",-1)])]),_:1}),u(d(B),{modelValue:aa.value.machine_id,"onUpdate:modelValue":a[2]||(a[2]=e=>aa.value.machine_id=e),placeholder:"Selecione uma máquina"},{default:c(()=>[(r(!0),f(h,null,_(Ze.value,e=>(r(),s(d(R),{key:e.id,value:e.id},{default:c(()=>[p(g(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),m("div",ke,[u(d(E),{fill:"outline",class:"patient-input"},{default:c(()=>[u(d(A),{position:"floating"},{default:c(()=>[...a[18]||(a[18]=[p("Turno",-1)])]),_:1}),u(d(B),{modelValue:aa.value.shift,"onUpdate:modelValue":a[3]||(a[3]=e=>aa.value.shift=e),placeholder:"Selecione o turno"},{default:c(()=>[u(d(R),{value:"matutino"},{default:c(()=>[...a[19]||(a[19]=[p("Matutino",-1)])]),_:1}),u(d(R),{value:"vespertino"},{default:c(()=>[...a[20]||(a[20]=[p("Vespertino",-1)])]),_:1}),u(d(R),{value:"noturno"},{default:c(()=>[...a[21]||(a[21]=[p("Noturno",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),u(d(T),{expand:"block",class:"mobile-button primary-button",onClick:ga,disabled:!na.value},{default:c(()=>[u(d(P),{icon:d(Z),slot:"start"},null,8,["icon"]),a[22]||(a[22]=p(" Iniciar Checklist de Segurança ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})):v("",!0),ea.value?(r(),f("div",we,[u(d(S),{class:"phase-progress-card"},{default:c(()=>[u(d(I),null,{default:c(()=>{return[m("div",xe,[m("h3",null,g(sa(ea.value.current_phase)),1),m("div",Ce,[u(d(M),{color:(e=ea.value.current_phase,{pre_dialysis:"warning",during_session:"primary",post_dialysis:"secondary",completed:"success",interrupted:"danger"}[e]||"medium")},{default:c(()=>[u(d(P),{icon:(ea.value.current_phase,X)},null,8,["icon"]),u(d(A),null,{default:c(()=>[p(g(ca(ea.value.current_phase)),1)]),_:1})]),_:1},8,["color"])])]),m("div",Ve,[m("div",ze,[(r(),f(h,null,_(ta,e=>m("div",{class:b(["step",{active:e===ea.value.current_phase,completed:ua(e),interrupted:ea.value.is_interrupted}]),key:e},[m("div",Se,[ua(e)?(r(),s(d(P),{key:0,icon:d(ne)},null,8,["icon"])):ea.value.is_interrupted?(r(),s(d(P),{key:1,icon:d(le)},null,8,["icon"])):(r(),f("span",Ie,g(da(e)),1))]),m("span",Pe,g(ra(e)),1)],2)),64))])]),m("div",qe,[u(d(F),{value:We.value/100,color:100===We.value?"success":"primary"},null,8,["value","color"]),m("p",null,g(Math.round(We.value))+"% concluído",1)])];var e}),_:1})]),_:1}),u(d(S),{class:"patient-summary-card"},{default:c(()=>[u(d(I),null,{default:c(()=>[m("div",De,[m("div",Ee,[m("h4",null,g(Xe.value.full_name),1),m("p",null,g(Ye.value?.name)+" • Turno "+g(ea.value.shift),1)]),m("div",Ae,[m("p",null,"Iniciado às "+g(wa(ea.value.pre_dialysis_started_at)),1)])])]),_:1})]),_:1}),ea.value.is_interrupted?v("",!0):(r(),s(d(S),{key:0,class:"checklist-phase-card"},{default:c(()=>[u(d(q),null,{default:c(()=>[u(d(D),null,{default:c(()=>[p(g(sa(ea.value.current_phase)),1)]),_:1}),u(d(O),null,{default:c(()=>{return[p(g((e=ea.value.current_phase,{pre_dialysis:"Verificações de segurança antes de iniciar a sessão de diálise",during_session:"Monitoramento contínuo durante o procedimento",post_dialysis:"Finalização segura da sessão e limpeza dos equipamentos"}[e]||"")),1)];var e}),_:1})]),_:1}),u(d(I),null,{default:c(()=>[m("div",je,[(r(!0),f(h,null,_(pa(),e=>(r(),s(d(E),{key:e.key,class:b(["checklist-item",{completed:xa(e.key)}])},{default:c(()=>[u(d($),{slot:"start",checked:xa(e.key),onIonChange:a=>{return t=e.key,i=a.detail.checked,aa.value[t]=i,ka(),void(ea.value&&ha());var t,i}},null,8,["checked","onIonChange"]),u(d(A),{class:"checklist-label"},{default:c(()=>[m("h3",null,g(e.label),1),m("p",null,g(e.description),1)]),_:2},1024),xa(e.key)?(r(),s(d(P),{key:0,icon:d(X),slot:"end",color:"success",class:"completed-icon"},null,8,["icon"])):v("",!0)]),_:2},1032,["class"]))),128))]),m("div",Te,[u(d(E),{fill:"outline",class:"patient-input"},{default:c(()=>[u(d(A),{position:"floating"},{default:c(()=>[...a[23]||(a[23]=[p("Observações (opcional)",-1)])]),_:1}),u(d(H),{modelValue:aa.value.observations,"onUpdate:modelValue":a[4]||(a[4]=e=>aa.value.observations=e),rows:"3",placeholder:"Digite observações sobre esta fase..."},null,8,["modelValue"])]),_:1})]),m("div",Me,[u(d(T),{expand:"block",color:"danger",fill:"outline",onClick:a[5]||(a[5]=e=>Ge.value=!0),class:"interrupt-button"},{default:c(()=>[u(d(P),{icon:d(ee),slot:"start"},null,8,["icon"]),a[24]||(a[24]=p(" Interromper Checklist ",-1))]),_:1}),u(d(T),{expand:"block",color:la.value?"success":"medium",disabled:!la.value,onClick:_a,class:"advance-button"},{default:c(()=>[u(d(P),{icon:la.value?d(ae):d(te),slot:"start"},null,8,["icon"]),p(" "+g(ma()),1)]),_:1},8,["color","disabled"])])]),_:1})]),_:1})),ea.value.is_interrupted?(r(),s(d(S),{key:1,class:"interrupted-card"},{default:c(()=>[u(d(I),null,{default:c(()=>[m("div",Be,[u(d(P),{icon:d(ie),class:"interrupted-icon"},null,8,["icon"]),a[27]||(a[27]=m("h3",null,"Checklist Interrompido",-1)),m("p",null,"O checklist foi interrompido em "+g(wa(ea.value.interrupted_at)),1),m("p",Re,[a[25]||(a[25]=m("strong",null,"Motivo:",-1)),p(" "+g(ea.value.interruption_reason),1)]),u(d(T),{expand:"block",color:"primary",onClick:ba,class:"return-button"},{default:c(()=>[u(d(P),{icon:d(oe),slot:"start"},null,8,["icon"]),a[26]||(a[26]=p(" Retornar ao Dashboard ",-1))]),_:1})])]),_:1})]),_:1})):v("",!0),"completed"===ea.value.current_phase?(r(),s(d(S),{key:2,class:"completed-card"},{default:c(()=>[u(d(I),null,{default:c(()=>[m("div",Fe,[u(d(P),{icon:d(X),class:"completed-icon"},null,8,["icon"]),a[29]||(a[29]=m("h3",null,"Checklist Concluído com Sucesso!",-1)),m("p",null,"Todas as fases foram completadas em "+g(wa(ea.value.post_dialysis_completed_at)),1),u(d(T),{expand:"block",color:"success",onClick:ba,class:"return-button"},{default:c(()=>[u(d(P),{icon:d(ne),slot:"start"},null,8,["icon"]),a[28]||(a[28]=p(" Finalizar e Retornar ",-1))]),_:1})])]),_:1})]),_:1})):v("",!0)])):v("",!0)]),u(d(L),{"is-open":Ge.value,onWillDismiss:a[9]||(a[9]=e=>Ge.value=!1)},{default:c(()=>[u(d(z),null,{default:c(()=>[u(d(w),null,{default:c(()=>[u(d(V),null,{default:c(()=>[...a[30]||(a[30]=[p("Interromper Checklist",-1)])]),_:1}),u(d(x),{slot:"end"},{default:c(()=>[u(d(T),{onClick:a[6]||(a[6]=e=>Ge.value=!1)},{default:c(()=>[u(d(P),{icon:d(le)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),u(d(N),null,{default:c(()=>[m("div",Oe,[m("div",He,[u(d(P),{icon:d(se),class:"warning-icon"},null,8,["icon"]),a[31]||(a[31]=m("h3",null,"Atenção!",-1)),a[32]||(a[32]=m("p",null,"Você está prestes a interromper o checklist de segurança. Esta ação deve ser usada apenas em casos de emergência ou intercorrências médicas.",-1))]),m("div",Le,[u(d(E),{fill:"outline",class:"patient-input"},{default:c(()=>[u(d(A),{position:"floating"},{default:c(()=>[...a[33]||(a[33]=[p("Motivo da Interrupção",-1)])]),_:1}),u(d(H),{modelValue:Ke.value,"onUpdate:modelValue":a[7]||(a[7]=e=>Ke.value=e),rows:"4",placeholder:"Descreva o motivo da interrupção (obrigatório)",required:""},null,8,["modelValue"])]),_:1})]),m("div",Ne,[u(d(T),{expand:"block",fill:"outline",color:"medium",onClick:a[8]||(a[8]=e=>Ge.value=!1)},{default:c(()=>[...a[34]||(a[34]=[p(" Cancelar ",-1)])]),_:1}),u(d(T),{expand:"block",color:"danger",disabled:!Ke.value.trim(),onClick:ya},{default:c(()=>[u(d(P),{icon:d(ee),slot:"start"},null,8,["icon"]),a[35]||(a[35]=p(" Confirmar Interrupção ",-1))]),_:1},8,["disabled"])])])]),_:1})]),_:1},8,["is-open"])]),_:1})]),_:1}))}}),[["__scopeId","data-v-1e539e09"]]))}}});
