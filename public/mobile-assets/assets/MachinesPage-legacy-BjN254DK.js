System.register(["./ionic-legacy-Bcx0Tl_t.js","./vendor-legacy-X-yEH-Kx.js","./_plugin-vue_export-helper-legacy-Du2wO1NW.js","./main-legacy-C4wbpyLm.js","./useStatsAutoRefresh-legacy-BBu66xqP.js"],function(a,e){"use strict";var t,i,n,o,r,l,s,d,c,u,f,p,m,v,g,b,h,x,y,w,k,_,z,C,q,E,M,j,D,S,I,V,A,T,N,U,$,B,L,R,P,H,J,F,G,O,Y,K,Q,W,X,Z,aa,ea,ta,ia,na,oa,ra,la,sa,da,ca,ua,fa,pa;return{setters:[a=>{t=a.e,i=a.t,n=a.m,o=a.o,r=a.x,l=a.n,s=a.k,d=a.g,c=a.p,u=a.q,f=a.r,p=a.B,m=a.C,v=a.f,g=a.y,b=a.z,h=a.E,x=a.i,y=a.u,w=a.J,k=a.G,_=a.K,z=a.l,C=a.j,q=a.L,E=a._},a=>{M=a.d,j=a.r,D=a.c,S=a.o,I=a.B,V=a.q,A=a.x,T=a.y,N=a.v,U=a.H,$=a.t,B=a.n,L=a.G,R=a.K,P=a.J,H=a.F,J=a.L,F=a.C,G=a.z},a=>{O=a.x,Y=a.F,K=a.t,Q=a.J,W=a.y,X=a.T,Z=a.U,aa=a.z,ea=a.V,ta=a.N,ia=a.k,na=a.W,oa=a.X,ra=a.Y,la=a.p,sa=a.b,da=a.r,ca=a.Z,ua=a._},a=>{fa=a.C},a=>{pa=a.u}],execute:function(){var ma=document.createElement("style");ma.textContent=".machines-content[data-v-86338f0d]{--background: linear-gradient(180deg, #f8f9fa 0%, #e9ecef 100%)}.machines-container[data-v-86338f0d]{padding-bottom:24px}.time-header-card[data-v-86338f0d]{margin:16px;border-radius:16px;box-shadow:0 2px 12px rgba(0,0,0,.08);background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-primary-shade) 100%)}.time-header-card ion-card-content[data-v-86338f0d]{padding:16px 20px}.time-display[data-v-86338f0d]{display:flex;justify-content:space-between;align-items:center;color:#fff}.current-date[data-v-86338f0d],.current-time[data-v-86338f0d]{display:flex;align-items:center;gap:8px;font-weight:600}.current-date[data-v-86338f0d]{font-size:.9rem;text-transform:capitalize}.current-time[data-v-86338f0d]{font-size:1.3rem}.date-icon[data-v-86338f0d],.time-icon[data-v-86338f0d]{font-size:1.2rem}.filter-pills[data-v-86338f0d]{display:flex;gap:8px;padding:0 16px 16px;overflow-x:auto;-webkit-overflow-scrolling:touch}.filter-pills[data-v-86338f0d]::-webkit-scrollbar{display:none}.filter-pill[data-v-86338f0d]{display:flex;align-items:center;gap:6px;padding:10px 16px;background:#fff;border:2px solid #e5e7eb;border-radius:24px;font-size:.85rem;font-weight:600;color:#6b7280;cursor:pointer;transition:all .2s ease;white-space:nowrap;flex-shrink:0}.filter-pill ion-icon[data-v-86338f0d]{font-size:1.2rem}.pill-count[data-v-86338f0d]{display:inline-flex;align-items:center;justify-content:center;min-width:22px;height:22px;padding:0 6px;background:#f3f4f6;border-radius:11px;font-size:.75rem;font-weight:700}.filter-pill.active[data-v-86338f0d]{border-color:var(--ion-color-primary);background:linear-gradient(135deg,rgba(var(--ion-color-primary-rgb),.1),rgba(var(--ion-color-primary-rgb),.05));color:var(--ion-color-primary)}.filter-pill.active ion-icon[data-v-86338f0d]{color:var(--ion-color-primary)}.filter-pill.active .pill-count[data-v-86338f0d]{background:var(--ion-color-primary);color:#fff}.filter-pill.available.active[data-v-86338f0d]{border-color:#10b981;background:linear-gradient(135deg,rgba(16,185,129,.1),rgba(16,185,129,.05));color:#10b981}.filter-pill.available.active ion-icon[data-v-86338f0d]{color:#10b981}.filter-pill.available.active .pill-count[data-v-86338f0d]{background:#10b981}.filter-pill.occupied.active[data-v-86338f0d]{border-color:#f59e0b;background:linear-gradient(135deg,rgba(245,158,11,.1),rgba(245,158,11,.05));color:#f59e0b}.filter-pill.occupied.active ion-icon[data-v-86338f0d]{color:#f59e0b}.filter-pill.occupied.active .pill-count[data-v-86338f0d]{background:#f59e0b}.filter-pill.maintenance.active[data-v-86338f0d]{border-color:#ef4444;background:linear-gradient(135deg,rgba(239,68,68,.1),rgba(239,68,68,.05));color:#ef4444}.filter-pill.maintenance.active ion-icon[data-v-86338f0d]{color:#ef4444}.filter-pill.maintenance.active .pill-count[data-v-86338f0d]{background:#ef4444}.stats-summary[data-v-86338f0d]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;padding:0 16px 16px}.stat-card[data-v-86338f0d]{display:flex;flex-direction:column;align-items:center;gap:12px;background:#fff;padding:20px 16px;border-radius:16px;box-shadow:0 2px 8px rgba(0,0,0,.08);transition:all .3s ease;border-top:4px solid transparent;text-align:center}.stat-card[data-v-86338f0d]:active{transform:translateY(-4px);box-shadow:0 8px 16px rgba(0,0,0,.15)}.stat-card ion-icon[data-v-86338f0d]{font-size:2.8rem;flex-shrink:0}.stat-card.available[data-v-86338f0d]{border-top-color:#10b981;background:linear-gradient(180deg,rgba(16,185,129,.05),#fff)}.stat-card.available ion-icon[data-v-86338f0d]{color:#10b981}.stat-card.occupied[data-v-86338f0d]{border-top-color:#f59e0b;background:linear-gradient(180deg,rgba(245,158,11,.05),#fff)}.stat-card.occupied ion-icon[data-v-86338f0d]{color:#f59e0b}.stat-card.maintenance[data-v-86338f0d]{border-top-color:#ef4444;background:linear-gradient(180deg,rgba(239,68,68,.05),#fff)}.stat-card.maintenance ion-icon[data-v-86338f0d]{color:#ef4444}.stat-card.inactive[data-v-86338f0d]{border-top-color:#6b7280;background:linear-gradient(180deg,rgba(107,114,128,.05),#fff)}.stat-card.inactive ion-icon[data-v-86338f0d]{color:#6b7280}.stat-info[data-v-86338f0d]{display:flex;flex-direction:column;gap:4px}.stat-card .stat-number[data-v-86338f0d]{font-size:2rem;font-weight:800;color:#1f2937;line-height:1}.stat-card .stat-label[data-v-86338f0d]{font-size:.8rem;color:#6b7280;font-weight:600;line-height:1.2}.stat-card.updating[data-v-86338f0d]{animation:pulse-86338f0d 1.5s ease-in-out infinite}@keyframes pulse-86338f0d{0%,to{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(.98)}}.loading-container[data-v-86338f0d]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:#9ca3af}.loading-container ion-spinner[data-v-86338f0d]{margin-bottom:1rem}.machines-list[data-v-86338f0d]{display:flex;flex-direction:column;gap:12px;padding:0 16px 24px}.machine-card-modern[data-v-86338f0d]{position:relative;background:#fff;border-radius:16px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,.08);transition:all .3s ease;border-left:4px solid #e5e7eb;overflow:hidden}.machine-card-modern[data-v-86338f0d]:active{transform:translateY(-2px);box-shadow:0 8px 16px rgba(0,0,0,.12)}.machine-card-modern.available[data-v-86338f0d]{border-left-color:#10b981}.machine-card-modern.occupied[data-v-86338f0d]{border-left-color:#f59e0b;cursor:pointer}.machine-card-modern.maintenance[data-v-86338f0d]{border-left-color:#ef4444}.machine-card-modern.inactive[data-v-86338f0d]{border-left-color:#6b7280;opacity:.6}.machine-card-header[data-v-86338f0d]{display:flex;align-items:center;gap:16px;margin-bottom:12px}.machine-icon-large[data-v-86338f0d]{width:56px;height:56px;border-radius:14px;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .3s ease}.machine-icon-large ion-icon[data-v-86338f0d]{font-size:2rem;color:#fff}.machine-icon-large.available[data-v-86338f0d]{background:linear-gradient(135deg,#10b981,#059669)}.machine-icon-large.occupied[data-v-86338f0d]{background:linear-gradient(135deg,#f59e0b,#d97706)}.machine-icon-large.maintenance[data-v-86338f0d]{background:linear-gradient(135deg,#ef4444,#dc2626)}.machine-icon-large.inactive[data-v-86338f0d]{background:linear-gradient(135deg,#6b7280,#4b5563)}.machine-primary-info[data-v-86338f0d]{flex:1}.machine-name[data-v-86338f0d]{margin:0 0 4px;font-size:1.15rem;font-weight:700;color:#1f2937}.machine-identifier[data-v-86338f0d]{margin:0;font-size:.8rem;color:#9ca3af;font-family:Courier New,monospace;font-weight:600}.machine-status-badge[data-v-86338f0d]{display:flex;align-items:center;gap:6px;padding:6px 12px;background:#f9fafb;border-radius:20px}.status-dot[data-v-86338f0d]{width:8px;height:8px;border-radius:50%;flex-shrink:0}.status-dot.available[data-v-86338f0d]{background:#10b981;box-shadow:0 0 8px rgba(16,185,129,.6);animation:pulse-86338f0d 2s infinite}.status-dot.occupied[data-v-86338f0d]{background:#f59e0b;box-shadow:0 0 8px rgba(245,158,11,.6)}.status-dot.maintenance[data-v-86338f0d]{background:#ef4444;box-shadow:0 0 8px rgba(239,68,68,.6)}.status-dot.inactive[data-v-86338f0d]{background:#6b7280}@keyframes pulse-86338f0d{0%,to{opacity:1}50%{opacity:.5}}.status-text[data-v-86338f0d]{font-size:.75rem;font-weight:700;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.machine-description[data-v-86338f0d]{font-size:.85rem;color:#6b7280;line-height:1.4;margin-bottom:12px}.session-info-modern[data-v-86338f0d]{background:linear-gradient(135deg,#eff6ff,#dbeafe);border:2px solid #bfdbfe;border-radius:12px;padding:16px;margin-top:12px}.session-tag[data-v-86338f0d]{display:flex;align-items:center;gap:8px;margin-bottom:12px;font-weight:700;font-size:.9rem;color:#1e40af}.session-tag ion-icon[data-v-86338f0d]{font-size:1.2rem;color:#3b82f6}.session-details-grid[data-v-86338f0d]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:12px}.session-detail[data-v-86338f0d]{display:flex;flex-direction:column;gap:4px}.detail-label[data-v-86338f0d]{font-size:.7rem;color:#6b7280;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.detail-value[data-v-86338f0d]{font-size:.9rem;color:#1f2937;font-weight:700}.session-action[data-v-86338f0d]{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:#fff;border-radius:8px;font-size:.85rem;font-weight:600;color:#3b82f6}.session-action ion-icon[data-v-86338f0d]:first-child{font-size:1.1rem}.session-action ion-icon[data-v-86338f0d]:last-child{font-size:1rem;color:#9ca3af}.machine-actions[data-v-86338f0d]{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px;padding-top:12px;border-top:1px solid #e5e7eb}.machine-actions ion-button[data-v-86338f0d]{--padding-start: 12px;--padding-end: 12px;height:36px;font-size:.85rem;font-weight:600;text-transform:none;letter-spacing:.3px}.machine-actions ion-button ion-icon[data-v-86338f0d]{font-size:1.1rem}.inactive-overlay[data-v-86338f0d]{position:absolute;top:12px;right:12px;display:flex;align-items:center;gap:6px;padding:6px 12px;background:rgba(107,114,128,.95);border-radius:20px;font-size:.75rem;font-weight:700;color:#fff;text-transform:uppercase;letter-spacing:.5px}.inactive-overlay ion-icon[data-v-86338f0d]{font-size:1rem}.empty-state-modern[data-v-86338f0d]{display:flex;flex-direction:column;align-items:center;padding:4rem 2rem;text-align:center}.empty-icon[data-v-86338f0d]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#f3f4f6,#e5e7eb);display:flex;align-items:center;justify-content:center;margin-bottom:1.5rem}.empty-icon ion-icon[data-v-86338f0d]{font-size:2.5rem;color:#9ca3af}.empty-state-modern h3[data-v-86338f0d]{margin:0 0 .75rem;font-size:1.25rem;font-weight:700;color:#1f2937}.empty-state-modern p[data-v-86338f0d]{margin:0;font-size:.9rem;color:#6b7280;line-height:1.5}.machine-modal-content[data-v-86338f0d]{--background: #f8f9fa}.machine-form[data-v-86338f0d]{padding:1.5rem;display:flex;flex-direction:column;gap:1.5rem}.form-section[data-v-86338f0d]{background:#fff;border-radius:16px;padding:1.5rem;box-shadow:0 2px 8px rgba(0,0,0,.06)}.section-title[data-v-86338f0d]{margin:0 0 1.25rem;font-size:1rem;font-weight:700;color:#1f2937;display:flex;align-items:center;gap:.5rem}.form-group[data-v-86338f0d]{margin-bottom:1.25rem}.form-group[data-v-86338f0d]:last-child{margin-bottom:0}.form-label[data-v-86338f0d]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;font-weight:600;color:#374151;margin-bottom:.5rem}.form-label ion-icon[data-v-86338f0d]{font-size:1.1rem;color:var(--ion-color-primary)}.custom-input[data-v-86338f0d],.custom-textarea[data-v-86338f0d],.custom-select[data-v-86338f0d]{--background: #f9fafb;--border-color: #e5e7eb;--border-width: 2px;--border-style: solid;--border-radius: 12px;--padding-start: 1rem;--padding-end: 1rem;--padding-top: .875rem;--padding-bottom: .875rem;font-size:1rem;color:#1f2937}.custom-input[data-v-86338f0d]:focus-within,.custom-textarea[data-v-86338f0d]:focus-within,.custom-select[data-v-86338f0d]:focus-within{--border-color: var(--ion-color-primary);--background: white}.custom-textarea[data-v-86338f0d]{--padding-top: 1rem;--padding-bottom: 1rem}.form-actions[data-v-86338f0d]{display:flex;flex-direction:column;gap:.75rem}.submit-button[data-v-86338f0d]{--background: linear-gradient(135deg, var(--ion-color-primary) 0%, var(--ion-color-primary-shade) 100%);--box-shadow: 0 4px 14px rgba(59, 130, 246, .4);font-weight:700;text-transform:none;letter-spacing:.3px;height:48px;margin:0}.delete-button[data-v-86338f0d]{height:44px;font-weight:600;text-transform:none;letter-spacing:.3px;margin:0}.submit-button ion-icon[data-v-86338f0d],.delete-button ion-icon[data-v-86338f0d]{font-size:1.25rem}ion-fab-button[data-v-86338f0d]{--background: linear-gradient(135deg, var(--ion-color-primary) 0%, var(--ion-color-primary-shade) 100%);--box-shadow: 0 4px 16px rgba(59, 130, 246, .4)}ion-fab-button[data-v-86338f0d]::part(native){box-shadow:0 4px 16px rgba(59,130,246,.4)}ion-fab-button ion-icon[data-v-86338f0d]{font-size:1.75rem}\n",document.head.appendChild(ma);const va={class:"machines-container"},ga={class:"time-display"},ba={class:"current-date"},ha={class:"current-time"},xa={class:"filter-pills"},ya={class:"pill-count"},wa={class:"pill-count"},ka={class:"pill-count"},_a={class:"pill-count"},za={class:"stats-summary"},Ca={class:"stat-info"},qa={class:"stat-number"},Ea={class:"stat-info"},Ma={class:"stat-number"},ja={class:"stat-info"},Da={class:"stat-number"},Sa={class:"stat-info"},Ia={class:"stat-number"},Va={key:0,class:"loading-container"},Aa={key:1,class:"machines-list"},Ta=["onClick"],Na={class:"machine-card-header"},Ua={class:"machine-primary-info"},$a={class:"machine-name"},Ba={key:0,class:"machine-identifier"},La={class:"machine-status-badge"},Ra={class:"status-text"},Pa={key:0,class:"machine-description"},Ha={key:1,class:"session-info-modern"},Ja={class:"session-tag"},Fa={class:"session-details-grid"},Ga={class:"session-detail"},Oa={class:"detail-value"},Ya={class:"session-detail"},Ka={class:"detail-value"},Qa={class:"session-detail"},Wa={class:"detail-value"},Xa={class:"session-action"},Za={key:3,class:"inactive-overlay"},ae={key:0,class:"empty-state-modern"},ee={class:"empty-icon"},te={class:"form-section"},ie={class:"form-group"},ne={class:"form-group"},oe={class:"form-group"},re={key:0,class:"form-group"},le={class:"form-actions"};a("default",ua(M({__name:"MachinesPage",setup(a){const M=G(),ua=fa.getInstance().getMachineRepository(),ma=j([]),se=j(!1),de=j("all"),ce=j(""),ue=j(""),fe=j(!1),pe=j(!1),me=j(!1),ve=j([]),ge=j({id:null,name:"",identifier:"",description:"",unit_id:null}),be=()=>{const a=new Date;ce.value=a.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),ue.value=a.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})};setInterval(be,1e3),be();const he=D(()=>ma.value.filter(a=>"available"===a.status&&!1!==a.is_active).length),xe=D(()=>ma.value.filter(a=>"occupied"===a.status).length),ye=D(()=>ma.value.filter(a=>"maintenance"===a.status).length),we=D(()=>ma.value.filter(a=>!1===a.is_active).length),ke=D(()=>{switch(de.value){case"available":return ma.value.filter(a=>"available"===a.status&&!1!==a.is_active);case"occupied":return ma.value.filter(a=>"occupied"===a.status);case"maintenance":return ma.value.filter(a=>"maintenance"===a.status);case"inactive":return ma.value.filter(a=>!1===a.is_active);default:return ma.value}}),_e=async()=>{se.value=!0;try{const a=await ua.getAll();ma.value=a}catch(a){console.error("Error loading machines:",a);const e=await i.create({message:"Erro ao carregar máquinas",duration:3e3,color:"danger",position:"top"});await e.present()}finally{se.value=!1}},ze=async()=>{await _e()},{isRefreshing:Ce,forceRefresh:qe}=pa(ze,{loadOnMount:!1,interval:15e3,onStatsUpdated:()=>{console.log("[Machines] Stats atualizados automaticamente")}}),Ee=async a=>{await qe(),a.target.complete()},Me=a=>a.is_active&&!1!==a.is_active?a.status:"inactive",je=a=>{if(!a.is_active||!1===a.is_active)return"Desativada";switch(a.status){case"available":return"Disponível";case"occupied":return"Em Uso";case"reserved":return"Reservada";case"maintenance":return"Manutenção";default:return a.status}},De=a=>a?new Date(a).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"",Se=async(a,e)=>{try{const t=await ua.updateStatus(a.id,{status:"maintenance",reason:e}),n=ma.value.findIndex(e=>e.id===a.id);-1!==n&&(ma.value[n]={...ma.value[n],...t});const o=await i.create({message:`${a.name} colocada em manutenção`,duration:3e3,color:"success",position:"top"});await o.present()}catch(t){console.error("Error putting machine in maintenance:",t);const a=await i.create({message:t.response?.data?.message||"Erro ao colocar máquina em manutenção",duration:4e3,color:"danger",position:"top"});await a.present()}},Ie=async(a,e)=>{try{const t=await ua.toggleActive(a.id,{reason:e}),n=ma.value.findIndex(e=>e.id===a.id);-1!==n&&(ma.value[n]={...ma.value[n],...t});const o=await i.create({message:t.is_active?`${a.name} ativada com sucesso`:`${a.name} desativada com sucesso`,duration:3e3,color:"success",position:"top"});await o.present()}catch(t){console.error("Error toggling machine active:",t);const a=await i.create({message:t.response?.data?.message||"Erro ao alterar estado da máquina",duration:4e3,color:"danger",position:"top"});await a.present()}},Ve=()=>{switch(de.value){case"available":return"Nenhuma máquina disponível no momento";case"occupied":return"Nenhuma máquina em uso";case"maintenance":return"Nenhuma máquina em manutenção";case"inactive":return"Nenhuma máquina desativada";default:return"Nenhuma máquina cadastrada"}},Ae=D(()=>""!==ge.value.name.trim()&&""!==ge.value.identifier.trim()&&(pe.value||null!==ge.value.unit_id)),Te=async()=>{try{const a=await fetch("/api/user-units",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),e=await a.json();e.success&&(ve.value=e.units||[],e.current_unit_id&&!pe.value?ge.value.unit_id=e.current_unit_id:1===ve.value.length&&(ge.value.unit_id=ve.value[0].id))}catch(a){console.error("Erro ao carregar unidades:",a)}},Ne=async()=>{pe.value=!1,ge.value={id:null,name:"",identifier:"",description:"",unit_id:null},await Te(),fe.value=!0},Ue=()=>{fe.value=!1,ge.value={id:null,name:"",identifier:"",description:"",unit_id:null}},$e=async()=>{if(Ae.value){me.value=!0;try{const a=pe.value?`/api/machines/${ge.value.id}`:"/api/machines",e=pe.value?"PUT":"POST",t=await fetch(a,{method:e,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({name:ge.value.name,identifier:ge.value.identifier,description:ge.value.description,unit_id:ge.value.unit_id})}),n=await t.json();if(!n.success)throw new Error(n.message||"Erro ao salvar máquina");{const a=await i.create({message:n.message||(pe.value?"Máquina atualizada com sucesso!":"Máquina criada com sucesso!"),duration:3e3,color:"success",position:"top"});await a.present(),Ue(),await _e()}}catch(a){const e=await i.create({message:a.message||"Erro ao salvar máquina. Tente novamente.",duration:4e3,color:"danger",position:"top"});await e.present()}finally{me.value=!1}}},Be=async()=>{const a=await z.create({header:"Confirmar Exclusão",message:`Tem certeza que deseja excluir a máquina <strong>${ge.value.name}</strong>? Esta ação irá desativá-la.`,buttons:[{text:"Cancelar",role:"cancel"},{text:"Excluir",role:"destructive",handler:async()=>{await Le()}}]});await a.present()},Le=async()=>{if(ge.value.id){me.value=!0;try{const a=await fetch(`/api/machines/${ge.value.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),e=await a.json();if(!e.success)throw new Error(e.message||"Erro ao excluir máquina");{const a=await i.create({message:e.message||"Máquina removida com sucesso!",duration:3e3,color:"success",position:"top"});await a.present(),Ue(),await _e()}}catch(a){const e=await i.create({message:a.message||"Erro ao excluir máquina. Tente novamente.",duration:4e3,color:"danger",position:"top"});await e.present()}finally{me.value=!1}}};return S(()=>{_e()}),(a,z)=>(V(),I(T(t),null,{default:A(()=>[N(T(c),{translucent:!0},{default:A(()=>[N(T(n),{color:"primary"},{default:A(()=>[N(T(o),{slot:"start"},{default:A(()=>[N(T(r),{"default-href":"/dashboard"})]),_:1}),N(T(l),null,{default:A(()=>[...z[9]||(z[9]=[U("Gestão de Máquinas",-1)])]),_:1}),N(T(o),{slot:"end"},{default:A(()=>[N(T(s),{onClick:ze,disabled:se.value},{default:A(()=>[N(T(d),{icon:T(O)},null,8,["icon"])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),N(T(x),{fullscreen:!0,class:"machines-content"},{default:A(()=>[$("div",va,[N(T(u),{slot:"fixed",onIonRefresh:Ee},{default:A(()=>[N(T(f))]),_:1}),N(T(p),{class:"time-header-card"},{default:A(()=>[N(T(m),null,{default:A(()=>[$("div",ga,[$("div",ba,[N(T(d),{icon:T(Y),class:"date-icon"},null,8,["icon"]),U(" "+L(ce.value),1)]),$("div",ha,[N(T(d),{icon:T(K),class:"time-icon"},null,8,["icon"]),U(" "+L(ue.value),1)])])]),_:1})]),_:1}),$("div",xa,[$("button",{class:R(["filter-pill",{active:"all"===de.value}]),onClick:z[0]||(z[0]=a=>de.value="all")},[N(T(d),{icon:T(Q)},null,8,["icon"]),z[10]||(z[10]=$("span",null,"Todas",-1)),$("span",ya,L(ma.value.length),1)],2),$("button",{class:R(["filter-pill available",{active:"available"===de.value}]),onClick:z[1]||(z[1]=a=>de.value="available")},[N(T(d),{icon:T(W)},null,8,["icon"]),z[11]||(z[11]=$("span",null,"Disponíveis",-1)),$("span",wa,L(he.value),1)],2),$("button",{class:R(["filter-pill occupied",{active:"occupied"===de.value}]),onClick:z[2]||(z[2]=a=>de.value="occupied")},[N(T(d),{icon:T(K)},null,8,["icon"]),z[12]||(z[12]=$("span",null,"Em Uso",-1)),$("span",ka,L(xe.value),1)],2),$("button",{class:R(["filter-pill maintenance",{active:"maintenance"===de.value}]),onClick:z[3]||(z[3]=a=>de.value="maintenance")},[N(T(d),{icon:T(X)},null,8,["icon"]),z[13]||(z[13]=$("span",null,"Manutenção",-1)),$("span",_a,L(ye.value),1)],2)]),$("div",za,[$("div",{class:R(["stat-card available",{updating:T(Ce)}])},[N(T(d),{icon:T(W)},null,8,["icon"]),$("div",Ca,[$("span",qa,L(he.value),1),z[14]||(z[14]=$("span",{class:"stat-label"},"Disponíveis",-1))])],2),$("div",{class:R(["stat-card occupied",{updating:T(Ce)}])},[N(T(d),{icon:T(K)},null,8,["icon"]),$("div",Ea,[$("span",Ma,L(xe.value),1),z[15]||(z[15]=$("span",{class:"stat-label"},"Em Uso",-1))])],2),$("div",{class:R(["stat-card maintenance",{updating:T(Ce)}])},[N(T(d),{icon:T(X)},null,8,["icon"]),$("div",ja,[$("span",Da,L(ye.value),1),z[16]||(z[16]=$("span",{class:"stat-label"},"Manutenção",-1))])],2),$("div",{class:R(["stat-card inactive",{updating:T(Ce)}])},[N(T(d),{icon:T(Z)},null,8,["icon"]),$("div",Sa,[$("span",Ia,L(we.value),1),z[17]||(z[17]=$("span",{class:"stat-label"},"Desativadas",-1))])],2)]),se.value?(V(),B("div",Va,[N(T(v),{name:"crescent"}),z[18]||(z[18]=$("p",null,"Carregando máquinas...",-1))])):(V(),B("div",Aa,[(V(!0),B(H,null,J(ke.value,a=>{return V(),B("div",{key:a.id,class:R(["machine-card-modern",Me(a)]),onClick:e=>{return a.current_checklist&&(t=a.current_checklist.id,void M.push(`/checklist/${t}`));var t}},[$("div",Na,[$("div",{class:R(["machine-icon-large",Me(a)])},[N(T(d),{icon:T(Q)},null,8,["icon"])],2),$("div",Ua,[$("h3",$a,L(a.name),1),a.identifier?(V(),B("p",Ba,L(a.identifier),1)):P("",!0)]),$("div",La,[$("div",{class:R(["status-dot",Me(a)])},null,2),$("span",Ra,L(je(a)),1)])]),a.description?(V(),B("div",Pa,L(a.description),1)):P("",!0),a.current_checklist?(V(),B("div",Ha,[$("div",Ja,[N(T(d),{icon:T(la)},null,8,["icon"]),z[20]||(z[20]=$("span",null,"Sessão Ativa",-1)),a.current_checklist.is_paused?(V(),I(T(C),{key:0,color:"warning"},{default:A(()=>[...z[19]||(z[19]=[U("Pausado",-1)])]),_:1})):P("",!0)]),$("div",Fa,[$("div",Ga,[z[21]||(z[21]=$("span",{class:"detail-label"},"Paciente",-1)),$("span",Oa,L(a.current_checklist.patient_name),1)]),$("div",Ya,[z[22]||(z[22]=$("span",{class:"detail-label"},"Fase",-1)),$("span",Ka,L((t=a.current_checklist.current_phase,{pre_dialysis:"Pré-Diálise",during_session:"Durante Sessão",post_dialysis:"Pós-Diálise",completed:"Concluído",interrupted:"Interrompido"}[t]||t)),1)]),$("div",Qa,[z[23]||(z[23]=$("span",{class:"detail-label"},"Início",-1)),$("span",Wa,L(De(a.current_checklist.started_at)),1)])]),$("div",Xa,[N(T(d),{icon:T(sa)},null,8,["icon"]),z[24]||(z[24]=$("span",null,"Clique para ver checklist",-1)),N(T(d),{icon:T(da)},null,8,["icon"])])])):P("",!0),a.current_checklist?P("",!0):(V(),B("div",{key:2,class:"machine-actions",onClick:z[4]||(z[4]=F(()=>{},["stop"]))},[N(T(s),{fill:"clear",size:"small",color:"medium",onClick:e=>(async a=>{pe.value=!0,ge.value={id:a.id,name:a.name,identifier:a.identifier,description:a.description||"",unit_id:a.unit_id},await Te(),fe.value=!0})(a)},{default:A(()=>[N(T(d),{slot:"start",icon:T(ca)},null,8,["icon"]),z[25]||(z[25]=U(" Editar ",-1))]),_:1},8,["onClick"]),a.is_active&&"available"===a.status?(V(),I(T(s),{key:0,fill:"outline",size:"small",color:"warning",onClick:t=>(async a=>{const{alertController:t}=await E(()=>e.import("./ionic-legacy-Bcx0Tl_t.js").then(a=>a.a6),void 0),i=await t.create({header:"Colocar em Manutenção",subHeader:a.name,message:"Descreva brevemente o motivo da manutenção:",inputs:[{name:"reason",type:"textarea",placeholder:"Ex: Troca de filtros, ajuste de pressão, etc."}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Confirmar",handler:e=>{Se(a,e.reason||"")}}]});await i.present()})(a)},{default:A(()=>[N(T(d),{slot:"start",icon:T(X)},null,8,["icon"]),z[26]||(z[26]=U(" Manutenção ",-1))]),_:1},8,["onClick"])):P("",!0),a.is_active&&"maintenance"===a.status?(V(),I(T(s),{key:1,fill:"solid",size:"small",color:"success",onClick:t=>(async a=>{const{alertController:t}=await E(()=>e.import("./ionic-legacy-Bcx0Tl_t.js").then(a=>a.a6),void 0),n=await t.create({header:"Liberar Máquina",subHeader:a.name,message:"Tem certeza que deseja liberar esta máquina? Ela ficará disponível para uso.",buttons:[{text:"Cancelar",role:"cancel"},{text:"Liberar",handler:async()=>{try{const e=await ua.updateStatus(a.id,{status:"available"}),t=ma.value.findIndex(e=>e.id===a.id);-1!==t&&(ma.value[t]={...ma.value[t],...e});const n=await i.create({message:`${a.name} liberada com sucesso`,duration:3e3,color:"success",position:"top"});await n.present()}catch(e){console.error("Error releasing machine:",e);const a=await i.create({message:e.response?.data?.message||"Erro ao liberar máquina",duration:4e3,color:"danger",position:"top"});await a.present()}}}]});await n.present()})(a)},{default:A(()=>[N(T(d),{slot:"start",icon:T(W)},null,8,["icon"]),z[27]||(z[27]=U(" Liberar Máquina ",-1))]),_:1},8,["onClick"])):P("",!0),"occupied"!==a.status?(V(),I(T(s),{key:2,fill:"outline",size:"small",color:a.is_active?"danger":"success",onClick:t=>(async a=>{const{alertController:t}=await E(()=>e.import("./ionic-legacy-Bcx0Tl_t.js").then(a=>a.a6),void 0),i=!a.is_active,n=await t.create({header:i?"Ativar Máquina":"Desativar Máquina",subHeader:a.name,message:i?"A máquina será ativada e ficará disponível para uso.":"Descreva brevemente o motivo da desativação:",inputs:i?[]:[{name:"reason",type:"textarea",placeholder:"Ex: Equipamento danificado, aguardando reparo, etc."}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Confirmar",handler:e=>{Ie(a,e?.reason||"")}}]});await n.present()})(a)},{default:A(()=>[N(T(d),{slot:"start",icon:a.is_active?T(Z):T(W)},null,8,["icon"]),U(" "+L(a.is_active?"Desativar":"Ativar"),1)]),_:2},1032,["color","onClick"])):P("",!0)])),a.is_active?P("",!0):(V(),B("div",Za,[N(T(d),{icon:T(Z)},null,8,["icon"]),z[28]||(z[28]=$("span",null,"Desativada",-1))]))],10,Ta);var t}),128)),0===ke.value.length?(V(),B("div",ae,[$("div",ee,[N(T(d),{icon:T(Q)},null,8,["icon"])]),z[29]||(z[29]=$("h3",null,"Nenhuma máquina encontrada",-1)),$("p",null,L(Ve()),1)])):P("",!0)]))]),N(T(g),{vertical:"bottom",horizontal:"end",slot:"fixed"},{default:A(()=>[N(T(b),{onClick:Ne},{default:A(()=>[N(T(d),{icon:T(aa)},null,8,["icon"])]),_:1})]),_:1}),N(T(h),{"is-open":fe.value,onDidDismiss:Ue},{default:A(()=>[N(T(c),null,{default:A(()=>[N(T(n),null,{default:A(()=>[N(T(l),null,{default:A(()=>[U(L(pe.value?"Editar Máquina":"Nova Máquina"),1)]),_:1}),N(T(o),{slot:"end"},{default:A(()=>[N(T(s),{onClick:Ue},{default:A(()=>[...z[30]||(z[30]=[U("Cancelar",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),N(T(x),{class:"machine-modal-content"},{default:A(()=>[$("form",{onSubmit:F($e,["prevent"]),class:"machine-form"},[$("div",te,[z[35]||(z[35]=$("h3",{class:"section-title"},"Informações Básicas",-1)),$("div",ie,[N(T(y),{position:"stacked",class:"form-label"},{default:A(()=>[N(T(d),{icon:T(Q)},null,8,["icon"]),z[31]||(z[31]=U(" Nome da Máquina * ",-1))]),_:1}),N(T(w),{modelValue:ge.value.name,"onUpdate:modelValue":z[5]||(z[5]=a=>ge.value.name=a),type:"text",placeholder:"Ex: Máquina 01",required:"",disabled:me.value,class:"custom-input"},null,8,["modelValue","disabled"])]),$("div",ne,[N(T(y),{position:"stacked",class:"form-label"},{default:A(()=>[N(T(d),{icon:T(ea)},null,8,["icon"]),z[32]||(z[32]=U(" Identificador/Código * ",-1))]),_:1}),N(T(w),{modelValue:ge.value.identifier,"onUpdate:modelValue":z[6]||(z[6]=a=>ge.value.identifier=a),type:"text",placeholder:"Ex: MAQ-001",required:"",disabled:me.value,class:"custom-input"},null,8,["modelValue","disabled"])]),$("div",oe,[N(T(y),{position:"stacked",class:"form-label"},{default:A(()=>[N(T(d),{icon:T(ta)},null,8,["icon"]),z[33]||(z[33]=U(" Descrição ",-1))]),_:1}),N(T(k),{modelValue:ge.value.description,"onUpdate:modelValue":z[7]||(z[7]=a=>ge.value.description=a),placeholder:"Informações adicionais sobre a máquina",rows:4,disabled:me.value,class:"custom-textarea"},null,8,["modelValue","disabled"])]),pe.value?P("",!0):(V(),B("div",re,[N(T(y),{position:"stacked",class:"form-label"},{default:A(()=>[N(T(d),{icon:T(ia)},null,8,["icon"]),z[34]||(z[34]=U(" Unidade * ",-1))]),_:1}),N(T(_),{modelValue:ge.value.unit_id,"onUpdate:modelValue":z[8]||(z[8]=a=>ge.value.unit_id=a),placeholder:"Selecione a unidade",interface:"action-sheet",disabled:me.value||1===ve.value.length,class:"custom-select"},{default:A(()=>[(V(!0),B(H,null,J(ve.value,a=>(V(),I(T(q),{key:a.id,value:a.id},{default:A(()=>[U(L(a.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","disabled"])]))]),$("div",le,[N(T(s),{expand:"block",type:"submit",disabled:me.value||!Ae.value,class:"submit-button"},{default:A(()=>[N(T(d),{slot:"start",icon:me.value?T(na):T(oa)},null,8,["icon"]),U(" "+L(me.value?"Salvando...":pe.value?"Atualizar Máquina":"Criar Máquina"),1)]),_:1},8,["disabled"]),pe.value?(V(),I(T(s),{key:0,expand:"block",fill:"outline",color:"danger",onClick:Be,disabled:me.value,class:"delete-button"},{default:A(()=>[N(T(d),{slot:"start",icon:T(ra)},null,8,["icon"]),z[36]||(z[36]=U(" Excluir Máquina ",-1))]),_:1},8,["disabled"])):P("",!0)])],32)]),_:1})]),_:1},8,["is-open"])]),_:1})]),_:1}))}}),[["__scopeId","data-v-86338f0d"]]))}}});
