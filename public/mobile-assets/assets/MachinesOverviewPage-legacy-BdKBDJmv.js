System.register(["./vendor-legacy-X-yEH-Kx.js","./ionic-legacy-CUiHmorP.js","./_plugin-vue_export-helper-legacy-B7gxhGwx.js"],function(a,e){"use strict";var t,i,n,o,l,s,c,r,d,v,f,u,p,m,g,b,x,h,y,k,w,_,z,M,q,C,j,D,R,I,A,E,X,T,H,L,U,G,W,$,B,N,O,P,V,F,J,K,S,Q;return{setters:[a=>{t=a.d,i=a.r,n=a.c,o=a.o,l=a.B,s=a.q,c=a.x,r=a.y,d=a.v,v=a.H,f=a.t,u=a.n,p=a.J,m=a.G,g=a.I,b=a.F,x=a.L,h=a.z,y=a.K},a=>{k=a.e,w=a.t,_=a.o,z=a.q,M=a.x,q=a.p,C=a.k,j=a.g,D=a.r,R=a.s,I=a.u,A=a.f,E=a.B,X=a.C,T=a.M,H=a.N,L=a.i,U=a.n,G=a.j},a=>{W=a.y,$=a.m,B=a.z,N=a.t,O=a.V,P=a.D,V=a.q,F=a.r,J=a.u,K=a.a1,S=a.v,Q=a._}],execute:function(){var e=document.createElement("style");e.textContent=".overview-content[data-v-7f46667f]{--background: #f5f7fa}.overview-container[data-v-7f46667f]{max-width:800px;margin:0 auto;padding:16px 16px 32px}.loading-state[data-v-7f46667f]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;gap:16px}.loading-state p[data-v-7f46667f]{color:var(--ion-color-step-600);font-size:.9rem}.summary-card[data-v-7f46667f]{margin-bottom:20px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.summary-header[data-v-7f46667f]{display:flex;align-items:center;gap:20px;margin-bottom:16px}.summary-icon[data-v-7f46667f]{width:64px;height:64px;background:rgba(255,255,255,.2);border-radius:16px;display:flex;align-items:center;justify-content:center}.summary-icon ion-icon[data-v-7f46667f]{font-size:2.5rem;color:#fff}.summary-info h2[data-v-7f46667f]{font-size:2.5rem;font-weight:700;margin:0;line-height:1}.summary-info p[data-v-7f46667f]{font-size:.95rem;margin:4px 0 0;opacity:.9;font-weight:500}.summary-description p[data-v-7f46667f]{margin:0;font-size:.9rem;opacity:.85;line-height:1.5}.stats-grid[data-v-7f46667f]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px}.stat-box[data-v-7f46667f]{background:var(--ion-card-background);border-radius:12px;padding:16px;box-shadow:0 2px 8px rgba(0,0,0,.08);border-left:4px solid transparent}.stat-box.available[data-v-7f46667f]{border-left-color:var(--color-available)}.stat-box.occupied[data-v-7f46667f]{border-left-color:var(--color-occupied)}.stat-box.maintenance[data-v-7f46667f]{border-left-color:var(--color-maintenance)}.stat-box.inactive[data-v-7f46667f]{border-left-color:var(--ion-color-step-600)}.stat-box-header[data-v-7f46667f]{display:flex;align-items:center;gap:8px;margin-bottom:12px}.stat-box-header ion-icon[data-v-7f46667f]{font-size:1.5rem}.stat-box.available .stat-box-header ion-icon[data-v-7f46667f]{color:var(--color-available)}.stat-box.occupied .stat-box-header ion-icon[data-v-7f46667f]{color:var(--color-occupied)}.stat-box.maintenance .stat-box-header ion-icon[data-v-7f46667f]{color:var(--color-maintenance)}.stat-box.inactive .stat-box-header ion-icon[data-v-7f46667f]{color:var(--ion-color-step-600)}.stat-box-label[data-v-7f46667f]{font-size:.8rem;color:var(--ion-color-step-600);font-weight:600;text-transform:uppercase;letter-spacing:.5px}.stat-box-number[data-v-7f46667f]{font-size:2rem;font-weight:700;color:var(--ion-text-color);line-height:1;margin-bottom:4px}.stat-box-percentage[data-v-7f46667f]{font-size:.85rem;color:var(--ion-color-step-600);font-weight:500}.chart-card[data-v-7f46667f]{margin-bottom:20px}.chart-card ion-card-title[data-v-7f46667f]{font-size:1.1rem;font-weight:700;color:var(--ion-text-color)}.utilization-bar[data-v-7f46667f]{display:flex;width:100%;height:60px;border-radius:8px;overflow:hidden;margin-bottom:16px;box-shadow:0 2px 8px rgba(0,0,0,.1)}.bar-segment[data-v-7f46667f]{display:flex;align-items:center;justify-content:center;transition:all .3s ease;position:relative}.bar-segment span[data-v-7f46667f]{color:#fff;font-weight:700;font-size:1.1rem;text-shadow:0 1px 2px rgba(0,0,0,.2)}.bar-segment.available[data-v-7f46667f]{background:var(--color-available)}.bar-segment.occupied[data-v-7f46667f]{background:var(--color-occupied)}.bar-segment.maintenance[data-v-7f46667f]{background:var(--color-maintenance)}.bar-segment.inactive[data-v-7f46667f]{background:#6b7280}.bar-legend[data-v-7f46667f]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.legend-item[data-v-7f46667f]{display:flex;align-items:center;gap:8px;font-size:.85rem;color:#4b5563}.legend-color[data-v-7f46667f]{width:16px;height:16px;border-radius:4px;flex-shrink:0}.legend-color.available[data-v-7f46667f]{background:var(--color-available)}.legend-color.occupied[data-v-7f46667f]{background:var(--color-occupied)}.legend-color.maintenance[data-v-7f46667f]{background:var(--color-maintenance)}.legend-color.inactive[data-v-7f46667f]{background:#6b7280}.activity-card[data-v-7f46667f]{margin-bottom:20px}.activity-card ion-card-title[data-v-7f46667f]{font-size:1.1rem;font-weight:700;color:var(--ion-text-color)}.activity-list[data-v-7f46667f]{display:flex;flex-direction:column;gap:12px}.activity-item[data-v-7f46667f]{display:flex;align-items:center;gap:12px;padding:12px;background:var(--ion-background-color);border-radius:8px;border-left:3px solid #e5e7eb}.activity-icon[data-v-7f46667f]{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.activity-icon ion-icon[data-v-7f46667f]{font-size:1.5rem;color:#fff}.activity-icon.started[data-v-7f46667f]{background:#3b82f6}.activity-icon.paused[data-v-7f46667f]{background:var(--color-occupied)}.activity-icon.completed[data-v-7f46667f]{background:var(--color-available)}.activity-content[data-v-7f46667f]{flex:1;min-width:0}.activity-title[data-v-7f46667f]{font-size:.9rem;font-weight:600;color:var(--ion-text-color);margin-bottom:2px}.activity-subtitle[data-v-7f46667f]{font-size:.85rem;color:var(--ion-color-step-600);margin-bottom:2px}.activity-time[data-v-7f46667f]{font-size:.75rem;color:var(--ion-color-step-500)}.machines-list-card[data-v-7f46667f]{margin-bottom:20px}.machines-list-card ion-card-title[data-v-7f46667f]{font-size:1.1rem;font-weight:700;color:var(--ion-text-color)}.machines-list[data-v-7f46667f]{display:flex;flex-direction:column;gap:8px}.machine-item[data-v-7f46667f]{display:flex;align-items:center;gap:12px;padding:14px 12px;background:var(--ion-background-color);border-radius:8px;cursor:pointer;transition:all .2s ease;border:2px solid transparent}.machine-item[data-v-7f46667f]:active{transform:scale(.98);border-color:var(--ion-color-primary)}.machine-status-indicator[data-v-7f46667f]{width:8px;height:8px;border-radius:50%;flex-shrink:0}.machine-status-indicator.available[data-v-7f46667f]{background:var(--color-available);box-shadow:0 0 0 2px rgba(16,185,129,.2)}.machine-status-indicator.occupied[data-v-7f46667f]{background:var(--color-occupied);box-shadow:0 0 0 2px rgba(245,158,11,.2)}.machine-status-indicator.maintenance[data-v-7f46667f]{background:var(--color-maintenance);box-shadow:0 0 0 2px rgba(239,68,68,.2)}.machine-status-indicator.inactive[data-v-7f46667f]{background:#6b7280;box-shadow:0 0 0 2px rgba(107,114,128,.2)}.machine-info[data-v-7f46667f]{flex:1;min-width:0}.machine-name[data-v-7f46667f]{font-size:.95rem;font-weight:600;color:var(--ion-text-color);margin-bottom:2px}.machine-model[data-v-7f46667f]{font-size:.8rem;color:var(--ion-color-step-600)}.machine-item ion-badge[data-v-7f46667f]{font-size:.75rem;padding:4px 10px}.chevron[data-v-7f46667f]{font-size:1.2rem;color:var(--ion-color-step-500);flex-shrink:0}.quick-actions[data-v-7f46667f]{display:flex;flex-direction:column;gap:12px}.quick-actions ion-button[data-v-7f46667f]{--border-radius: 12px;height:48px;font-weight:600}@media (max-width: 480px){.overview-container[data-v-7f46667f]{padding:12px}.summary-info h2[data-v-7f46667f]{font-size:2rem}.stat-box-number[data-v-7f46667f]{font-size:1.75rem}.bar-legend[data-v-7f46667f]{grid-template-columns:1fr}}\n",document.head.appendChild(e);const Y={class:"overview-container"},Z={key:0,class:"loading-state"},aa={key:1},ea={class:"summary-header"},ta={class:"summary-icon"},ia={class:"summary-info"},na={class:"summary-description"},oa={class:"stats-grid"},la={class:"stat-box available"},sa={class:"stat-box-header"},ca={class:"stat-box-number"},ra={class:"stat-box-percentage"},da={class:"stat-box occupied"},va={class:"stat-box-header"},fa={class:"stat-box-number"},ua={class:"stat-box-percentage"},pa={class:"stat-box maintenance"},ma={class:"stat-box-header"},ga={class:"stat-box-number"},ba={class:"stat-box-percentage"},xa={class:"stat-box inactive"},ha={class:"stat-box-header"},ya={class:"stat-box-number"},ka={class:"stat-box-percentage"},wa={class:"utilization-bar"},_a={key:0},za={key:0},Ma={key:0},qa={key:0},Ca={class:"activity-list"},ja={class:"activity-content"},Da={class:"activity-title"},Ra={class:"activity-subtitle"},Ia={class:"activity-time"},Aa={class:"machines-list"},Ea=["onClick"],Xa={class:"machine-info"},Ta={class:"machine-name"},Ha={class:"machine-model"},La={class:"quick-actions"};a("default",Q(t({__name:"MachinesOverviewPage",setup(a){const e=h(),t=i([]),Q=i([]),Ua=i(!1),Ga=i(""),Wa=n(()=>t.value.length),$a=n(()=>t.value.filter(a=>"available"===a.status).length),Ba=n(()=>t.value.filter(a=>"occupied"===a.status).length),Na=n(()=>t.value.filter(a=>"maintenance"===a.status).length),Oa=n(()=>t.value.filter(a=>!a.active).length),Pa=n(()=>Wa.value>0?Math.round($a.value/Wa.value*100):0),Va=n(()=>Wa.value>0?Math.round(Ba.value/Wa.value*100):0),Fa=n(()=>Wa.value>0?Math.round(Na.value/Wa.value*100):0),Ja=n(()=>Wa.value>0?Math.round(Oa.value/Wa.value*100):0),Ka=n(()=>[...t.value].sort((a,e)=>{const t={occupied:1,available:2,maintenance:3,inactive:4},i=t[a.status]||5,n=t[e.status]||5;return i!==n?i-n:a.name.localeCompare(e.name)})),Sa=async()=>{try{Ua.value=!0;const a=await fetch("/api/machines",{credentials:"include",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),e=await a.json();e.success&&(t.value=e.machines);const i=await fetch("/api/me",{credentials:"include",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),n=await i.json();n.success&&n.user&&(Ga.value=n.user.unit?.name||"sua unidade");const o=await fetch("/api/checklists/recent?limit=5",{credentials:"include",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),l=await o.json();l.success&&(Q.value=l.checklists.map(a=>({id:a.id,type:a.completed_at?"completed":a.paused_at?"paused":"started",title:a.completed_at?"Checklist Concluído":a.paused_at?"Checklist Pausado":"Checklist Iniciado",machine_name:a.machine?.name||"Máquina desconhecida",created_at:a.completed_at||a.paused_at||a.created_at})))}catch(a){console.error("Error loading overview data:",a);const e=await w.create({message:"Erro ao carregar dados",duration:3e3,color:"danger",position:"top"});await e.present()}finally{Ua.value=!1}},Qa=async()=>{const a=await U.create({message:"Atualizando...",spinner:"crescent"});await a.present(),await Sa(),await a.dismiss();const e=await w.create({message:"Dados atualizados",duration:1500,color:"success",position:"top"});await e.present()},Ya=async a=>{await Sa(),a.target.complete()},Za=a=>({available:"Disponível",occupied:"Em Uso",maintenance:"Manutenção",inactive:"Inativa"}[a]||"Desconhecido"),ae=a=>{const e=new Date(a),t=(new Date).getTime()-e.getTime(),i=Math.floor(t/6e4),n=Math.floor(i/60),o=Math.floor(n/24);return i<1?"Agora":i<60?`${i}min atrás`:n<24?`${n}h atrás`:1===o?"Ontem":`${o} dias atrás`},ee=()=>{e.push("/machines")},te=()=>{e.push("/checklist/new")};return o(()=>{Sa()}),(a,i)=>(s(),l(r(k),null,{default:c(()=>[d(r(D),{translucent:!0},{default:c(()=>[d(r(_),{color:"primary"},{default:c(()=>[d(r(z),{slot:"start"},{default:c(()=>[d(r(M),{"default-href":"/dashboard"})]),_:1}),d(r(q),null,{default:c(()=>[...i[0]||(i[0]=[v("Visão Geral das Máquinas",-1)])]),_:1}),d(r(z),{slot:"end"},{default:c(()=>[d(r(C),{onClick:Qa,disabled:Ua.value},{default:c(()=>[d(r(j),{icon:r(W)},null,8,["icon"])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),d(r(L),{fullscreen:!0,class:"overview-content"},{default:c(()=>[f("div",Y,[d(r(R),{slot:"fixed",onIonRefresh:Ya},{default:c(()=>[d(r(I))]),_:1}),Ua.value&&0===t.value.length?(s(),u("div",Z,[d(r(A),{name:"crescent"}),i[1]||(i[1]=f("p",null,"Carregando dados...",-1))])):(s(),u("div",aa,[d(r(E),{class:"summary-card"},{default:c(()=>[d(r(X),null,{default:c(()=>[f("div",ea,[f("div",ta,[d(r(j),{icon:r($)},null,8,["icon"])]),f("div",ia,[f("h2",null,m(Wa.value),1),i[2]||(i[2]=f("p",null,"Máquinas Cadastradas",-1))])]),f("div",na,[f("p",null,"Total de equipamentos de hemodiálise na unidade "+m(Ga.value),1)])]),_:1})]),_:1}),f("div",oa,[f("div",la,[f("div",sa,[d(r(j),{icon:r(B)},null,8,["icon"]),i[3]||(i[3]=f("span",{class:"stat-box-label"},"Disponíveis",-1))]),f("div",ca,m($a.value),1),f("div",ra,m(Pa.value)+"%",1)]),f("div",da,[f("div",va,[d(r(j),{icon:r(N)},null,8,["icon"]),i[4]||(i[4]=f("span",{class:"stat-box-label"},"Em Uso",-1))]),f("div",fa,m(Ba.value),1),f("div",ua,m(Va.value)+"%",1)]),f("div",pa,[f("div",ma,[d(r(j),{icon:r(O)},null,8,["icon"]),i[5]||(i[5]=f("span",{class:"stat-box-label"},"Manutenção",-1))]),f("div",ga,m(Na.value),1),f("div",ba,m(Fa.value)+"%",1)]),f("div",xa,[f("div",ha,[d(r(j),{icon:r(P)},null,8,["icon"]),i[6]||(i[6]=f("span",{class:"stat-box-label"},"Inativas",-1))]),f("div",ya,m(Oa.value),1),f("div",ka,m(Ja.value)+"%",1)])]),d(r(E),{class:"chart-card"},{default:c(()=>[d(r(T),null,{default:c(()=>[d(r(H),null,{default:c(()=>[...i[7]||(i[7]=[v("Taxa de Utilização",-1)])]),_:1})]),_:1}),d(r(X),null,{default:c(()=>[f("div",wa,[Pa.value>0?(s(),u("div",{key:0,class:"bar-segment available",style:g({width:Pa.value+"%"})},[Pa.value>10?(s(),u("span",_a,m($a.value),1)):p("",!0)],4)):p("",!0),Va.value>0?(s(),u("div",{key:1,class:"bar-segment occupied",style:g({width:Va.value+"%"})},[Va.value>10?(s(),u("span",za,m(Ba.value),1)):p("",!0)],4)):p("",!0),Fa.value>0?(s(),u("div",{key:2,class:"bar-segment maintenance",style:g({width:Fa.value+"%"})},[Fa.value>10?(s(),u("span",Ma,m(Na.value),1)):p("",!0)],4)):p("",!0),Ja.value>0?(s(),u("div",{key:3,class:"bar-segment inactive",style:g({width:Ja.value+"%"})},[Ja.value>10?(s(),u("span",qa,m(Oa.value),1)):p("",!0)],4)):p("",!0)]),i[8]||(i[8]=f("div",{class:"bar-legend"},[f("div",{class:"legend-item"},[f("span",{class:"legend-color available"}),f("span",null,"Disponíveis")]),f("div",{class:"legend-item"},[f("span",{class:"legend-color occupied"}),f("span",null,"Em Uso")]),f("div",{class:"legend-item"},[f("span",{class:"legend-color maintenance"}),f("span",null,"Manutenção")]),f("div",{class:"legend-item"},[f("span",{class:"legend-color inactive"}),f("span",null,"Inativas")])],-1))]),_:1})]),_:1}),Q.value.length>0?(s(),l(r(E),{key:0,class:"activity-card"},{default:c(()=>[d(r(T),null,{default:c(()=>[d(r(H),null,{default:c(()=>[...i[9]||(i[9]=[v("Atividade Recente",-1)])]),_:1})]),_:1}),d(r(X),null,{default:c(()=>[f("div",Ca,[(s(!0),u(b,null,x(Q.value,a=>{return s(),u("div",{key:a.id,class:"activity-item"},[f("div",{class:y(["activity-icon",a.type])},[d(r(j),{icon:(e=a.type,{started:F,paused:N,completed:B,cleaning:S,disinfection:K}[e]||F)},null,8,["icon"])],2),f("div",ja,[f("div",Da,m(a.title),1),f("div",Ra,m(a.machine_name),1),f("div",Ia,m(ae(a.created_at)),1)])]);var e}),128))])]),_:1})]),_:1})):p("",!0),d(r(E),{class:"machines-list-card"},{default:c(()=>[d(r(T),null,{default:c(()=>[d(r(H),null,{default:c(()=>[...i[10]||(i[10]=[v("Todas as Máquinas",-1)])]),_:1})]),_:1}),d(r(X),null,{default:c(()=>[f("div",Aa,[(s(!0),u(b,null,x(Ka.value,a=>{return s(),u("div",{key:a.id,class:"machine-item",onClick:a=>{e.push("/machines")}},[f("div",{class:y(["machine-status-indicator",a.status])},null,2),f("div",Xa,[f("div",Ta,m(a.name),1),f("div",Ha,m(a.model),1)]),d(r(G),{color:(t=a.status,{available:"success",occupied:"warning",maintenance:"danger",inactive:"medium"}[t]||"medium")},{default:c(()=>[v(m(Za(a.status)),1)]),_:2},1032,["color"]),d(r(j),{icon:r(J),class:"chevron"},null,8,["icon"])],8,Ea);var t}),128))])]),_:1})]),_:1}),f("div",La,[d(r(C),{expand:"block",onClick:ee},{default:c(()=>[d(r(j),{slot:"start",icon:r(V)},null,8,["icon"]),i[11]||(i[11]=v(" Gerenciar Máquinas ",-1))]),_:1}),d(r(C),{expand:"block",fill:"outline",onClick:te},{default:c(()=>[d(r(j),{slot:"start",icon:r(F)},null,8,["icon"]),i[12]||(i[12]=v(" Novo Checklist ",-1))]),_:1})])]))])]),_:1})]),_:1}))}}),[["__scopeId","data-v-7f46667f"]]))}}});
