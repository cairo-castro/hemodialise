System.register(["./vendor-legacy-CTR0atLI.js","./ionic-legacy-AYvLSMm_.js","./_plugin-vue_export-helper-legacy-GvfV0fjJ.js"],function(a,e){"use strict";var t,i,o,n,l,s,c,r,d,v,u,p,m,f,g,b,x,h,y,k,w,_,z,M,q,C,j,A,R,D,E,I,X,T,$,H,L,U,G,W,B,N,O,P,F,J,K,S,V,Q;return{setters:[a=>{t=a.d,i=a.r,o=a.c,n=a.o,l=a.B,s=a.q,c=a.x,r=a.y,d=a.v,v=a.H,u=a.t,p=a.n,m=a.J,f=a.G,g=a.I,b=a.F,x=a.L,h=a.z,y=a.K},a=>{k=a.e,w=a.t,_=a.o,z=a.q,M=a.x,q=a.p,C=a.k,j=a.g,A=a.r,R=a.s,D=a.u,E=a.f,I=a.B,X=a.C,T=a.M,$=a.N,H=a.i,L=a.n,U=a.j},a=>{G=a.A,W=a.m,B=a.r,N=a.t,O=a.X,P=a.E,F=a.u,J=a.v,K=a.w,S=a.a1,V=a.x,Q=a._}],execute:function(){var e=document.createElement("style");e.textContent=".overview-content[data-v-476f0916]{--background: #f5f7fa}.overview-container[data-v-476f0916]{max-width:800px;margin:0 auto;padding:16px 16px 32px}.loading-state[data-v-476f0916]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;gap:16px}.loading-state p[data-v-476f0916]{color:var(--ion-color-step-600);font-size:.9rem}.summary-card[data-v-476f0916]{margin-bottom:20px;background:var(--ion-color-primary);color:#fff}.summary-header[data-v-476f0916]{display:flex;align-items:center;gap:20px;margin-bottom:16px}.summary-icon[data-v-476f0916]{width:64px;height:64px;background:rgba(255,255,255,.2);border-radius:16px;display:flex;align-items:center;justify-content:center}.summary-icon ion-icon[data-v-476f0916]{font-size:2.5rem;color:#fff}.summary-info h2[data-v-476f0916]{font-size:2.5rem;font-weight:700;margin:0;line-height:1}.summary-info p[data-v-476f0916]{font-size:.95rem;margin:4px 0 0;opacity:.9;font-weight:500}.summary-description p[data-v-476f0916]{margin:0;font-size:.9rem;opacity:.85;line-height:1.5}.stats-grid[data-v-476f0916]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px}.stat-box[data-v-476f0916]{background:var(--ion-card-background);border-radius:12px;padding:16px;box-shadow:0 2px 8px rgba(0,0,0,.08);border-left:4px solid transparent}.stat-box.available[data-v-476f0916]{border-left-color:var(--color-available)}.stat-box.occupied[data-v-476f0916]{border-left-color:var(--color-occupied)}.stat-box.maintenance[data-v-476f0916]{border-left-color:var(--color-maintenance)}.stat-box.inactive[data-v-476f0916]{border-left-color:var(--ion-color-step-600)}.stat-box-header[data-v-476f0916]{display:flex;align-items:center;gap:8px;margin-bottom:12px}.stat-box-header ion-icon[data-v-476f0916]{font-size:1.5rem}.stat-box.available .stat-box-header ion-icon[data-v-476f0916]{color:var(--color-available)}.stat-box.occupied .stat-box-header ion-icon[data-v-476f0916]{color:var(--color-occupied)}.stat-box.maintenance .stat-box-header ion-icon[data-v-476f0916]{color:var(--color-maintenance)}.stat-box.inactive .stat-box-header ion-icon[data-v-476f0916]{color:var(--ion-color-step-600)}.stat-box-label[data-v-476f0916]{font-size:.8rem;color:var(--ion-color-step-600);font-weight:600;text-transform:uppercase;letter-spacing:.5px}.stat-box-number[data-v-476f0916]{font-size:2rem;font-weight:700;color:var(--ion-text-color);line-height:1;margin-bottom:4px}.stat-box-percentage[data-v-476f0916]{font-size:.85rem;color:var(--ion-color-step-600);font-weight:500}.chart-card[data-v-476f0916]{margin-bottom:20px}.chart-card ion-card-title[data-v-476f0916]{font-size:1.1rem;font-weight:700;color:var(--ion-text-color)}.utilization-bar[data-v-476f0916]{display:flex;width:100%;height:60px;border-radius:8px;overflow:hidden;margin-bottom:16px;box-shadow:0 2px 8px rgba(0,0,0,.1)}.bar-segment[data-v-476f0916]{display:flex;align-items:center;justify-content:center;transition:all .3s ease;position:relative}.bar-segment span[data-v-476f0916]{color:#fff;font-weight:700;font-size:1.1rem;text-shadow:0 1px 2px rgba(0,0,0,.2)}.bar-segment.available[data-v-476f0916]{background:var(--color-available)}.bar-segment.occupied[data-v-476f0916]{background:var(--color-occupied)}.bar-segment.maintenance[data-v-476f0916]{background:var(--color-maintenance)}.bar-segment.inactive[data-v-476f0916]{background:#6b7280}.bar-legend[data-v-476f0916]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.legend-item[data-v-476f0916]{display:flex;align-items:center;gap:8px;font-size:.85rem;color:#4b5563}.legend-color[data-v-476f0916]{width:16px;height:16px;border-radius:4px;flex-shrink:0}.legend-color.available[data-v-476f0916]{background:var(--color-available)}.legend-color.occupied[data-v-476f0916]{background:var(--color-occupied)}.legend-color.maintenance[data-v-476f0916]{background:var(--color-maintenance)}.legend-color.inactive[data-v-476f0916]{background:#6b7280}.activity-card[data-v-476f0916]{margin-bottom:20px}.activity-card ion-card-title[data-v-476f0916]{font-size:1.1rem;font-weight:700;color:var(--ion-text-color)}.activity-list[data-v-476f0916]{display:flex;flex-direction:column;gap:12px}.activity-item[data-v-476f0916]{display:flex;align-items:center;gap:12px;padding:12px;background:var(--ion-background-color);border-radius:8px;border-left:3px solid #e5e7eb}.activity-icon[data-v-476f0916]{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.activity-icon ion-icon[data-v-476f0916]{font-size:1.5rem;color:#fff}.activity-icon.started[data-v-476f0916]{background:#3b82f6}.activity-icon.paused[data-v-476f0916]{background:var(--color-occupied)}.activity-icon.completed[data-v-476f0916]{background:var(--color-available)}.activity-content[data-v-476f0916]{flex:1;min-width:0}.activity-title[data-v-476f0916]{font-size:.9rem;font-weight:600;color:var(--ion-text-color);margin-bottom:2px}.activity-subtitle[data-v-476f0916]{font-size:.85rem;color:var(--ion-color-step-600);margin-bottom:2px}.activity-time[data-v-476f0916]{font-size:.75rem;color:var(--ion-color-step-500)}.machines-list-card[data-v-476f0916]{margin-bottom:20px}.machines-list-card ion-card-title[data-v-476f0916]{font-size:1.1rem;font-weight:700;color:var(--ion-text-color)}.machines-list[data-v-476f0916]{display:flex;flex-direction:column;gap:8px}.machine-item[data-v-476f0916]{display:flex;align-items:center;gap:12px;padding:14px 12px;background:var(--ion-background-color);border-radius:8px;cursor:pointer;transition:all .2s ease;border:2px solid transparent}.machine-item[data-v-476f0916]:active{transform:scale(.98);border-color:var(--ion-color-primary)}.machine-status-indicator[data-v-476f0916]{width:8px;height:8px;border-radius:50%;flex-shrink:0}.machine-status-indicator.available[data-v-476f0916]{background:var(--color-available);box-shadow:0 0 0 2px rgba(16,185,129,.2)}.machine-status-indicator.occupied[data-v-476f0916]{background:var(--color-occupied);box-shadow:0 0 0 2px rgba(245,158,11,.2)}.machine-status-indicator.maintenance[data-v-476f0916]{background:var(--color-maintenance);box-shadow:0 0 0 2px rgba(239,68,68,.2)}.machine-status-indicator.inactive[data-v-476f0916]{background:#6b7280;box-shadow:0 0 0 2px rgba(107,114,128,.2)}.machine-info[data-v-476f0916]{flex:1;min-width:0}.machine-name[data-v-476f0916]{font-size:.95rem;font-weight:600;color:var(--ion-text-color);margin-bottom:2px}.machine-model[data-v-476f0916]{font-size:.8rem;color:var(--ion-color-step-600)}.machine-item ion-badge[data-v-476f0916]{font-size:.75rem;padding:4px 10px}.chevron[data-v-476f0916]{font-size:1.2rem;color:var(--ion-color-step-500);flex-shrink:0}.quick-actions[data-v-476f0916]{display:flex;flex-direction:column;gap:12px}.quick-actions ion-button[data-v-476f0916]{--border-radius: 12px;height:48px;font-weight:600}@media (max-width: 480px){.overview-container[data-v-476f0916]{padding:12px}.summary-info h2[data-v-476f0916]{font-size:2rem}.stat-box-number[data-v-476f0916]{font-size:1.75rem}.bar-legend[data-v-476f0916]{grid-template-columns:1fr}}\n/*$vite$:1*/",document.head.appendChild(e);const Y={class:"overview-container"},Z={key:0,class:"loading-state"},aa={key:1},ea={class:"summary-header"},ta={class:"summary-icon"},ia={class:"summary-info"},oa={class:"summary-description"},na={class:"stats-grid"},la={class:"stat-box available"},sa={class:"stat-box-header"},ca={class:"stat-box-number"},ra={class:"stat-box-percentage"},da={class:"stat-box occupied"},va={class:"stat-box-header"},ua={class:"stat-box-number"},pa={class:"stat-box-percentage"},ma={class:"stat-box maintenance"},fa={class:"stat-box-header"},ga={class:"stat-box-number"},ba={class:"stat-box-percentage"},xa={class:"stat-box inactive"},ha={class:"stat-box-header"},ya={class:"stat-box-number"},ka={class:"stat-box-percentage"},wa={class:"utilization-bar"},_a={key:0},za={key:0},Ma={key:0},qa={key:0},Ca={class:"activity-list"},ja={class:"activity-content"},Aa={class:"activity-title"},Ra={class:"activity-subtitle"},Da={class:"activity-time"},Ea={class:"machines-list"},Ia=["onClick"],Xa={class:"machine-info"},Ta={class:"machine-name"},$a={class:"machine-model"},Ha={class:"quick-actions"};a("default",Q(t({__name:"MachinesOverviewPage",setup(a){const e=h(),t=i([]),Q=i([]),La=i(!1),Ua=i(""),Ga=o(()=>t.value.length),Wa=o(()=>t.value.filter(a=>"available"===a.status).length),Ba=o(()=>t.value.filter(a=>"occupied"===a.status).length),Na=o(()=>t.value.filter(a=>"maintenance"===a.status).length),Oa=o(()=>t.value.filter(a=>!a.active).length),Pa=o(()=>Ga.value>0?Math.round(Wa.value/Ga.value*100):0),Fa=o(()=>Ga.value>0?Math.round(Ba.value/Ga.value*100):0),Ja=o(()=>Ga.value>0?Math.round(Na.value/Ga.value*100):0),Ka=o(()=>Ga.value>0?Math.round(Oa.value/Ga.value*100):0),Sa=o(()=>[...t.value].sort((a,e)=>{const t={occupied:1,available:2,maintenance:3,inactive:4},i=t[a.status]||5,o=t[e.status]||5;return i!==o?i-o:a.name.localeCompare(e.name)})),Va=async()=>{try{La.value=!0;const a=await fetch("/api/machines",{credentials:"include",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),e=await a.json();e.success&&(t.value=e.machines);const i=await fetch("/api/me",{credentials:"include",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),o=await i.json();o.success&&o.user&&(Ua.value=o.user.unit?.name||"sua unidade");const n=await fetch("/api/checklists/recent?limit=5",{credentials:"include",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),l=await n.json();l.success&&l.checklists&&Array.isArray(l.checklists)?Q.value=l.checklists.map(a=>({id:a.id,type:a.completed_at?"completed":a.paused_at?"paused":"started",title:a.completed_at?"Checklist Concluído":a.paused_at?"Checklist Pausado":"Checklist Iniciado",machine_name:a.machine?.name||"Máquina desconhecida",created_at:a.completed_at||a.paused_at||a.created_at})):Q.value=[]}catch(a){console.error("Error loading overview data:",a);const e=await w.create({message:"Erro ao carregar dados",duration:3e3,color:"danger",position:"top"});await e.present()}finally{La.value=!1}},Qa=async()=>{const a=await L.create({message:"Atualizando...",spinner:"crescent"});await a.present(),await Va(),await a.dismiss();const e=await w.create({message:"Dados atualizados",duration:1500,color:"success",position:"top"});await e.present()},Ya=async a=>{await Va(),a.target.complete()},Za=a=>({available:"Disponível",occupied:"Em Uso",maintenance:"Manutenção",inactive:"Inativa"}[a]||"Desconhecido"),ae=a=>{const e=new Date(a),t=(new Date).getTime()-e.getTime(),i=Math.floor(t/6e4),o=Math.floor(i/60),n=Math.floor(o/24);return i<1?"Agora":i<60?`${i}min atrás`:o<24?`${o}h atrás`:1===n?"Ontem":`${n} dias atrás`},ee=()=>{e.push("/machines")},te=()=>{e.push("/checklist/new")};return n(()=>{Va()}),(a,i)=>(s(),l(r(k),null,{default:c(()=>[d(r(A),{translucent:!0},{default:c(()=>[d(r(_),{color:"primary"},{default:c(()=>[d(r(z),{slot:"start"},{default:c(()=>[d(r(M),{"default-href":"/dashboard"})]),_:1}),d(r(q),null,{default:c(()=>[...i[0]||(i[0]=[v("Visão Geral das Máquinas",-1)])]),_:1}),d(r(z),{slot:"end"},{default:c(()=>[d(r(C),{onClick:Qa,disabled:La.value},{default:c(()=>[d(r(j),{icon:r(G)},null,8,["icon"])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),d(r(H),{fullscreen:!0,class:"overview-content"},{default:c(()=>[u("div",Y,[d(r(R),{slot:"fixed",onIonRefresh:Ya},{default:c(()=>[d(r(D))]),_:1}),La.value&&0===t.value.length?(s(),p("div",Z,[d(r(E),{name:"crescent"}),i[1]||(i[1]=u("p",null,"Carregando dados...",-1))])):(s(),p("div",aa,[d(r(I),{class:"summary-card"},{default:c(()=>[d(r(X),null,{default:c(()=>[u("div",ea,[u("div",ta,[d(r(j),{icon:r(W)},null,8,["icon"])]),u("div",ia,[u("h2",null,f(Ga.value),1),i[2]||(i[2]=u("p",null,"Máquinas Cadastradas",-1))])]),u("div",oa,[u("p",null,"Total de equipamentos de hemodiálise na unidade "+f(Ua.value),1)])]),_:1})]),_:1}),u("div",na,[u("div",la,[u("div",sa,[d(r(j),{icon:r(B)},null,8,["icon"]),i[3]||(i[3]=u("span",{class:"stat-box-label"},"Disponíveis",-1))]),u("div",ca,f(Wa.value),1),u("div",ra,f(Pa.value)+"%",1)]),u("div",da,[u("div",va,[d(r(j),{icon:r(N)},null,8,["icon"]),i[4]||(i[4]=u("span",{class:"stat-box-label"},"Em Uso",-1))]),u("div",ua,f(Ba.value),1),u("div",pa,f(Fa.value)+"%",1)]),u("div",ma,[u("div",fa,[d(r(j),{icon:r(O)},null,8,["icon"]),i[5]||(i[5]=u("span",{class:"stat-box-label"},"Manutenção",-1))]),u("div",ga,f(Na.value),1),u("div",ba,f(Ja.value)+"%",1)]),u("div",xa,[u("div",ha,[d(r(j),{icon:r(P)},null,8,["icon"]),i[6]||(i[6]=u("span",{class:"stat-box-label"},"Inativas",-1))]),u("div",ya,f(Oa.value),1),u("div",ka,f(Ka.value)+"%",1)])]),d(r(I),{class:"chart-card"},{default:c(()=>[d(r(T),null,{default:c(()=>[d(r($),null,{default:c(()=>[...i[7]||(i[7]=[v("Taxa de Utilização",-1)])]),_:1})]),_:1}),d(r(X),null,{default:c(()=>[u("div",wa,[Pa.value>0?(s(),p("div",{key:0,class:"bar-segment available",style:g({width:Pa.value+"%"})},[Pa.value>10?(s(),p("span",_a,f(Wa.value),1)):m("",!0)],4)):m("",!0),Fa.value>0?(s(),p("div",{key:1,class:"bar-segment occupied",style:g({width:Fa.value+"%"})},[Fa.value>10?(s(),p("span",za,f(Ba.value),1)):m("",!0)],4)):m("",!0),Ja.value>0?(s(),p("div",{key:2,class:"bar-segment maintenance",style:g({width:Ja.value+"%"})},[Ja.value>10?(s(),p("span",Ma,f(Na.value),1)):m("",!0)],4)):m("",!0),Ka.value>0?(s(),p("div",{key:3,class:"bar-segment inactive",style:g({width:Ka.value+"%"})},[Ka.value>10?(s(),p("span",qa,f(Oa.value),1)):m("",!0)],4)):m("",!0)]),i[8]||(i[8]=u("div",{class:"bar-legend"},[u("div",{class:"legend-item"},[u("span",{class:"legend-color available"}),u("span",null,"Disponíveis")]),u("div",{class:"legend-item"},[u("span",{class:"legend-color occupied"}),u("span",null,"Em Uso")]),u("div",{class:"legend-item"},[u("span",{class:"legend-color maintenance"}),u("span",null,"Manutenção")]),u("div",{class:"legend-item"},[u("span",{class:"legend-color inactive"}),u("span",null,"Inativas")])],-1))]),_:1})]),_:1}),Q.value.length>0?(s(),l(r(I),{key:0,class:"activity-card"},{default:c(()=>[d(r(T),null,{default:c(()=>[d(r($),null,{default:c(()=>[...i[9]||(i[9]=[v("Atividade Recente",-1)])]),_:1})]),_:1}),d(r(X),null,{default:c(()=>[u("div",Ca,[(s(!0),p(b,null,x(Q.value,a=>{return s(),p("div",{key:a.id,class:"activity-item"},[u("div",{class:y(["activity-icon",a.type])},[d(r(j),{icon:(e=a.type,{started:J,paused:N,completed:B,cleaning:V,disinfection:S}[e]||J)},null,8,["icon"])],2),u("div",ja,[u("div",Aa,f(a.title),1),u("div",Ra,f(a.machine_name),1),u("div",Da,f(ae(a.created_at)),1)])]);var e}),128))])]),_:1})]),_:1})):m("",!0),d(r(I),{class:"machines-list-card"},{default:c(()=>[d(r(T),null,{default:c(()=>[d(r($),null,{default:c(()=>[...i[10]||(i[10]=[v("Todas as Máquinas",-1)])]),_:1})]),_:1}),d(r(X),null,{default:c(()=>[u("div",Ea,[(s(!0),p(b,null,x(Sa.value,a=>{return s(),p("div",{key:a.id,class:"machine-item",onClick:a=>{e.push("/machines")}},[u("div",{class:y(["machine-status-indicator",a.status])},null,2),u("div",Xa,[u("div",Ta,f(a.name),1),u("div",$a,f(a.model),1)]),d(r(U),{color:(t=a.status,{available:"success",occupied:"warning",maintenance:"danger",inactive:"medium"}[t]||"medium")},{default:c(()=>[v(f(Za(a.status)),1)]),_:2},1032,["color"]),d(r(j),{icon:r(K),class:"chevron"},null,8,["icon"])],8,Ia);var t}),128))])]),_:1})]),_:1}),u("div",Ha,[d(r(C),{expand:"block",onClick:ee},{default:c(()=>[d(r(j),{slot:"start",icon:r(F)},null,8,["icon"]),i[11]||(i[11]=v(" Gerenciar Máquinas ",-1))]),_:1}),d(r(C),{expand:"block",fill:"outline",onClick:te},{default:c(()=>[d(r(j),{slot:"start",icon:r(J)},null,8,["icon"]),i[12]||(i[12]=v(" Novo Checklist ",-1))]),_:1})])]))])]),_:1})]),_:1}))}}),[["__scopeId","data-v-476f0916"]]))}}});
