System.register(["./vendor-legacy-KI3bjCrV.js","./main-legacy-0i1eQhD8.js","./ionic-legacy-DR1m-lCA.js","./_plugin-vue_export-helper-legacy-lXI7YtLh.js"],function(a,e){"use strict";var o,l,r,t,i,n,d,s,c,u,f,p,v,m,g,w,h,x,b,_,y,k,z,C,S,V,E,j,A,U,q,N,D,P,B,I,J,M,T,F,G,O,R,$,H,K,L;return{setters:[a=>{o=a.d,l=a.r,r=a.c,t=a.o,i=a.B,n=a.q,d=a.x,s=a.y,c=a.v,u=a.H,f=a.t,p=a.n,v=a.J,m=a.G,g=a.C,w=a.z},a=>{h=a.A},a=>{x=a.e,b=a.t,_=a.o,y=a.q,k=a.x,z=a.p,C=a.r,S=a.s,V=a.u,E=a.f,j=a.B,A=a.C,U=a.g,q=a.j,N=a.M,D=a.N,P=a.J,B=a.k,I=a.i,J=a.l},a=>{M=a.d,T=a.n,F=a.V,G=a.e,O=a.b,R=a.l,$=a.s,H=a.a6,K=a.G,L=a._}],execute:function(){var e=document.createElement("style");e.textContent=".profile-content[data-v-c39f475d]{--background: #f5f7fa}.profile-container[data-v-c39f475d]{max-width:600px;margin:0 auto;padding:16px 16px 32px}.loading-state[data-v-c39f475d]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;gap:16px}.loading-state p[data-v-c39f475d]{color:var(--ion-color-step-600);font-size:.9rem}.profile-header-card[data-v-c39f475d]{margin-bottom:20px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.profile-header[data-v-c39f475d]{display:flex;align-items:center;gap:20px;margin-bottom:16px}.profile-avatar[data-v-c39f475d]{width:80px;height:80px;background:rgba(255,255,255,.2);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.profile-avatar ion-icon[data-v-c39f475d]{font-size:4rem;color:#fff}.profile-header-info[data-v-c39f475d]{flex:1;min-width:0}.profile-header-info h2[data-v-c39f475d]{font-size:1.5rem;font-weight:700;margin:0 0 4px;color:#fff}.user-email[data-v-c39f475d]{font-size:.9rem;margin:0 0 8px;opacity:.9;word-break:break-word}.profile-unit[data-v-c39f475d]{display:flex;align-items:center;gap:8px;padding:10px;background:rgba(255,255,255,.15);border-radius:8px}.profile-unit ion-icon[data-v-c39f475d]{font-size:1.2rem;flex-shrink:0}.profile-unit span[data-v-c39f475d]{font-size:.9rem;font-weight:500}.form-card[data-v-c39f475d]{margin-bottom:20px}.form-card ion-card-title[data-v-c39f475d]{font-size:1.1rem;font-weight:700;color:var(--ion-text-color)}.form-group[data-v-c39f475d]{margin-bottom:20px}.form-group label[data-v-c39f475d]{display:block;font-size:.9rem;font-weight:600;color:var(--ion-text-color);margin-bottom:8px}.form-group ion-input[data-v-c39f475d]{--background: var(--ion-background-color);--padding-start: 12px;--padding-end: 12px;border:2px solid var(--ion-color-step-150);border-radius:8px;font-size:.95rem}.form-group ion-input[data-v-c39f475d]:focus-within{--background: var(--ion-card-background);border-color:var(--ion-color-primary)}.password-input[data-v-c39f475d]{position:relative;display:flex;align-items:center}.password-input ion-input[data-v-c39f475d]{flex:1;padding-right:48px}.password-toggle[data-v-c39f475d]{position:absolute;right:0;--padding-start: 8px;--padding-end: 8px;height:100%;margin:0}.password-toggle ion-icon[data-v-c39f475d]{font-size:1.3rem;color:var(--ion-color-step-600)}.password-hint[data-v-c39f475d]{font-size:.8rem;color:var(--ion-color-step-600);margin-top:4px;font-style:italic}.form-actions[data-v-c39f475d]{margin-top:24px}.form-actions ion-button[data-v-c39f475d]{--border-radius: 10px;height:48px;font-weight:600}.info-card[data-v-c39f475d]{margin-bottom:20px}.info-card ion-card-title[data-v-c39f475d]{font-size:1.1rem;font-weight:700;color:var(--ion-text-color)}.info-item[data-v-c39f475d]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--ion-color-step-150)}.info-item[data-v-c39f475d]:last-child{border-bottom:none}.info-label[data-v-c39f475d]{display:flex;align-items:center;gap:10px;font-size:.9rem;color:var(--ion-color-step-600);font-weight:500}.info-label ion-icon[data-v-c39f475d]{font-size:1.2rem;color:var(--ion-color-step-500)}.info-value[data-v-c39f475d]{font-size:.9rem;color:var(--ion-text-color);font-weight:600;text-align:right}@media (max-width: 480px){.profile-container[data-v-c39f475d]{padding:12px}.profile-avatar[data-v-c39f475d]{width:60px;height:60px}.profile-avatar ion-icon[data-v-c39f475d]{font-size:3rem}.profile-header-info h2[data-v-c39f475d]{font-size:1.3rem}.info-item[data-v-c39f475d]{flex-direction:column;align-items:flex-start;gap:4px}.info-value[data-v-c39f475d]{text-align:left}}\n/*$vite$:1*/",document.head.appendChild(e);const Q={class:"profile-container"},W={key:0,class:"loading-state"},X={key:1},Y={class:"profile-header"},Z={class:"profile-avatar"},aa={class:"profile-header-info"},ea={class:"user-email"},oa={key:0,class:"profile-unit"},la={class:"form-group"},ra={class:"form-group"},ta={class:"form-actions"},ia={class:"form-group"},na={class:"password-input"},da={class:"form-group"},sa={class:"password-input"},ca={class:"form-group"},ua={class:"password-input"},fa={class:"form-actions"},pa={class:"info-item"},va={class:"info-label"},ma={class:"info-value"},ga={key:0,class:"info-item"},wa={class:"info-label"},ha={class:"info-value"},xa={class:"info-item"},ba={class:"info-label"},_a={class:"info-value"};a("default",L(o({__name:"ProfilePage",setup(a){w();const e=l(null),o=l(!1),L=l(!1),ya=l(!1),ka=l({name:"",email:""}),za=l({current_password:"",new_password:"",new_password_confirmation:""}),Ca=l(!1),Sa=l(!1),Va=l(!1),Ea=r(()=>!!e.value&&(ka.value.name!==e.value.name||ka.value.email!==e.value.email)),ja=r(()=>za.value.current_password.length>0&&za.value.new_password.length>0&&za.value.new_password_confirmation.length>0),Aa=async()=>{try{o.value=!0;const a=await fetch("/api/me",h.getFetchConfig()),l=await a.json();if(!l.success||!l.user)throw new Error(l.message||"Erro ao carregar perfil");e.value=l.user,ka.value={name:e.value.name||"",email:e.value.email||""}}catch(a){console.error("Error loading profile:",a);const e=await b.create({message:a.message||"Erro ao carregar perfil",duration:3e3,color:"danger",position:"top"});await e.present()}finally{o.value=!1}},Ua=async()=>{try{L.value=!0;const a=await fetch("/api/profile/update",h.getFetchConfig({method:"PUT",body:JSON.stringify(ka.value)})),o=await a.json();if(!o.success)throw new Error(o.message||"Erro ao atualizar perfil");{e.value=o.user,ka.value={name:e.value.name||"",email:e.value.email||""};const a=await b.create({message:o.message||"Perfil atualizado com sucesso",duration:2e3,color:"success",position:"top"});await a.present()}}catch(a){console.error("Error updating profile:",a);const e=await b.create({message:a.message||"Erro ao atualizar perfil",duration:3e3,color:"danger",position:"top"});await e.present()}finally{L.value=!1}},qa=async()=>{if(za.value.new_password!==za.value.new_password_confirmation){const a=await b.create({message:"As senhas não coincidem",duration:3e3,color:"warning",position:"top"});return void(await a.present())}if(za.value.new_password.length<8){const a=await b.create({message:"A nova senha deve ter no mínimo 8 caracteres",duration:3e3,color:"warning",position:"top"});return void(await a.present())}try{ya.value=!0;const a=await fetch("/api/profile/password",h.getFetchConfig({method:"PUT",body:JSON.stringify(za.value)})),e=await a.json();if(!e.success)throw new Error(e.message||"Erro ao alterar senha");{za.value={current_password:"",new_password:"",new_password_confirmation:""},Ca.value=!1,Sa.value=!1,Va.value=!1;const a=await J.create({header:"Senha Alterada",message:"Sua senha foi alterada com sucesso!",buttons:["OK"]});await a.present()}}catch(a){console.error("Error updating password:",a);const e=await b.create({message:a.message||"Erro ao alterar senha",duration:3e3,color:"danger",position:"top"});await e.present()}finally{ya.value=!1}},Na=async a=>{await Aa(),a.target.complete()},Da=a=>({admin:"Administrador",manager:"Gestor",field_user:"Usuário de Campo",tecnico:"Técnico",coordenador:"Coordenador",supervisor:"Supervisor"}[a]||a),Pa=a=>a?new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}):"N/A";return t(()=>{Aa()}),(a,l)=>(n(),i(s(x),null,{default:d(()=>[c(s(C),{translucent:!0},{default:d(()=>[c(s(_),{color:"primary"},{default:d(()=>[c(s(y),{slot:"start"},{default:d(()=>[c(s(k),{"default-href":"/dashboard"})]),_:1}),c(s(z),null,{default:d(()=>[...l[8]||(l[8]=[u("Meu Perfil",-1)])]),_:1})]),_:1})]),_:1}),c(s(I),{fullscreen:!0,class:"profile-content"},{default:d(()=>[f("div",Q,[c(s(S),{slot:"fixed",onIonRefresh:Na},{default:d(()=>[c(s(V))]),_:1}),o.value&&!e.value?(n(),p("div",W,[c(s(E),{name:"crescent"}),l[9]||(l[9]=f("p",null,"Carregando perfil...",-1))])):e.value?(n(),p("div",X,[c(s(j),{class:"profile-header-card"},{default:d(()=>[c(s(A),null,{default:d(()=>{return[f("div",Y,[f("div",Z,[c(s(U),{icon:s(M)},null,8,["icon"])]),f("div",aa,[f("h2",null,m(e.value.name),1),f("p",ea,m(e.value.email),1),c(s(q),{color:(a=e.value.role,{admin:"danger",manager:"warning",field_user:"primary",tecnico:"primary",coordenador:"secondary",supervisor:"tertiary"}[a]||"medium")},{default:d(()=>[u(m(Da(e.value.role)),1)]),_:1},8,["color"])])]),e.value.unit?(n(),p("div",oa,[c(s(U),{icon:s(T)},null,8,["icon"]),f("span",null,m(e.value.unit.name),1)])):v("",!0)];var a}),_:1})]),_:1}),c(s(j),{class:"form-card"},{default:d(()=>[c(s(N),null,{default:d(()=>[c(s(D),null,{default:d(()=>[...l[10]||(l[10]=[u("Informações Básicas",-1)])]),_:1})]),_:1}),c(s(A),null,{default:d(()=>[f("form",{onSubmit:g(Ua,["prevent"])},[f("div",la,[l[11]||(l[11]=f("label",null,"Nome Completo",-1)),c(s(P),{modelValue:ka.value.name,"onUpdate:modelValue":l[0]||(l[0]=a=>ka.value.name=a),type:"text",placeholder:"Digite seu nome",disabled:L.value,required:""},null,8,["modelValue","disabled"])]),f("div",ra,[l[12]||(l[12]=f("label",null,"E-mail",-1)),c(s(P),{modelValue:ka.value.email,"onUpdate:modelValue":l[1]||(l[1]=a=>ka.value.email=a),type:"email",placeholder:"Digite seu e-mail",disabled:L.value,required:""},null,8,["modelValue","disabled"])]),f("div",ta,[c(s(B),{expand:"block",type:"submit",disabled:L.value||!Ea.value},{default:d(()=>[c(s(U),{slot:"start",icon:s(F)},null,8,["icon"]),u(" "+m(L.value?"Salvando...":"Salvar Alterações"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}),c(s(j),{class:"form-card"},{default:d(()=>[c(s(N),null,{default:d(()=>[c(s(D),null,{default:d(()=>[...l[13]||(l[13]=[u("Alterar Senha",-1)])]),_:1})]),_:1}),c(s(A),null,{default:d(()=>[f("form",{onSubmit:g(qa,["prevent"])},[f("div",ia,[l[14]||(l[14]=f("label",null,"Senha Atual",-1)),f("div",na,[c(s(P),{modelValue:za.value.current_password,"onUpdate:modelValue":l[2]||(l[2]=a=>za.value.current_password=a),type:Ca.value?"text":"password",placeholder:"Digite sua senha atual",disabled:ya.value,required:""},null,8,["modelValue","type","disabled"]),c(s(B),{fill:"clear",onClick:l[3]||(l[3]=a=>Ca.value=!Ca.value),class:"password-toggle"},{default:d(()=>[c(s(U),{icon:Ca.value?s(G):s(O)},null,8,["icon"])]),_:1})])]),f("div",da,[l[15]||(l[15]=f("label",null,"Nova Senha",-1)),f("div",sa,[c(s(P),{modelValue:za.value.new_password,"onUpdate:modelValue":l[4]||(l[4]=a=>za.value.new_password=a),type:Sa.value?"text":"password",placeholder:"Digite a nova senha",disabled:ya.value,required:""},null,8,["modelValue","type","disabled"]),c(s(B),{fill:"clear",onClick:l[5]||(l[5]=a=>Sa.value=!Sa.value),class:"password-toggle"},{default:d(()=>[c(s(U),{icon:Sa.value?s(G):s(O)},null,8,["icon"])]),_:1})]),l[16]||(l[16]=f("div",{class:"password-hint"}," Mínimo de 8 caracteres ",-1))]),f("div",ca,[l[17]||(l[17]=f("label",null,"Confirmar Nova Senha",-1)),f("div",ua,[c(s(P),{modelValue:za.value.new_password_confirmation,"onUpdate:modelValue":l[6]||(l[6]=a=>za.value.new_password_confirmation=a),type:Va.value?"text":"password",placeholder:"Confirme a nova senha",disabled:ya.value,required:""},null,8,["modelValue","type","disabled"]),c(s(B),{fill:"clear",onClick:l[7]||(l[7]=a=>Va.value=!Va.value),class:"password-toggle"},{default:d(()=>[c(s(U),{icon:Va.value?s(G):s(O)},null,8,["icon"])]),_:1})])]),f("div",fa,[c(s(B),{expand:"block",type:"submit",color:"warning",disabled:ya.value||!ja.value},{default:d(()=>[c(s(U),{slot:"start",icon:s(R)},null,8,["icon"]),u(" "+m(ya.value?"Alterando...":"Alterar Senha"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}),c(s(j),{class:"info-card"},{default:d(()=>[c(s(N),null,{default:d(()=>[c(s(D),null,{default:d(()=>[...l[18]||(l[18]=[u("Informações da Conta",-1)])]),_:1})]),_:1}),c(s(A),null,{default:d(()=>[f("div",pa,[f("div",va,[c(s(U),{icon:s($)},null,8,["icon"]),l[19]||(l[19]=f("span",null,"Tipo de Conta",-1))]),f("div",ma,m(Da(e.value.role)),1)]),e.value.unit?(n(),p("div",ga,[f("div",wa,[c(s(U),{icon:s(H)},null,8,["icon"]),l[20]||(l[20]=f("span",null,"Unidade",-1))]),f("div",ha,m(e.value.unit.name),1)])):v("",!0),f("div",xa,[f("div",ba,[c(s(U),{icon:s(K)},null,8,["icon"]),l[21]||(l[21]=f("span",null,"Membro desde",-1))]),f("div",_a,m(Pa(e.value.created_at)),1)])]),_:1})]),_:1})])):v("",!0)])]),_:1})]),_:1}))}}),[["__scopeId","data-v-c39f475d"]]))}}});
