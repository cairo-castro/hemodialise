System.register(["./ionic-legacy-CQzVRdmB.js","./vendor-legacy-CXQ1o16N.js","./_plugin-vue_export-helper-legacy-Du2wO1NW.js","./main-legacy-CoaD-sl0.js"],function(a,e){"use strict";var t,i,n,o,r,l,s,c,d,u,p,m,v,f,g,b,h,x,y,w,k,_,z,C,q,E,M,j,D,S,I,V,A,T,N,$,U,B,L,P,R,H,J,F,G,Y,K,O,Q,W,X,Z,aa,ea,ta,ia,na,oa,ra,la,sa,ca,da,ua,pa;return{setters:[a=>{t=a.e,i=a.t,n=a.m,o=a.o,r=a.x,l=a.n,s=a.k,c=a.g,d=a.p,u=a.q,p=a.r,m=a.B,v=a.C,f=a.f,g=a.y,b=a.z,h=a.E,x=a.i,y=a.u,w=a.J,k=a.G,_=a.K,z=a.l,C=a.j,q=a.L,E=a._},a=>{M=a.d,j=a.r,D=a.c,S=a.o,I=a.A,V=a.q,A=a.x,T=a.y,N=a.v,$=a.H,U=a.t,B=a.n,L=a.G,P=a.K,R=a.J,H=a.F,J=a.L,F=a.C,G=a.B},a=>{Y=a.x,K=a.F,O=a.t,Q=a.J,W=a.y,X=a.T,Z=a.U,aa=a.z,ea=a.V,ta=a.N,ia=a.k,na=a.W,oa=a.X,ra=a.Y,la=a.p,sa=a.b,ca=a.r,da=a.Z,ua=a._},a=>{pa=a.C}],execute:function(){var ma=document.createElement("style");ma.textContent=".machines-content[data-v-004a3035]{--background: linear-gradient(180deg, #f8f9fa 0%, #e9ecef 100%)}.machines-container[data-v-004a3035]{padding-bottom:24px}.time-header-card[data-v-004a3035]{margin:16px;border-radius:16px;box-shadow:0 2px 12px rgba(0,0,0,.08);background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-primary-shade) 100%)}.time-header-card ion-card-content[data-v-004a3035]{padding:16px 20px}.time-display[data-v-004a3035]{display:flex;justify-content:space-between;align-items:center;color:#fff}.current-date[data-v-004a3035],.current-time[data-v-004a3035]{display:flex;align-items:center;gap:8px;font-weight:600}.current-date[data-v-004a3035]{font-size:.9rem;text-transform:capitalize}.current-time[data-v-004a3035]{font-size:1.3rem}.date-icon[data-v-004a3035],.time-icon[data-v-004a3035]{font-size:1.2rem}.filter-pills[data-v-004a3035]{display:flex;gap:8px;padding:0 16px 16px;overflow-x:auto;-webkit-overflow-scrolling:touch}.filter-pills[data-v-004a3035]::-webkit-scrollbar{display:none}.filter-pill[data-v-004a3035]{display:flex;align-items:center;gap:6px;padding:10px 16px;background:#fff;border:2px solid #e5e7eb;border-radius:24px;font-size:.85rem;font-weight:600;color:#6b7280;cursor:pointer;transition:all .2s ease;white-space:nowrap;flex-shrink:0}.filter-pill ion-icon[data-v-004a3035]{font-size:1.2rem}.pill-count[data-v-004a3035]{display:inline-flex;align-items:center;justify-content:center;min-width:22px;height:22px;padding:0 6px;background:#f3f4f6;border-radius:11px;font-size:.75rem;font-weight:700}.filter-pill.active[data-v-004a3035]{border-color:var(--ion-color-primary);background:linear-gradient(135deg,rgba(var(--ion-color-primary-rgb),.1),rgba(var(--ion-color-primary-rgb),.05));color:var(--ion-color-primary)}.filter-pill.active ion-icon[data-v-004a3035]{color:var(--ion-color-primary)}.filter-pill.active .pill-count[data-v-004a3035]{background:var(--ion-color-primary);color:#fff}.filter-pill.available.active[data-v-004a3035]{border-color:#10b981;background:linear-gradient(135deg,rgba(16,185,129,.1),rgba(16,185,129,.05));color:#10b981}.filter-pill.available.active ion-icon[data-v-004a3035]{color:#10b981}.filter-pill.available.active .pill-count[data-v-004a3035]{background:#10b981}.filter-pill.occupied.active[data-v-004a3035]{border-color:#f59e0b;background:linear-gradient(135deg,rgba(245,158,11,.1),rgba(245,158,11,.05));color:#f59e0b}.filter-pill.occupied.active ion-icon[data-v-004a3035]{color:#f59e0b}.filter-pill.occupied.active .pill-count[data-v-004a3035]{background:#f59e0b}.filter-pill.maintenance.active[data-v-004a3035]{border-color:#ef4444;background:linear-gradient(135deg,rgba(239,68,68,.1),rgba(239,68,68,.05));color:#ef4444}.filter-pill.maintenance.active ion-icon[data-v-004a3035]{color:#ef4444}.filter-pill.maintenance.active .pill-count[data-v-004a3035]{background:#ef4444}.stats-summary[data-v-004a3035]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;padding:0 16px 16px}.stat-card[data-v-004a3035]{display:flex;flex-direction:column;align-items:center;gap:12px;background:#fff;padding:20px 16px;border-radius:16px;box-shadow:0 2px 8px rgba(0,0,0,.08);transition:all .3s ease;border-top:4px solid transparent;text-align:center}.stat-card[data-v-004a3035]:active{transform:translateY(-4px);box-shadow:0 8px 16px rgba(0,0,0,.15)}.stat-card ion-icon[data-v-004a3035]{font-size:2.8rem;flex-shrink:0}.stat-card.available[data-v-004a3035]{border-top-color:#10b981;background:linear-gradient(180deg,rgba(16,185,129,.05),#fff)}.stat-card.available ion-icon[data-v-004a3035]{color:#10b981}.stat-card.occupied[data-v-004a3035]{border-top-color:#f59e0b;background:linear-gradient(180deg,rgba(245,158,11,.05),#fff)}.stat-card.occupied ion-icon[data-v-004a3035]{color:#f59e0b}.stat-card.maintenance[data-v-004a3035]{border-top-color:#ef4444;background:linear-gradient(180deg,rgba(239,68,68,.05),#fff)}.stat-card.maintenance ion-icon[data-v-004a3035]{color:#ef4444}.stat-card.inactive[data-v-004a3035]{border-top-color:#6b7280;background:linear-gradient(180deg,rgba(107,114,128,.05),#fff)}.stat-card.inactive ion-icon[data-v-004a3035]{color:#6b7280}.stat-info[data-v-004a3035]{display:flex;flex-direction:column;gap:4px}.stat-card .stat-number[data-v-004a3035]{font-size:2rem;font-weight:800;color:#1f2937;line-height:1}.stat-card .stat-label[data-v-004a3035]{font-size:.8rem;color:#6b7280;font-weight:600;line-height:1.2}.loading-container[data-v-004a3035]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:#9ca3af}.loading-container ion-spinner[data-v-004a3035]{margin-bottom:1rem}.machines-list[data-v-004a3035]{display:flex;flex-direction:column;gap:12px;padding:0 16px 24px}.machine-card-modern[data-v-004a3035]{position:relative;background:#fff;border-radius:16px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,.08);transition:all .3s ease;border-left:4px solid #e5e7eb;overflow:hidden}.machine-card-modern[data-v-004a3035]:active{transform:translateY(-2px);box-shadow:0 8px 16px rgba(0,0,0,.12)}.machine-card-modern.available[data-v-004a3035]{border-left-color:#10b981}.machine-card-modern.occupied[data-v-004a3035]{border-left-color:#f59e0b;cursor:pointer}.machine-card-modern.maintenance[data-v-004a3035]{border-left-color:#ef4444}.machine-card-modern.inactive[data-v-004a3035]{border-left-color:#6b7280;opacity:.6}.machine-card-header[data-v-004a3035]{display:flex;align-items:center;gap:16px;margin-bottom:12px}.machine-icon-large[data-v-004a3035]{width:56px;height:56px;border-radius:14px;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .3s ease}.machine-icon-large ion-icon[data-v-004a3035]{font-size:2rem;color:#fff}.machine-icon-large.available[data-v-004a3035]{background:linear-gradient(135deg,#10b981,#059669)}.machine-icon-large.occupied[data-v-004a3035]{background:linear-gradient(135deg,#f59e0b,#d97706)}.machine-icon-large.maintenance[data-v-004a3035]{background:linear-gradient(135deg,#ef4444,#dc2626)}.machine-icon-large.inactive[data-v-004a3035]{background:linear-gradient(135deg,#6b7280,#4b5563)}.machine-primary-info[data-v-004a3035]{flex:1}.machine-name[data-v-004a3035]{margin:0 0 4px;font-size:1.15rem;font-weight:700;color:#1f2937}.machine-identifier[data-v-004a3035]{margin:0;font-size:.8rem;color:#9ca3af;font-family:Courier New,monospace;font-weight:600}.machine-status-badge[data-v-004a3035]{display:flex;align-items:center;gap:6px;padding:6px 12px;background:#f9fafb;border-radius:20px}.status-dot[data-v-004a3035]{width:8px;height:8px;border-radius:50%;flex-shrink:0}.status-dot.available[data-v-004a3035]{background:#10b981;box-shadow:0 0 8px rgba(16,185,129,.6);animation:pulse-004a3035 2s infinite}.status-dot.occupied[data-v-004a3035]{background:#f59e0b;box-shadow:0 0 8px rgba(245,158,11,.6)}.status-dot.maintenance[data-v-004a3035]{background:#ef4444;box-shadow:0 0 8px rgba(239,68,68,.6)}.status-dot.inactive[data-v-004a3035]{background:#6b7280}@keyframes pulse-004a3035{0%,to{opacity:1}50%{opacity:.5}}.status-text[data-v-004a3035]{font-size:.75rem;font-weight:700;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.machine-description[data-v-004a3035]{font-size:.85rem;color:#6b7280;line-height:1.4;margin-bottom:12px}.session-info-modern[data-v-004a3035]{background:linear-gradient(135deg,#eff6ff,#dbeafe);border:2px solid #bfdbfe;border-radius:12px;padding:16px;margin-top:12px}.session-tag[data-v-004a3035]{display:flex;align-items:center;gap:8px;margin-bottom:12px;font-weight:700;font-size:.9rem;color:#1e40af}.session-tag ion-icon[data-v-004a3035]{font-size:1.2rem;color:#3b82f6}.session-details-grid[data-v-004a3035]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:12px}.session-detail[data-v-004a3035]{display:flex;flex-direction:column;gap:4px}.detail-label[data-v-004a3035]{font-size:.7rem;color:#6b7280;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.detail-value[data-v-004a3035]{font-size:.9rem;color:#1f2937;font-weight:700}.session-action[data-v-004a3035]{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:#fff;border-radius:8px;font-size:.85rem;font-weight:600;color:#3b82f6}.session-action ion-icon[data-v-004a3035]:first-child{font-size:1.1rem}.session-action ion-icon[data-v-004a3035]:last-child{font-size:1rem;color:#9ca3af}.machine-actions[data-v-004a3035]{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px;padding-top:12px;border-top:1px solid #e5e7eb}.machine-actions ion-button[data-v-004a3035]{--padding-start: 12px;--padding-end: 12px;height:36px;font-size:.85rem;font-weight:600;text-transform:none;letter-spacing:.3px}.machine-actions ion-button ion-icon[data-v-004a3035]{font-size:1.1rem}.inactive-overlay[data-v-004a3035]{position:absolute;top:12px;right:12px;display:flex;align-items:center;gap:6px;padding:6px 12px;background:rgba(107,114,128,.95);border-radius:20px;font-size:.75rem;font-weight:700;color:#fff;text-transform:uppercase;letter-spacing:.5px}.inactive-overlay ion-icon[data-v-004a3035]{font-size:1rem}.empty-state-modern[data-v-004a3035]{display:flex;flex-direction:column;align-items:center;padding:4rem 2rem;text-align:center}.empty-icon[data-v-004a3035]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#f3f4f6,#e5e7eb);display:flex;align-items:center;justify-content:center;margin-bottom:1.5rem}.empty-icon ion-icon[data-v-004a3035]{font-size:2.5rem;color:#9ca3af}.empty-state-modern h3[data-v-004a3035]{margin:0 0 .75rem;font-size:1.25rem;font-weight:700;color:#1f2937}.empty-state-modern p[data-v-004a3035]{margin:0;font-size:.9rem;color:#6b7280;line-height:1.5}.machine-modal-content[data-v-004a3035]{--background: #f8f9fa}.machine-form[data-v-004a3035]{padding:1.5rem;display:flex;flex-direction:column;gap:1.5rem}.form-section[data-v-004a3035]{background:#fff;border-radius:16px;padding:1.5rem;box-shadow:0 2px 8px rgba(0,0,0,.06)}.section-title[data-v-004a3035]{margin:0 0 1.25rem;font-size:1rem;font-weight:700;color:#1f2937;display:flex;align-items:center;gap:.5rem}.form-group[data-v-004a3035]{margin-bottom:1.25rem}.form-group[data-v-004a3035]:last-child{margin-bottom:0}.form-label[data-v-004a3035]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;font-weight:600;color:#374151;margin-bottom:.5rem}.form-label ion-icon[data-v-004a3035]{font-size:1.1rem;color:var(--ion-color-primary)}.custom-input[data-v-004a3035],.custom-textarea[data-v-004a3035],.custom-select[data-v-004a3035]{--background: #f9fafb;--border-color: #e5e7eb;--border-width: 2px;--border-style: solid;--border-radius: 12px;--padding-start: 1rem;--padding-end: 1rem;--padding-top: .875rem;--padding-bottom: .875rem;font-size:1rem;color:#1f2937}.custom-input[data-v-004a3035]:focus-within,.custom-textarea[data-v-004a3035]:focus-within,.custom-select[data-v-004a3035]:focus-within{--border-color: var(--ion-color-primary);--background: white}.custom-textarea[data-v-004a3035]{--padding-top: 1rem;--padding-bottom: 1rem}.form-actions[data-v-004a3035]{display:flex;flex-direction:column;gap:.75rem}.submit-button[data-v-004a3035]{--background: linear-gradient(135deg, var(--ion-color-primary) 0%, var(--ion-color-primary-shade) 100%);--box-shadow: 0 4px 14px rgba(59, 130, 246, .4);font-weight:700;text-transform:none;letter-spacing:.3px;height:48px;margin:0}.delete-button[data-v-004a3035]{height:44px;font-weight:600;text-transform:none;letter-spacing:.3px;margin:0}.submit-button ion-icon[data-v-004a3035],.delete-button ion-icon[data-v-004a3035]{font-size:1.25rem}ion-fab-button[data-v-004a3035]{--background: linear-gradient(135deg, var(--ion-color-primary) 0%, var(--ion-color-primary-shade) 100%);--box-shadow: 0 4px 16px rgba(59, 130, 246, .4)}ion-fab-button[data-v-004a3035]::part(native){box-shadow:0 4px 16px rgba(59,130,246,.4)}ion-fab-button ion-icon[data-v-004a3035]{font-size:1.75rem}\n",document.head.appendChild(ma);const va={class:"machines-container"},fa={class:"time-display"},ga={class:"current-date"},ba={class:"current-time"},ha={class:"filter-pills"},xa={class:"pill-count"},ya={class:"pill-count"},wa={class:"pill-count"},ka={class:"pill-count"},_a={class:"stats-summary"},za={class:"stat-card available"},Ca={class:"stat-info"},qa={class:"stat-number"},Ea={class:"stat-card occupied"},Ma={class:"stat-info"},ja={class:"stat-number"},Da={class:"stat-card maintenance"},Sa={class:"stat-info"},Ia={class:"stat-number"},Va={class:"stat-card inactive"},Aa={class:"stat-info"},Ta={class:"stat-number"},Na={key:0,class:"loading-container"},$a={key:1,class:"machines-list"},Ua=["onClick"],Ba={class:"machine-card-header"},La={class:"machine-primary-info"},Pa={class:"machine-name"},Ra={key:0,class:"machine-identifier"},Ha={class:"machine-status-badge"},Ja={class:"status-text"},Fa={key:0,class:"machine-description"},Ga={key:1,class:"session-info-modern"},Ya={class:"session-tag"},Ka={class:"session-details-grid"},Oa={class:"session-detail"},Qa={class:"detail-value"},Wa={class:"session-detail"},Xa={class:"detail-value"},Za={class:"session-detail"},ae={class:"detail-value"},ee={class:"session-action"},te={key:3,class:"inactive-overlay"},ie={key:0,class:"empty-state-modern"},ne={class:"empty-icon"},oe={class:"form-section"},re={class:"form-group"},le={class:"form-group"},se={class:"form-group"},ce={key:0,class:"form-group"},de={class:"form-actions"};a("default",ua(M({__name:"MachinesPage",setup(a){const M=G(),ua=pa.getInstance().getMachineRepository(),ma=j([]),ue=j(!1),pe=j("all"),me=j(""),ve=j(""),fe=j(!1),ge=j(!1),be=j(!1),he=j([]),xe=j({id:null,name:"",identifier:"",description:"",unit_id:null}),ye=()=>{const a=new Date;me.value=a.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),ve.value=a.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})};setInterval(ye,1e3),ye();const we=D(()=>ma.value.filter(a=>"available"===a.status&&!1!==a.is_active).length),ke=D(()=>ma.value.filter(a=>"occupied"===a.status).length),_e=D(()=>ma.value.filter(a=>"maintenance"===a.status).length),ze=D(()=>ma.value.filter(a=>!1===a.is_active).length),Ce=D(()=>{switch(pe.value){case"available":return ma.value.filter(a=>"available"===a.status&&!1!==a.is_active);case"occupied":return ma.value.filter(a=>"occupied"===a.status);case"maintenance":return ma.value.filter(a=>"maintenance"===a.status);case"inactive":return ma.value.filter(a=>!1===a.is_active);default:return ma.value}}),qe=async()=>{ue.value=!0;try{const a=await ua.getAll();ma.value=a}catch(a){console.error("Error loading machines:",a);const e=await i.create({message:"Erro ao carregar máquinas",duration:3e3,color:"danger",position:"top"});await e.present()}finally{ue.value=!1}},Ee=async()=>{await qe()},Me=async a=>{await Ee(),a.target.complete()},je=a=>a.is_active&&!1!==a.is_active?a.status:"inactive",De=a=>{if(!a.is_active||!1===a.is_active)return"Desativada";switch(a.status){case"available":return"Disponível";case"occupied":return"Em Uso";case"reserved":return"Reservada";case"maintenance":return"Manutenção";default:return a.status}},Se=a=>a?new Date(a).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"",Ie=async(a,e)=>{try{const t=await ua.updateStatus(a.id,{status:"maintenance",reason:e}),n=ma.value.findIndex(e=>e.id===a.id);-1!==n&&(ma.value[n]={...ma.value[n],...t});const o=await i.create({message:`${a.name} colocada em manutenção`,duration:3e3,color:"success",position:"top"});await o.present()}catch(t){console.error("Error putting machine in maintenance:",t);const a=await i.create({message:t.response?.data?.message||"Erro ao colocar máquina em manutenção",duration:4e3,color:"danger",position:"top"});await a.present()}},Ve=async(a,e)=>{try{const t=await ua.toggleActive(a.id,{reason:e}),n=ma.value.findIndex(e=>e.id===a.id);-1!==n&&(ma.value[n]={...ma.value[n],...t});const o=await i.create({message:t.is_active?`${a.name} ativada com sucesso`:`${a.name} desativada com sucesso`,duration:3e3,color:"success",position:"top"});await o.present()}catch(t){console.error("Error toggling machine active:",t);const a=await i.create({message:t.response?.data?.message||"Erro ao alterar estado da máquina",duration:4e3,color:"danger",position:"top"});await a.present()}},Ae=()=>{switch(pe.value){case"available":return"Nenhuma máquina disponível no momento";case"occupied":return"Nenhuma máquina em uso";case"maintenance":return"Nenhuma máquina em manutenção";case"inactive":return"Nenhuma máquina desativada";default:return"Nenhuma máquina cadastrada"}},Te=D(()=>""!==xe.value.name.trim()&&""!==xe.value.identifier.trim()&&(ge.value||null!==xe.value.unit_id)),Ne=async()=>{try{const a=await fetch("/api/user-units",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),e=await a.json();e.success&&(he.value=e.units||[],e.current_unit_id&&!ge.value?xe.value.unit_id=e.current_unit_id:1===he.value.length&&(xe.value.unit_id=he.value[0].id))}catch(a){console.error("Erro ao carregar unidades:",a)}},$e=async()=>{ge.value=!1,xe.value={id:null,name:"",identifier:"",description:"",unit_id:null},await Ne(),fe.value=!0},Ue=()=>{fe.value=!1,xe.value={id:null,name:"",identifier:"",description:"",unit_id:null}},Be=async()=>{if(Te.value){be.value=!0;try{const a=ge.value?`/api/machines/${xe.value.id}`:"/api/machines",e=ge.value?"PUT":"POST",t=await fetch(a,{method:e,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({name:xe.value.name,identifier:xe.value.identifier,description:xe.value.description,unit_id:xe.value.unit_id})}),n=await t.json();if(!n.success)throw new Error(n.message||"Erro ao salvar máquina");{const a=await i.create({message:n.message||(ge.value?"Máquina atualizada com sucesso!":"Máquina criada com sucesso!"),duration:3e3,color:"success",position:"top"});await a.present(),Ue(),await qe()}}catch(a){const e=await i.create({message:a.message||"Erro ao salvar máquina. Tente novamente.",duration:4e3,color:"danger",position:"top"});await e.present()}finally{be.value=!1}}},Le=async()=>{const a=await z.create({header:"Confirmar Exclusão",message:`Tem certeza que deseja excluir a máquina <strong>${xe.value.name}</strong>? Esta ação irá desativá-la.`,buttons:[{text:"Cancelar",role:"cancel"},{text:"Excluir",role:"destructive",handler:async()=>{await Pe()}}]});await a.present()},Pe=async()=>{if(xe.value.id){be.value=!0;try{const a=await fetch(`/api/machines/${xe.value.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),e=await a.json();if(!e.success)throw new Error(e.message||"Erro ao excluir máquina");{const a=await i.create({message:e.message||"Máquina removida com sucesso!",duration:3e3,color:"success",position:"top"});await a.present(),Ue(),await qe()}}catch(a){const e=await i.create({message:a.message||"Erro ao excluir máquina. Tente novamente.",duration:4e3,color:"danger",position:"top"});await e.present()}finally{be.value=!1}}};return S(()=>{qe()}),(a,z)=>(V(),I(T(t),null,{default:A(()=>[N(T(d),{translucent:!0},{default:A(()=>[N(T(n),{color:"primary"},{default:A(()=>[N(T(o),{slot:"start"},{default:A(()=>[N(T(r),{"default-href":"/dashboard"})]),_:1}),N(T(l),null,{default:A(()=>[...z[9]||(z[9]=[$("Gestão de Máquinas",-1)])]),_:1}),N(T(o),{slot:"end"},{default:A(()=>[N(T(s),{onClick:Ee,disabled:ue.value},{default:A(()=>[N(T(c),{icon:T(Y)},null,8,["icon"])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),N(T(x),{fullscreen:!0,class:"machines-content"},{default:A(()=>[U("div",va,[N(T(u),{slot:"fixed",onIonRefresh:Me},{default:A(()=>[N(T(p))]),_:1}),N(T(m),{class:"time-header-card"},{default:A(()=>[N(T(v),null,{default:A(()=>[U("div",fa,[U("div",ga,[N(T(c),{icon:T(K),class:"date-icon"},null,8,["icon"]),$(" "+L(me.value),1)]),U("div",ba,[N(T(c),{icon:T(O),class:"time-icon"},null,8,["icon"]),$(" "+L(ve.value),1)])])]),_:1})]),_:1}),U("div",ha,[U("button",{class:P(["filter-pill",{active:"all"===pe.value}]),onClick:z[0]||(z[0]=a=>pe.value="all")},[N(T(c),{icon:T(Q)},null,8,["icon"]),z[10]||(z[10]=U("span",null,"Todas",-1)),U("span",xa,L(ma.value.length),1)],2),U("button",{class:P(["filter-pill available",{active:"available"===pe.value}]),onClick:z[1]||(z[1]=a=>pe.value="available")},[N(T(c),{icon:T(W)},null,8,["icon"]),z[11]||(z[11]=U("span",null,"Disponíveis",-1)),U("span",ya,L(we.value),1)],2),U("button",{class:P(["filter-pill occupied",{active:"occupied"===pe.value}]),onClick:z[2]||(z[2]=a=>pe.value="occupied")},[N(T(c),{icon:T(O)},null,8,["icon"]),z[12]||(z[12]=U("span",null,"Em Uso",-1)),U("span",wa,L(ke.value),1)],2),U("button",{class:P(["filter-pill maintenance",{active:"maintenance"===pe.value}]),onClick:z[3]||(z[3]=a=>pe.value="maintenance")},[N(T(c),{icon:T(X)},null,8,["icon"]),z[13]||(z[13]=U("span",null,"Manutenção",-1)),U("span",ka,L(_e.value),1)],2)]),U("div",_a,[U("div",za,[N(T(c),{icon:T(W)},null,8,["icon"]),U("div",Ca,[U("span",qa,L(we.value),1),z[14]||(z[14]=U("span",{class:"stat-label"},"Disponíveis",-1))])]),U("div",Ea,[N(T(c),{icon:T(O)},null,8,["icon"]),U("div",Ma,[U("span",ja,L(ke.value),1),z[15]||(z[15]=U("span",{class:"stat-label"},"Em Uso",-1))])]),U("div",Da,[N(T(c),{icon:T(X)},null,8,["icon"]),U("div",Sa,[U("span",Ia,L(_e.value),1),z[16]||(z[16]=U("span",{class:"stat-label"},"Manutenção",-1))])]),U("div",Va,[N(T(c),{icon:T(Z)},null,8,["icon"]),U("div",Aa,[U("span",Ta,L(ze.value),1),z[17]||(z[17]=U("span",{class:"stat-label"},"Desativadas",-1))])])]),ue.value?(V(),B("div",Na,[N(T(f),{name:"crescent"}),z[18]||(z[18]=U("p",null,"Carregando máquinas...",-1))])):(V(),B("div",$a,[(V(!0),B(H,null,J(Ce.value,a=>{return V(),B("div",{key:a.id,class:P(["machine-card-modern",je(a)]),onClick:e=>{return a.current_checklist&&(t=a.current_checklist.id,void M.push(`/checklist/${t}`));var t}},[U("div",Ba,[U("div",{class:P(["machine-icon-large",je(a)])},[N(T(c),{icon:T(Q)},null,8,["icon"])],2),U("div",La,[U("h3",Pa,L(a.name),1),a.identifier?(V(),B("p",Ra,L(a.identifier),1)):R("",!0)]),U("div",Ha,[U("div",{class:P(["status-dot",je(a)])},null,2),U("span",Ja,L(De(a)),1)])]),a.description?(V(),B("div",Fa,L(a.description),1)):R("",!0),a.current_checklist?(V(),B("div",Ga,[U("div",Ya,[N(T(c),{icon:T(la)},null,8,["icon"]),z[20]||(z[20]=U("span",null,"Sessão Ativa",-1)),a.current_checklist.is_paused?(V(),I(T(C),{key:0,color:"warning"},{default:A(()=>[...z[19]||(z[19]=[$("Pausado",-1)])]),_:1})):R("",!0)]),U("div",Ka,[U("div",Oa,[z[21]||(z[21]=U("span",{class:"detail-label"},"Paciente",-1)),U("span",Qa,L(a.current_checklist.patient_name),1)]),U("div",Wa,[z[22]||(z[22]=U("span",{class:"detail-label"},"Fase",-1)),U("span",Xa,L((t=a.current_checklist.current_phase,{pre_dialysis:"Pré-Diálise",during_session:"Durante Sessão",post_dialysis:"Pós-Diálise",completed:"Concluído",interrupted:"Interrompido"}[t]||t)),1)]),U("div",Za,[z[23]||(z[23]=U("span",{class:"detail-label"},"Início",-1)),U("span",ae,L(Se(a.current_checklist.started_at)),1)])]),U("div",ee,[N(T(c),{icon:T(sa)},null,8,["icon"]),z[24]||(z[24]=U("span",null,"Clique para ver checklist",-1)),N(T(c),{icon:T(ca)},null,8,["icon"])])])):R("",!0),a.current_checklist?R("",!0):(V(),B("div",{key:2,class:"machine-actions",onClick:z[4]||(z[4]=F(()=>{},["stop"]))},[N(T(s),{fill:"clear",size:"small",color:"medium",onClick:e=>(async a=>{ge.value=!0,xe.value={id:a.id,name:a.name,identifier:a.identifier,description:a.description||"",unit_id:a.unit_id},await Ne(),fe.value=!0})(a)},{default:A(()=>[N(T(c),{slot:"start",icon:T(da)},null,8,["icon"]),z[25]||(z[25]=$(" Editar ",-1))]),_:1},8,["onClick"]),a.is_active&&"available"===a.status?(V(),I(T(s),{key:0,fill:"outline",size:"small",color:"warning",onClick:t=>(async a=>{const{alertController:t}=await E(()=>e.import("./ionic-legacy-CQzVRdmB.js").then(a=>a.a6),void 0),i=await t.create({header:"Colocar em Manutenção",subHeader:a.name,message:"Descreva brevemente o motivo da manutenção:",inputs:[{name:"reason",type:"textarea",placeholder:"Ex: Troca de filtros, ajuste de pressão, etc."}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Confirmar",handler:e=>{Ie(a,e.reason||"")}}]});await i.present()})(a)},{default:A(()=>[N(T(c),{slot:"start",icon:T(X)},null,8,["icon"]),z[26]||(z[26]=$(" Manutenção ",-1))]),_:1},8,["onClick"])):R("",!0),a.is_active&&"maintenance"===a.status?(V(),I(T(s),{key:1,fill:"solid",size:"small",color:"success",onClick:t=>(async a=>{const{alertController:t}=await E(()=>e.import("./ionic-legacy-CQzVRdmB.js").then(a=>a.a6),void 0),n=await t.create({header:"Liberar Máquina",subHeader:a.name,message:"Tem certeza que deseja liberar esta máquina? Ela ficará disponível para uso.",buttons:[{text:"Cancelar",role:"cancel"},{text:"Liberar",handler:async()=>{try{const e=await ua.updateStatus(a.id,{status:"available"}),t=ma.value.findIndex(e=>e.id===a.id);-1!==t&&(ma.value[t]={...ma.value[t],...e});const n=await i.create({message:`${a.name} liberada com sucesso`,duration:3e3,color:"success",position:"top"});await n.present()}catch(e){console.error("Error releasing machine:",e);const a=await i.create({message:e.response?.data?.message||"Erro ao liberar máquina",duration:4e3,color:"danger",position:"top"});await a.present()}}}]});await n.present()})(a)},{default:A(()=>[N(T(c),{slot:"start",icon:T(W)},null,8,["icon"]),z[27]||(z[27]=$(" Liberar Máquina ",-1))]),_:1},8,["onClick"])):R("",!0),"occupied"!==a.status?(V(),I(T(s),{key:2,fill:"outline",size:"small",color:a.is_active?"danger":"success",onClick:t=>(async a=>{const{alertController:t}=await E(()=>e.import("./ionic-legacy-CQzVRdmB.js").then(a=>a.a6),void 0),i=!a.is_active,n=await t.create({header:i?"Ativar Máquina":"Desativar Máquina",subHeader:a.name,message:i?"A máquina será ativada e ficará disponível para uso.":"Descreva brevemente o motivo da desativação:",inputs:i?[]:[{name:"reason",type:"textarea",placeholder:"Ex: Equipamento danificado, aguardando reparo, etc."}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Confirmar",handler:e=>{Ve(a,e?.reason||"")}}]});await n.present()})(a)},{default:A(()=>[N(T(c),{slot:"start",icon:a.is_active?T(Z):T(W)},null,8,["icon"]),$(" "+L(a.is_active?"Desativar":"Ativar"),1)]),_:2},1032,["color","onClick"])):R("",!0)])),a.is_active?R("",!0):(V(),B("div",te,[N(T(c),{icon:T(Z)},null,8,["icon"]),z[28]||(z[28]=U("span",null,"Desativada",-1))]))],10,Ua);var t}),128)),0===Ce.value.length?(V(),B("div",ie,[U("div",ne,[N(T(c),{icon:T(Q)},null,8,["icon"])]),z[29]||(z[29]=U("h3",null,"Nenhuma máquina encontrada",-1)),U("p",null,L(Ae()),1)])):R("",!0)]))]),N(T(g),{vertical:"bottom",horizontal:"end",slot:"fixed"},{default:A(()=>[N(T(b),{onClick:$e},{default:A(()=>[N(T(c),{icon:T(aa)},null,8,["icon"])]),_:1})]),_:1}),N(T(h),{"is-open":fe.value,onDidDismiss:Ue},{default:A(()=>[N(T(d),null,{default:A(()=>[N(T(n),null,{default:A(()=>[N(T(l),null,{default:A(()=>[$(L(ge.value?"Editar Máquina":"Nova Máquina"),1)]),_:1}),N(T(o),{slot:"end"},{default:A(()=>[N(T(s),{onClick:Ue},{default:A(()=>[...z[30]||(z[30]=[$("Cancelar",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),N(T(x),{class:"machine-modal-content"},{default:A(()=>[U("form",{onSubmit:F(Be,["prevent"]),class:"machine-form"},[U("div",oe,[z[35]||(z[35]=U("h3",{class:"section-title"},"Informações Básicas",-1)),U("div",re,[N(T(y),{position:"stacked",class:"form-label"},{default:A(()=>[N(T(c),{icon:T(Q)},null,8,["icon"]),z[31]||(z[31]=$(" Nome da Máquina * ",-1))]),_:1}),N(T(w),{modelValue:xe.value.name,"onUpdate:modelValue":z[5]||(z[5]=a=>xe.value.name=a),type:"text",placeholder:"Ex: Máquina 01",required:"",disabled:be.value,class:"custom-input"},null,8,["modelValue","disabled"])]),U("div",le,[N(T(y),{position:"stacked",class:"form-label"},{default:A(()=>[N(T(c),{icon:T(ea)},null,8,["icon"]),z[32]||(z[32]=$(" Identificador/Código * ",-1))]),_:1}),N(T(w),{modelValue:xe.value.identifier,"onUpdate:modelValue":z[6]||(z[6]=a=>xe.value.identifier=a),type:"text",placeholder:"Ex: MAQ-001",required:"",disabled:be.value,class:"custom-input"},null,8,["modelValue","disabled"])]),U("div",se,[N(T(y),{position:"stacked",class:"form-label"},{default:A(()=>[N(T(c),{icon:T(ta)},null,8,["icon"]),z[33]||(z[33]=$(" Descrição ",-1))]),_:1}),N(T(k),{modelValue:xe.value.description,"onUpdate:modelValue":z[7]||(z[7]=a=>xe.value.description=a),placeholder:"Informações adicionais sobre a máquina",rows:4,disabled:be.value,class:"custom-textarea"},null,8,["modelValue","disabled"])]),ge.value?R("",!0):(V(),B("div",ce,[N(T(y),{position:"stacked",class:"form-label"},{default:A(()=>[N(T(c),{icon:T(ia)},null,8,["icon"]),z[34]||(z[34]=$(" Unidade * ",-1))]),_:1}),N(T(_),{modelValue:xe.value.unit_id,"onUpdate:modelValue":z[8]||(z[8]=a=>xe.value.unit_id=a),placeholder:"Selecione a unidade",interface:"action-sheet",disabled:be.value||1===he.value.length,class:"custom-select"},{default:A(()=>[(V(!0),B(H,null,J(he.value,a=>(V(),I(T(q),{key:a.id,value:a.id},{default:A(()=>[$(L(a.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","disabled"])]))]),U("div",de,[N(T(s),{expand:"block",type:"submit",disabled:be.value||!Te.value,class:"submit-button"},{default:A(()=>[N(T(c),{slot:"start",icon:be.value?T(na):T(oa)},null,8,["icon"]),$(" "+L(be.value?"Salvando...":ge.value?"Atualizar Máquina":"Criar Máquina"),1)]),_:1},8,["disabled"]),ge.value?(V(),I(T(s),{key:0,expand:"block",fill:"outline",color:"danger",onClick:Le,disabled:be.value,class:"delete-button"},{default:A(()=>[N(T(c),{slot:"start",icon:T(ra)},null,8,["icon"]),z[36]||(z[36]=$(" Excluir Máquina ",-1))]),_:1},8,["disabled"])):R("",!0)])],32)]),_:1})]),_:1},8,["is-open"])]),_:1})]),_:1}))}}),[["__scopeId","data-v-004a3035"]]))}}});
