System.register(["./vendor-legacy-B8oEYziD.js","./ionic-legacy-But9DPYG.js","./_plugin-vue_export-helper-legacy-C1HXhe8x.js","./main-legacy-DzrpluBc.js"],function(e,a){"use strict";var o,t,l,n,i,r,s,c,d,u,g,m,f,p,v,b,h,y,x,w,_,k,E,C,j,S,U,V;return{setters:[e=>{o=e.d,t=e.r,l=e.c,n=e.o,i=e.z,r=e.n,s=e.v,c=e.x,d=e.A,u=e.t,g=e.l,m=e.q,f=e.B,p=e.C},e=>{v=e.e,b=e.f,h=e.g,y=e.h,x=e.i,w=e.j,_=e.k,k=e.l,E=e.m,C=e.t},e=>{j=e.m,S=e.l,U=e._},e=>{V=e.C}],execute:function(){var a=document.createElement("style");a.textContent=".login-content[data-v-8c042eaf]{--background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)}.loading-container[data-v-8c042eaf]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;color:#fff;text-align:center}.loading-container ion-spinner[data-v-8c042eaf]{--color: white;margin-bottom:1rem;transform:scale(1.5)}.login-container[data-v-8c042eaf]{display:flex;flex-direction:column;min-height:100vh;padding:2rem 1.5rem;color:#fff}.login-header[data-v-8c042eaf]{text-align:center;margin-bottom:3rem;flex-grow:1;display:flex;flex-direction:column;justify-content:center}.logo-container[data-v-8c042eaf]{margin-bottom:1rem}.logo-icon[data-v-8c042eaf]{font-size:4rem;color:#fff}.login-header h1[data-v-8c042eaf]{font-size:2rem;font-weight:700;margin:.5rem 0}.login-header p[data-v-8c042eaf]{font-size:1rem;opacity:.9;margin:0}.login-form[data-v-8c042eaf]{margin-bottom:2rem}.form-group[data-v-8c042eaf]{margin-bottom:1rem}.mobile-input[data-v-8c042eaf]{--background: rgba(255, 255, 255, .95);--color: #1f2937;border-radius:12px;margin-bottom:1rem}.mobile-button[data-v-8c042eaf]{--background: rgba(255, 255, 255, .2);--background-activated: rgba(255, 255, 255, .3);--color: white;--border-radius: 12px;margin-top:1rem;font-weight:600;backdrop-filter:blur(10px)}.login-footer[data-v-8c042eaf]{text-align:center;opacity:.8;font-size:.875rem}.login-footer p[data-v-8c042eaf]{margin:.25rem 0}\n",document.head.appendChild(a);const z={key:0,class:"loading-container"},L={key:1,class:"login-container"},T={class:"login-header"},A={class:"logo-container"},D={class:"form-group"},q={class:"form-group"};e("default",U(o({__name:"LoginPage",setup(e){const a=d(),o=V.getInstance(),U=o.getLoginUseCase(),B=o.getCurrentUserUseCase(),I=o.getAuthRepository(),M=t({email:"",password:""}),R=t(!1),G=t(!1),H=t({header:"",message:""}),K=l(()=>M.value.email.length>0&&M.value.password.length>0),O=async()=>{console.log("Starting login process..."),R.value=!0;try{console.log("Executing login use case..."),await U.execute(M.value),console.log("Login use case completed successfully"),console.log("Getting current user...");const e=await B.execute();if(console.log("Current user:",e),"tecnico"!==e.role)throw new Error("Este aplicativo é destinado apenas para usuários de campo. Use o sistema web para acessar a área administrativa.");console.log("User role validation passed");const o=await C.create({message:`Bem-vindo, ${e.name}!`,duration:1500,color:"success",position:"top"});await o.present(),console.log("Toast presented"),console.log("About to navigate to dashboard..."),setTimeout(()=>{console.log("Executing router.replace to /dashboard"),a.replace("/dashboard"),console.log("Router.replace called")},100)}catch(e){console.error("Login error:",e),H.value={header:"Erro no Login",message:e.message||"Erro interno. Tente novamente."},G.value=!0}finally{R.value=!1}};return n(()=>{(async()=>{try{I.isAuthenticated()&&("tecnico"===(await B.execute()).role?a.replace("/dashboard"):I.removeToken())}catch(e){I.removeToken()}})()}),(e,a)=>(r(),i(c(v),null,{default:s(()=>[u(c(E),{fullscreen:!0,class:"login-content"},{default:s(()=>[R.value?(r(),g("div",z,[u(c(b),{name:"crescent"}),a[3]||(a[3]=m("p",null,"Entrando...",-1))])):(r(),g("div",L,[m("div",T,[m("div",A,[u(c(h),{icon:c(j),class:"logo-icon"},null,8,["icon"])]),a[4]||(a[4]=m("h1",null,"Hemodiálise",-1)),a[5]||(a[5]=m("p",null,"Sistema Mobile de Segurança",-1))]),m("form",{onSubmit:p(O,["prevent"]),class:"login-form"},[m("div",D,[u(c(y),{class:"mobile-input",fill:"outline"},{default:s(()=>[u(c(x),{position:"floating"},{default:s(()=>[...a[6]||(a[6]=[f("Email",-1)])]),_:1}),u(c(w),{modelValue:M.value.email,"onUpdate:modelValue":a[0]||(a[0]=e=>M.value.email=e),type:"email",required:"",disabled:R.value,placeholder:"Digite seu email"},null,8,["modelValue","disabled"])]),_:1})]),m("div",q,[u(c(y),{class:"mobile-input",fill:"outline"},{default:s(()=>[u(c(x),{position:"floating"},{default:s(()=>[...a[7]||(a[7]=[f("Senha",-1)])]),_:1}),u(c(w),{modelValue:M.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>M.value.password=e),type:"password",required:"",disabled:R.value,placeholder:"Digite sua senha"},null,8,["modelValue","disabled"])]),_:1})]),u(c(_),{expand:"block",type:"submit",class:"mobile-button",disabled:R.value||!K.value},{default:s(()=>[u(c(h),{icon:c(S),slot:"start"},null,8,["icon"]),a[8]||(a[8]=f(" Entrar ",-1))]),_:1},8,["disabled"])],32),u(c(k),{"is-open":G.value,header:H.value.header,message:H.value.message,buttons:["OK"],onDidDismiss:a[2]||(a[2]=e=>G.value=!1)},null,8,["is-open","header","message"]),a[9]||(a[9]=m("div",{class:"login-footer"},[m("p",null,"Sistema de Controle de Qualidade"),m("p",null,"Estado do Maranhão")],-1))]))]),_:1})]),_:1}))}}),[["__scopeId","data-v-8c042eaf"]]))}}});
