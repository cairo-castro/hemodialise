System.register(["./vendor-legacy-CTR0atLI.js","./ionic-legacy-AYvLSMm_.js","./_plugin-vue_export-helper-legacy-GvfV0fjJ.js","./main-legacy-B2gPNHZb.js","./useStatsAutoRefresh-legacy-BxZDt2Io.js"],function(a,e){"use strict";var t,o,i,n,s,r,c,l,d,p,u,f,v,g,m,b,h,x,w,k,y,z,_,C,$,E,D,j,S,P,T,U,q,A,M,I,L,F,R,N,O,H,Y,B,G,J,K,Q,V,W,X,Z,aa,ea,ta,oa,ia,na,sa,ra,ca;return{setters:[a=>{t=a.d,o=a.c,i=a.n,n=a.q,s=a.t,r=a.v,c=a.G,l=a.x,d=a.H,p=a.y,u=a.I,f=a.J,v=a.B,g=a.K,m=a.r,b=a.o,h=a.z,x=a.F,w=a.L},a=>{k=a.j,y=a.g,z=a.k,_=a.l,C=a.e,$=a.t,E=a.m,D=a.n,j=a.o,S=a.p,P=a.q,T=a.r,U=a.s,q=a.u,A=a.v,M=a.w,I=a.i},a=>{L=a.p,F=a.d,R=a.t,N=a.f,O=a.g,H=a.i,Y=a._,B=a.h,G=a.j,J=a.k,K=a.n,Q=a.o,V=a.q,W=a.r,X=a.u,Z=a.m,aa=a.v,ea=a.w,ta=a.x,oa=a.y,ia=a.z},a=>{na=a.C,sa=a.A,ra=a.u},a=>{ca=a.u}],execute:function(){var e=document.createElement("style");e.textContent=".checklist-card[data-v-279d50f9]{background:#fff;border-radius:16px;padding:20px;margin-bottom:16px;box-shadow:0 4px 12px rgba(0,0,0,.1);border-left:5px solid #007bff;position:relative;transition:all .3s ease}.checklist-card[data-v-279d50f9]:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,.15)}.checklist-card.paused[data-v-279d50f9]{opacity:.8;border-left-color:#ffc107}.checklist-card.pre-dialysis[data-v-279d50f9]{border-left-color:#007bff}.checklist-card.during-session[data-v-279d50f9]{border-left-color:#ffc107}.checklist-card.post-dialysis[data-v-279d50f9]{border-left-color:#6f42c1}.card-header[data-v-279d50f9]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.machine-info h3[data-v-279d50f9]{margin:0 0 4px;font-size:18px;font-weight:600;color:#2c3e50}.machine-id[data-v-279d50f9]{margin:0;font-size:14px;color:#6c757d;font-family:Courier New,monospace}.phase-badge[data-v-279d50f9]{font-size:12px;padding:6px 12px;border-radius:20px;font-weight:600;margin-top:8px;align-self:flex-start}.patient-info[data-v-279d50f9]{display:flex;align-items:center;gap:8px;margin-bottom:16px;padding:8px 12px;background:#f8f9fa;border-radius:8px}.patient-icon[data-v-279d50f9]{font-size:16px;color:#6c757d}.patient-name[data-v-279d50f9]{font-size:14px;font-weight:500;color:#495057}.user-info[data-v-279d50f9]{display:flex;align-items:center;gap:6px;margin-bottom:16px;padding:6px 12px;background:#e7f3ff;border-radius:8px;border-left:3px solid #007bff}.user-icon[data-v-279d50f9]{font-size:18px;color:#007bff;flex-shrink:0}.user-label[data-v-279d50f9]{font-size:12px;color:#6c757d;font-weight:500}.user-name[data-v-279d50f9]{font-size:13px;font-weight:600;color:#007bff}.progress-section[data-v-279d50f9]{margin-bottom:16px}.progress-bar[data-v-279d50f9]{width:100%;height:8px;background:#e9ecef;border-radius:4px;overflow:hidden;margin-bottom:4px}.progress-fill[data-v-279d50f9]{height:100%;background:linear-gradient(90deg,#28a745,#20c997);border-radius:4px;transition:width .3s ease}.progress-text[data-v-279d50f9]{font-size:12px;color:#6c757d;font-weight:500}.time-info[data-v-279d50f9]{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}.time-item[data-v-279d50f9]{display:flex;align-items:center;gap:6px;font-size:12px}.time-icon[data-v-279d50f9]{font-size:14px;color:#6c757d}.time-icon.paused[data-v-279d50f9]{color:#ffc107}.time-label[data-v-279d50f9]{color:#6c757d;min-width:70px}.time-value[data-v-279d50f9]{font-weight:600;color:#495057}.actions[data-v-279d50f9]{display:flex;gap:8px;flex-wrap:wrap}.action-button[data-v-279d50f9]{--padding-start: 12px;--padding-end: 12px;height:32px;font-size:12px;font-weight:600}.action-button.continue[data-v-279d50f9]{--color: #007bff;--border-color: #007bff}.action-button.resume[data-v-279d50f9],.action-button.pause[data-v-279d50f9]{flex:1}.action-button.details[data-v-279d50f9]{--color: #6c757d;min-width:32px}.status-indicator[data-v-279d50f9]{position:absolute;top:16px;right:16px;width:10px;height:10px;border-radius:50%;background:#28a745;box-shadow:0 0 0 2px #fff,0 0 6px rgba(40,167,69,.3);z-index:1}.status-indicator.paused[data-v-279d50f9]{background:#ffc107;box-shadow:0 0 0 2px #fff,0 0 6px rgba(255,193,7,.3)}@media (max-width: 480px){.checklist-card[data-v-279d50f9]{padding:16px}.card-header[data-v-279d50f9]{margin-bottom:12px}.machine-info h3[data-v-279d50f9]{font-size:16px}.actions[data-v-279d50f9]{gap:6px}.action-button[data-v-279d50f9]{font-size:11px;height:28px}}.dashboard-content[data-v-8bfaead3]{--background: var(--ion-background-color)}.dashboard-container[data-v-8bfaead3]{max-width:600px;margin:0 auto;padding-bottom:24px}.welcome-section[data-v-8bfaead3]{background:var(--ion-card-background);padding:20px;margin:16px 16px 0;border-radius:16px;box-shadow:0 2px 8px rgba(0,0,0,.08)}.welcome-header[data-v-8bfaead3]{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.welcome-text[data-v-8bfaead3]{flex:1}.welcome-section h1[data-v-8bfaead3]{font-size:1.5rem;font-weight:700;color:var(--ion-text-color);margin:0 0 4px}.user-name-link[data-v-8bfaead3]{cursor:pointer;transition:all .2s ease;display:inline-block}.user-name-link[data-v-8bfaead3]:hover{color:var(--ion-color-primary);transform:translate(2px)}.user-name-link[data-v-8bfaead3]:active{transform:scale(.98)}.unit-name[data-v-8bfaead3]{font-size:.9rem;color:var(--ion-color-step-600);margin:0;font-weight:500}.user-badge[data-v-8bfaead3]{flex-shrink:0}.unit-display[data-v-8bfaead3]{margin-top:16px;padding-top:16px;border-top:1px solid rgba(0,0,0,.06)}.unit-info-static[data-v-8bfaead3]{display:flex;align-items:center;padding:14px 16px;background:rgba(var(--ion-color-primary-rgb),.08);border-radius:12px;border:2px solid rgba(var(--ion-color-primary-rgb),.2);transition:all .2s ease}.unit-icon-static[data-v-8bfaead3]{font-size:1.4rem;color:var(--ion-color-primary);margin-right:12px;flex-shrink:0}.unit-text-static[data-v-8bfaead3]{flex:1;min-width:0;display:flex;flex-direction:column;gap:2px}.unit-label-static[data-v-8bfaead3]{font-size:.7rem;color:var(--ion-color-primary);font-weight:600;text-transform:uppercase;letter-spacing:.5px;opacity:.8}.unit-name-static[data-v-8bfaead3]{font-size:.95rem;color:var(--ion-text-color);font-weight:700;line-height:1.3;word-wrap:break-word;overflow-wrap:break-word}.unit-info[data-v-8bfaead3]{display:flex;align-items:center;padding:14px 16px;background:rgba(var(--ion-color-primary-rgb),.08);border-radius:12px;border:2px solid rgba(var(--ion-color-primary-rgb),.2);cursor:pointer;transition:all .2s ease}.unit-info[data-v-8bfaead3]:hover{background:rgba(var(--ion-color-primary-rgb),.12);border-color:var(--ion-color-primary);transform:translateY(-1px);box-shadow:0 2px 8px rgba(var(--ion-color-primary-rgb),.15)}.unit-info[data-v-8bfaead3]:active{transform:translateY(0)}.unit-icon[data-v-8bfaead3]{font-size:1.4rem;color:var(--ion-color-primary);margin-right:12px;flex-shrink:0}.unit-text[data-v-8bfaead3]{flex:1;min-width:0;display:flex;flex-direction:column;gap:2px}.unit-label[data-v-8bfaead3]{font-size:.7rem;color:var(--ion-color-primary);font-weight:600;text-transform:uppercase;letter-spacing:.5px;opacity:.8}.unit-name[data-v-8bfaead3]{font-size:.95rem;color:var(--ion-text-color);font-weight:700;line-height:1.3;word-wrap:break-word;overflow-wrap:break-word}.unit-change-btn[data-v-8bfaead3]{--padding-start: 8px;--padding-end: 8px;margin:0;flex-shrink:0}.unit-change-btn ion-icon[data-v-8bfaead3]{font-size:1.3rem;color:var(--ion-color-primary)}.role-tag[data-v-8bfaead3]{display:inline-block;background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-primary-shade) 100%);color:#fff;padding:6px 12px;border-radius:20px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.quick-stats[data-v-8bfaead3]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;padding:16px;background:var(--ion-background-color);position:relative}.stats-update-badge[data-v-8bfaead3]{position:absolute;top:-8px;right:16px;z-index:10}.update-chip[data-v-8bfaead3]{font-size:.75rem;height:28px;animation:slideIn-8bfaead3 .3s ease-out}.update-chip ion-icon[data-v-8bfaead3]{font-size:1rem;margin-right:4px}.update-chip ion-icon.spinning[data-v-8bfaead3]{animation:spin-8bfaead3 1s linear infinite}@keyframes spin-8bfaead3{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes slideIn-8bfaead3{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.stat-card[data-v-8bfaead3]{display:flex;align-items:center;gap:12px;background:var(--ion-card-background);border-left:4px solid transparent;padding:16px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);cursor:pointer;transition:all .2s ease}.stat-card[data-v-8bfaead3]:active{transform:scale(.97)}.stat-card.available[data-v-8bfaead3]{border-left-color:var(--ion-color-success)}.stat-card.active[data-v-8bfaead3]{border-left-color:var(--ion-color-warning)}.stat-card.total[data-v-8bfaead3]{border-left-color:var(--ion-color-medium)}.stat-icon[data-v-8bfaead3]{flex-shrink:0}.stat-icon ion-icon[data-v-8bfaead3]{font-size:2rem}.stat-card.available .stat-icon ion-icon[data-v-8bfaead3]{color:var(--ion-color-success)}.stat-card.active .stat-icon ion-icon[data-v-8bfaead3]{color:var(--ion-color-warning)}.stat-card.total .stat-icon ion-icon[data-v-8bfaead3]{color:var(--ion-color-medium)}.stat-content[data-v-8bfaead3]{flex:1;min-width:0}.stat-number[data-v-8bfaead3]{font-size:1.5rem;font-weight:700;color:var(--ion-text-color);line-height:1}.stat-label[data-v-8bfaead3]{font-size:.7rem;color:var(--ion-color-step-600);text-transform:uppercase;letter-spacing:.5px;margin-top:2px;font-weight:600}.primary-action[data-v-8bfaead3]{padding:0 16px;margin-top:16px}.primary-btn[data-v-8bfaead3]{width:100%;display:flex;align-items:center;gap:16px;background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-primary-shade) 100%);color:#fff;border:none;border-radius:16px;padding:20px;box-shadow:0 4px 12px rgba(0,0,0,.15);cursor:pointer;transition:all .2s ease;position:relative}.primary-btn[data-v-8bfaead3]:active{transform:scale(.98)}.primary-btn ion-icon[data-v-8bfaead3]{font-size:2.5rem;flex-shrink:0}.btn-text[data-v-8bfaead3]{display:flex;flex-direction:column;gap:4px;flex:1;text-align:left}.btn-title[data-v-8bfaead3]{font-size:1.2rem;font-weight:700}.btn-subtitle[data-v-8bfaead3]{font-size:.85rem;opacity:.9}.primary-btn ion-badge[data-v-8bfaead3]{position:absolute;top:12px;right:12px;font-size:.85rem;font-weight:700}.section[data-v-8bfaead3]{padding:0 16px;margin-top:24px}.section-title[data-v-8bfaead3]{font-size:1.1rem;font-weight:700;color:var(--ion-text-color);margin:0 0 12px}.quick-actions[data-v-8bfaead3]{display:flex;flex-direction:column;gap:8px}.action-btn[data-v-8bfaead3]{display:flex;align-items:center;gap:12px;background:var(--ion-card-background);border:2px solid var(--ion-color-step-150);border-radius:12px;padding:16px;cursor:pointer;transition:all .2s ease}.action-btn[data-v-8bfaead3]:active{transform:scale(.98);border-color:var(--ion-color-primary)}.action-icon[data-v-8bfaead3]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.action-icon ion-icon[data-v-8bfaead3]{font-size:1.8rem;color:#fff}.action-icon.primary[data-v-8bfaead3]{background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-primary-shade) 100%)}.action-icon.warning[data-v-8bfaead3]{background:linear-gradient(135deg,#f59e0b,#d97706)}.action-icon.tertiary[data-v-8bfaead3]{background:linear-gradient(135deg,#8b5cf6,#7c3aed)}.action-icon.cleaning[data-v-8bfaead3]{background:linear-gradient(135deg,#06b6d4,#0891b2)}.action-content[data-v-8bfaead3]{display:flex;flex-direction:column;gap:4px;flex:1}.action-title[data-v-8bfaead3]{font-size:1rem;font-weight:600;color:var(--ion-text-color)}.action-subtitle[data-v-8bfaead3]{font-size:.85rem;color:var(--ion-color-step-600)}.chevron[data-v-8bfaead3]{font-size:1.2rem;color:var(--ion-color-step-500);flex-shrink:0}.checklists-list[data-v-8bfaead3]{display:flex;flex-direction:column;gap:12px}.connection-status[data-v-8bfaead3]{padding:16px;text-align:center}.status-chip[data-v-8bfaead3]{font-size:.85rem;font-weight:600}@media (max-width: 480px){.quick-stats[data-v-8bfaead3]{gap:8px;padding:12px}.stat-card[data-v-8bfaead3]{flex-direction:column;text-align:center;gap:8px;padding:12px}.stat-icon ion-icon[data-v-8bfaead3]{font-size:1.8rem}.stat-number[data-v-8bfaead3]{font-size:1.3rem}.stat-label[data-v-8bfaead3]{font-size:.65rem}.primary-btn[data-v-8bfaead3]{padding:16px}.primary-btn ion-icon[data-v-8bfaead3]{font-size:2rem}.btn-title[data-v-8bfaead3]{font-size:1.1rem}.btn-subtitle[data-v-8bfaead3]{font-size:.8rem}}[data-v-8bfaead3] .custom-toast{--background: #10b981;--color: white;font-weight:600}[data-v-8bfaead3] .unit-selector-action-sheet{--background: var(--ion-background-color);--border-radius: 16px 16px 0 0}[data-v-8bfaead3] .unit-selector-action-sheet .action-sheet-title{font-size:1.2rem;font-weight:700;color:var(--ion-text-color);padding:24px 20px 8px;border-bottom:2px solid var(--ion-color-step-150)}[data-v-8bfaead3] .unit-selector-action-sheet .action-sheet-sub-title{font-size:.9rem;color:var(--ion-color-step-600);padding:8px 20px 16px;line-height:1.4}[data-v-8bfaead3] .unit-selector-action-sheet .action-sheet-button{font-size:1rem;font-weight:500;padding:18px 20px;margin:4px 12px;border-radius:12px;background:var(--ion-card-background);border:2px solid var(--ion-color-step-100);transition:all .2s ease;color:var(--ion-text-color);white-space:normal;text-align:left;line-height:1.4;min-height:56px}[data-v-8bfaead3] .unit-selector-action-sheet .action-sheet-button:hover{background:var(--ion-color-step-50);border-color:var(--ion-color-step-200);transform:translate(4px)}[data-v-8bfaead3] .unit-selector-action-sheet .unit-selected{font-weight:700;color:var(--ion-color-primary);background:rgba(var(--ion-color-primary-rgb),.1);border-color:var(--ion-color-primary);box-shadow:0 2px 8px rgba(var(--ion-color-primary-rgb),.15)}[data-v-8bfaead3] .unit-selector-action-sheet .action-sheet-button ion-icon{font-size:1.5rem;margin-right:14px;color:var(--ion-color-primary)}[data-v-8bfaead3] .unit-selector-action-sheet .action-sheet-cancel{font-weight:600;color:var(--ion-color-danger);margin:8px 12px 16px;border-radius:12px}\n/*$vite$:1*/",document.head.appendChild(e);const la={class:"card-header"},da={class:"machine-info"},pa={class:"machine-id"},ua={class:"patient-info"},fa={class:"patient-name"},va={class:"user-info"},ga={class:"user-name"},ma={class:"progress-section"},ba={class:"progress-bar"},ha={class:"progress-text"},xa={class:"time-info"},wa={class:"time-item"},ka={class:"time-value"},ya={key:0,class:"time-item"},za={class:"time-value"},_a={class:"actions"},Ca=Y(t({__name:"ActiveChecklistCard",props:{checklist:{}},emits:["continue","pause","resume"],setup(a,{emit:e}){const t=a,m=o(()=>({pre_dialysis:"PrÃ©-DiÃ¡lise",during_session:"Durante SessÃ£o",post_dialysis:"PÃ³s-DiÃ¡lise",completed:"ConcluÃ­do",interrupted:"Interrompido"}[t.checklist.current_phase]||t.checklist.current_phase)),b=o(()=>({pre_dialysis:"primary",during_session:"warning",post_dialysis:"secondary",completed:"success",interrupted:"danger"}[t.checklist.current_phase]||"medium")),h=o(()=>t.checklist.current_phase.replace("_","-")),x=o(()=>void 0!==t.checklist.phase_completion?Math.round(t.checklist.phase_completion):{pre_dialysis:25,during_session:50,post_dialysis:75,completed:100,interrupted:0}[t.checklist.current_phase]||0),w=o(()=>{const a=new Date(t.checklist.created_at),e=(new Date).getTime()-a.getTime(),o=Math.floor(e/36e5),i=Math.floor(e%36e5/6e4);return o>0?`${o}h ${i}m`:`${i}m`}),C=o(()=>{if(!t.checklist.paused_at)return"";const a=new Date(t.checklist.paused_at),e=(new Date).getTime()-a.getTime(),o=Math.floor(e/36e5),i=Math.floor(e%36e5/6e4);return o>0?`${o}h ${i}m`:`${i}m`}),$=async()=>{const a=await _.create({header:"Detalhes do Checklist",subHeader:`${t.checklist.machine.name} - ${t.checklist.patient.name}`,message:`\n      <strong>TÃ©cnico:</strong> ${t.checklist.user.name}<br>\n      <strong>Fase:</strong> ${m.value}<br>\n      <strong>Progresso:</strong> ${x.value}%<br>\n      <strong>Iniciado:</strong> ${new Date(t.checklist.created_at).toLocaleString("pt-BR")}<br>\n      ${t.checklist.paused_at?`<strong>Pausado:</strong> ${new Date(t.checklist.paused_at).toLocaleString("pt-BR")}<br>`:""}\n    `,buttons:["Fechar"]});await a.present()};return(a,e)=>(n(),i("div",{class:g(["checklist-card",[h.value,{paused:a.checklist.paused_at}]])},[s("div",la,[s("div",da,[s("h3",null,c(a.checklist.machine.name),1),s("p",pa,c(a.checklist.machine.identifier),1)]),r(p(k),{color:b.value,class:"phase-badge"},{default:l(()=>[d(c(m.value),1)]),_:1},8,["color"])]),s("div",ua,[r(p(y),{icon:p(L),class:"patient-icon"},null,8,["icon"]),s("span",fa,c(a.checklist.patient.name),1)]),s("div",va,[r(p(y),{icon:p(F),class:"user-icon"},null,8,["icon"]),e[3]||(e[3]=s("span",{class:"user-label"},"TÃ©cnico:",-1)),s("span",ga,c(a.checklist.user.name),1)]),s("div",ma,[s("div",ba,[s("div",{class:"progress-fill",style:u({width:x.value+"%"})},null,4)]),s("span",ha,c(x.value)+"% completo",1)]),s("div",xa,[s("div",wa,[r(p(y),{icon:p(R),class:"time-icon"},null,8,["icon"]),e[4]||(e[4]=s("span",{class:"time-label"},"Iniciado hÃ¡",-1)),s("span",ka,c(w.value),1)]),a.checklist.paused_at?(n(),i("div",ya,[r(p(y),{icon:p(N),class:"time-icon paused"},null,8,["icon"]),e[5]||(e[5]=s("span",{class:"time-label"},"Pausado hÃ¡",-1)),s("span",za,c(C.value),1)])):f("",!0)]),s("div",_a,[a.checklist.paused_at?f("",!0):(n(),v(p(z),{key:0,fill:"outline",size:"small",onClick:e[0]||(e[0]=e=>a.$emit("continue",a.checklist)),class:"action-button continue"},{default:l(()=>[r(p(y),{icon:p(O),slot:"start"},null,8,["icon"]),e[6]||(e[6]=d(" Continuar ",-1))]),_:1})),a.checklist.paused_at?(n(),v(p(z),{key:1,fill:"solid",size:"small",onClick:e[1]||(e[1]=e=>a.$emit("resume",a.checklist)),class:"action-button resume",color:"success"},{default:l(()=>[r(p(y),{icon:p(O),slot:"start"},null,8,["icon"]),e[7]||(e[7]=d(" Retomar ",-1))]),_:1})):f("",!0),a.checklist.paused_at?f("",!0):(n(),v(p(z),{key:2,fill:"outline",size:"small",onClick:e[2]||(e[2]=e=>a.$emit("pause",a.checklist)),class:"action-button pause",color:"warning"},{default:l(()=>[r(p(y),{icon:p(N),slot:"start"},null,8,["icon"]),e[8]||(e[8]=d(" Pausar ",-1))]),_:1})),r(p(z),{fill:"clear",size:"small",onClick:$,class:"action-button details"},{default:l(()=>[r(p(y),{icon:p(H),slot:"icon-only"},null,8,["icon"])]),_:1})]),s("div",{class:g(["status-indicator",h.value])},null,2)],2))}}),[["__scopeId","data-v-279d50f9"]]),$a={class:"dashboard-container"},Ea={key:0,class:"welcome-section"},Da={class:"welcome-header"},ja={class:"welcome-text"},Sa={class:"unit-display"},Pa={key:0,class:"unit-info-static"},Ta={class:"unit-text-static"},Ua={class:"unit-name-static"},qa={key:1,class:"unit-info"},Aa={class:"unit-text"},Ma={class:"unit-name"},Ia={key:1,class:"quick-stats"},La={key:0,class:"stats-update-badge"},Fa={class:"stat-icon"},Ra={class:"stat-content"},Na={class:"stat-number"},Oa={class:"stat-icon"},Ha={class:"stat-content"},Ya={class:"stat-number"},Ba={class:"stat-icon"},Ga={class:"stat-content"},Ja={class:"stat-number"},Ka={class:"primary-action"},Qa={class:"section"},Va={class:"quick-actions"},Wa={class:"action-icon warning"},Xa={class:"action-content"},Za={class:"action-subtitle"},ae={class:"action-icon tertiary"},ee={class:"action-icon cleaning"},te={class:"action-icon primary"},oe={key:2,class:"section"},ie={class:"checklists-list"},ne={class:"connection-status"};a("default",Y(t({__name:"DashboardPage",setup(a){const e=h(),t=na.getInstance(),u=t.getCurrentUserUseCase(),L=t.getLogoutUseCase(),{isDarkMode:F,toggleDarkMode:N}=ra(),O=m(null),H=m(navigator.onLine),Y=m(!1),la=m(0),da=m(3),pa=m(!1),ua=m([]),fa=m([]),va=m([]),ga=m([]),ma=m(null),ba=m(null);o(()=>O.value&&{tecnico:"TÃ©cnico",admin:"Admin",gestor:"Gestor",coordenador:"Coordenador",supervisor:"Supervisor"}[O.value.role]||"UsuÃ¡rio");const ha=o(()=>ua.value.filter(a=>!a.paused_at).length);o(()=>ua.value.filter(a=>a.paused_at).length);const xa=o(()=>fa.value.length),wa=async()=>{try{O.value=await u.execute(),console.log("User loaded:",O.value),await ka()}catch(a){console.error("Error loading user:",a);const t=await $.create({message:"Erro ao carregar dados do usuÃ¡rio",duration:3e3,color:"danger",position:"top"});await t.present(),setTimeout(()=>{e.replace("/login")},2e3)}},ka=async()=>{try{const a=await fetch("/api/user-units",sa.getFetchConfig()),e=await a.json();if(e.success){ga.value=e.units||[];const a=e.current_unit_id;a?(ma.value=e.units.find(e=>e.id===a),ba.value=a,console.log("Unidade jÃ¡ selecionada:",ma.value?.name)):1===e.units.length?(console.log("Apenas uma unidade disponÃ­vel, selecionando automaticamente..."),await _a(e.units[0].id),ma.value=e.units[0],ba.value=e.units[0].id):e.units.length>1&&(console.log("MÃºltiplas unidades disponÃ­veis, forÃ§ando seleÃ§Ã£o..."),setTimeout(()=>{za()},500)),console.log("Unidades carregadas (mobile):",{total:ga.value.length,current:ma.value?.name,currentId:ba.value})}}catch(a){console.error("Error loading available units:",a),O.value?.unit&&(ma.value=O.value.unit,ba.value=O.value.unit.id,ga.value=O.value.units||[O.value.unit])}},ya=async()=>{const a=ga.value.map(a=>({text:a.id===ba.value?`âœ“ ${a.name}`:a.name,cssClass:a.id===ba.value?"unit-selected":"",handler:()=>{a.id!==ba.value&&_a(a.id)}}));a.push({text:"Cancelar",role:"cancel",handler:()=>{}});const e=await E.create({header:"Selecionar Unidade",subHeader:"Escolha a unidade para visualizar",buttons:a,cssClass:"unit-selector-action-sheet"});await e.present()},za=async()=>{const a=ga.value.map(a=>({text:a.name,handler:()=>{_a(a.id)}})),e=await E.create({header:"Selecione uma Unidade",subHeader:"Por favor, escolha a unidade para continuar",buttons:a,backdropDismiss:!1,cssClass:"unit-selector-action-sheet mandatory-selection"});await e.present()},_a=async a=>{try{const e=await D.create({message:"Alternando unidade...",spinner:"crescent",duration:1e4});await e.present();const t=await fetch("/api/user-units/switch",{method:"POST",...sa.getFetchConfig({body:JSON.stringify({unit_id:a})})}),o=await t.json();if(await e.dismiss(),o.success){ma.value=o.current_unit,ba.value=a;const e=await $.create({message:`ðŸ“ Unidade alterada para ${o.current_unit.name}`,duration:1500,color:"success",position:"top",cssClass:"custom-toast"});await e.present(),setTimeout(()=>{window.location.reload()},1500)}}catch(e){console.error("Error switching unit:",e),ba.value=ma.value?.id;const a=await $.create({message:"Erro ao trocar de unidade",duration:3e3,color:"danger",position:"top"});await a.present()}},se=async()=>{try{await Promise.all([de(),pe(),ue()]),la.value=ua.value.length,da.value=va.value.length,Y.value=!0,console.log("Stats loaded")}catch(a){console.error("Error loading stats:",a),Y.value=!0}},{isRefreshing:re,hasUpdates:ce,forceRefresh:le}=ca(se,{loadOnMount:!1,interval:15e3,onStatsUpdated:()=>{console.log("[Dashboard] Stats atualizados automaticamente")},debug:!1}),de=async()=>{try{const a=await fetch("/api/checklists/active",sa.getFetchConfig()),e=await a.json();e.success&&(ua.value=e.checklists)}catch(a){console.error("Erro ao carregar checklists ativos:",a)}},pe=async()=>{try{const a=await fetch("/api/machines/available",sa.getFetchConfig()),e=await a.json();e.success&&(fa.value=e.machines)}catch(a){console.error("Erro ao carregar mÃ¡quinas disponÃ­veis:",a)}},ue=async()=>{try{const a=await fetch("/api/machines",sa.getFetchConfig());if(!a.ok)return console.warn(`Failed to load machines: ${a.status}`),void(va.value=[]);const e=await a.json();e.success&&e.machines?va.value=e.machines:va.value=[]}catch(a){console.error("Erro ao carregar mÃ¡quinas:",a),va.value=[]}},fe=async a=>{try{await Promise.all([wa(),le()]);const a=await $.create({message:"Dados atualizados",duration:1500,color:"success",position:"top"});await a.present()}catch(e){console.error("Error refreshing:",e)}finally{a.target.complete()}},ve=async()=>{const a=await _.create({header:"Confirmar SaÃ­da",message:"Deseja realmente sair do aplicativo?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Sair",role:"confirm",handler:async()=>{try{await L.execute();const a=await $.create({message:"Logout realizado com sucesso",duration:2e3,color:"success",position:"top"});await a.present(),e.replace("/login")}catch(a){console.error("Logout error:",a),e.replace("/login")}}}]});await a.present()},ge=()=>{console.log("Navigating to new checklist..."),e.push("/checklist/new")},me=()=>{console.log("Navigating to patients..."),e.push("/patients")},be=()=>{console.log("Navigating to profile..."),e.push("/profile")},he=()=>{console.log("Navigating to active checklists..."),e.push("/checklists")},xe=()=>{e.push("/machines")},we=()=>{e.push("/machines-overview")},ke=()=>{console.log("Navigating to cleaning controls..."),e.push("/cleaning-controls")},ye=a=>{e.push(`/checklist/${a.id}`)},ze=async a=>{const t=await _.create({header:"Pausar Checklist",message:`Deseja pausar o checklist da mÃ¡quina ${a.machine.name}?`,buttons:[{text:"Cancelar",role:"cancel"},{text:"Pausar",handler:async()=>{try{const t=await fetch(`/api/checklists/${a.id}/pause`,{method:"POST",...sa.getFetchConfig()}),o=await t.json();if(!t.ok)throw new Error(o.message||"Erro ao pausar checklist");if(o.success){const a=await $.create({message:"Checklist pausado com sucesso.",duration:2e3,color:"success"});await a.present(),await se(),"/mobile/dashboard"!==e.currentRoute.value.path&&e.push("/mobile/dashboard")}}catch(t){console.error("Error pausing checklist:",t);const a=await $.create({message:t.message||"Erro ao pausar checklist.",duration:3e3,color:"danger"});await a.present()}}}]});await t.present()},_e=async a=>{try{const t=await fetch(`/api/checklists/${a.id}/resume`,{method:"POST",...sa.getFetchConfig()}),o=await t.json();if(!t.ok)throw new Error(o.message||"Erro ao retomar checklist");if(o.success){const t=await $.create({message:"Checklist retomado com sucesso.",duration:2e3,color:"success"});await t.present(),await se(),e.push(`/mobile/checklist/${a.id}`)}}catch(t){console.error("Error resuming checklist:",t);const a=await $.create({message:t.message||"Erro ao retomar checklist.",duration:3e3,color:"danger"});await a.present()}},Ce=async()=>{N();const a=await $.create({message:`Modo ${F.value?"escuro":"claro"} ativado`,duration:1500,color:"medium",position:"bottom"});await a.present()},$e=()=>{H.value=navigator.onLine};return b(async()=>{console.log("Dashboard mounted, loading data..."),pa.value=!0;try{await wa(),se(),window.addEventListener("online",$e),window.addEventListener("offline",$e)}catch(a){console.error("Dashboard initialization error:",a)}finally{pa.value=!1}}),(a,e)=>(n(),v(p(C),null,{default:l(()=>[r(p(T),null,{default:l(()=>[r(p(j),{color:"primary"},{default:l(()=>[r(p(S),null,{default:l(()=>[...e[0]||(e[0]=[d("HemodiÃ¡lise Mobile",-1)])]),_:1}),r(p(P),{slot:"end"},{default:l(()=>[r(p(z),{onClick:Ce,fill:"clear",class:"theme-toggle-btn"},{default:l(()=>[r(p(y),{icon:p(F)?p(B):p(G),slot:"icon-only"},null,8,["icon"])]),_:1}),r(p(z),{onClick:ve,fill:"clear"},{default:l(()=>[r(p(y),{icon:p(J),slot:"icon-only"},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),r(p(I),{fullscreen:!0,class:"dashboard-content"},{default:l(()=>[r(p(U),{slot:"fixed",onIonRefresh:fe},{default:l(()=>[r(p(q))]),_:1}),s("div",$a,[O.value?(n(),i("div",Ea,[s("div",Da,[s("div",ja,[s("h1",{onClick:be,class:"user-name-link"},"OlÃ¡, "+c(O.value.name.split(" ")[0])+"! ðŸ‘‹",1)])]),s("div",Sa,[ga.value.length<=1?(n(),i("div",Pa,[r(p(y),{icon:p(K),class:"unit-icon-static"},null,8,["icon"]),s("div",Ta,[e[1]||(e[1]=s("span",{class:"unit-label-static"},"Unidade",-1)),s("span",Ua,c(ma.value?.name||O.value.unit?.name||"Carregando..."),1)])])):(n(),i("div",qa,[r(p(y),{icon:p(K),class:"unit-icon"},null,8,["icon"]),s("div",Aa,[e[2]||(e[2]=s("span",{class:"unit-label"},"Unidade Atual",-1)),s("span",Ma,c(ma.value?.name||O.value.unit?.name||"Carregando..."),1)]),r(p(z),{fill:"clear",size:"small",onClick:ya,class:"unit-change-btn"},{default:l(()=>[r(p(y),{slot:"icon-only",icon:p(Q)},null,8,["icon"])]),_:1})]))])])):f("",!0),Y.value?(n(),i("div",Ia,[p(ce)||p(re)?(n(),i("div",La,[r(p(A),{color:"success",class:"update-chip"},{default:l(()=>[r(p(y),{icon:p(re)?p(V):p(W),class:g({spinning:p(re)})},null,8,["icon","class"]),r(p(M),null,{default:l(()=>[d(c(p(re)?"Atualizando...":"Atualizado"),1)]),_:1})]),_:1})])):f("",!0),s("div",{class:"stat-card available",onClick:xe},[s("div",Fa,[r(p(y),{icon:p(X)},null,8,["icon"])]),s("div",Ra,[s("div",Na,c(xa.value),1),e[3]||(e[3]=s("div",{class:"stat-label"},"DisponÃ­veis",-1))])]),s("div",{class:"stat-card active",onClick:he},[s("div",Oa,[r(p(y),{icon:p(R)},null,8,["icon"])]),s("div",Ha,[s("div",Ya,c(ha.value),1),e[4]||(e[4]=s("div",{class:"stat-label"},"Em Andamento",-1))])]),s("div",{class:"stat-card total",onClick:we},[s("div",Ba,[r(p(y),{icon:p(Z)},null,8,["icon"])]),s("div",Ga,[s("div",Ja,c(da.value),1),e[5]||(e[5]=s("div",{class:"stat-label"},"Total MÃ¡quinas",-1))])])])):f("",!0),s("div",Ka,[s("button",{class:"primary-btn",onClick:ge},[r(p(y),{icon:p(aa)},null,8,["icon"]),e[6]||(e[6]=s("div",{class:"btn-text"},[s("span",{class:"btn-title"},"Novo Checklist"),s("span",{class:"btn-subtitle"},"Iniciar verificaÃ§Ã£o de seguranÃ§a")],-1)),xa.value>0?(n(),v(p(k),{key:0,color:"success"},{default:l(()=>[d(c(xa.value),1)]),_:1})):f("",!0)])]),s("div",Qa,[e[11]||(e[11]=s("h2",{class:"section-title"},"Acesso RÃ¡pido",-1)),s("div",Va,[ha.value>0?(n(),i("div",{key:0,class:"action-btn",onClick:he},[s("div",Wa,[r(p(y),{icon:p(R)},null,8,["icon"])]),s("div",Xa,[e[7]||(e[7]=s("span",{class:"action-title"},"Checklists Ativos",-1)),s("span",Za,c(ha.value)+" em andamento",1)]),r(p(y),{icon:p(ea),class:"chevron"},null,8,["icon"])])):f("",!0),s("div",{class:"action-btn",onClick:xe},[s("div",ae,[r(p(y),{icon:p(X)},null,8,["icon"])]),e[8]||(e[8]=s("div",{class:"action-content"},[s("span",{class:"action-title"},"MÃ¡quinas"),s("span",{class:"action-subtitle"},"Status e controle")],-1)),r(p(y),{icon:p(ea),class:"chevron"},null,8,["icon"])]),s("div",{class:"action-btn",onClick:ke},[s("div",ee,[r(p(y),{icon:p(ta)},null,8,["icon"])]),e[9]||(e[9]=s("div",{class:"action-content"},[s("span",{class:"action-title"},"Controle de Limpeza"),s("span",{class:"action-subtitle"},"Limpeza e desinfecÃ§Ã£o")],-1)),r(p(y),{icon:p(ea),class:"chevron"},null,8,["icon"])]),s("div",{class:"action-btn",onClick:me},[s("div",te,[r(p(y),{icon:p(oa)},null,8,["icon"])]),e[10]||(e[10]=s("div",{class:"action-content"},[s("span",{class:"action-title"},"Pacientes"),s("span",{class:"action-subtitle"},"Buscar e gerenciar")],-1)),r(p(y),{icon:p(ea),class:"chevron"},null,8,["icon"])])])]),ua.value.length>0?(n(),i("div",oe,[e[12]||(e[12]=s("h2",{class:"section-title"},"Em Andamento",-1)),s("div",ie,[(n(!0),i(x,null,w(ua.value,a=>(n(),v(Ca,{key:a.id,checklist:a,onContinue:ye,onPause:ze,onResume:_e},null,8,["checklist"]))),128))])])):f("",!0),s("div",ne,[r(p(A),{color:H.value?"success":"danger",class:"status-chip"},{default:l(()=>[r(p(y),{icon:p(ia)},null,8,["icon"]),r(p(M),null,{default:l(()=>[d(c(H.value?"Online":"Offline"),1)]),_:1})]),_:1},8,["color"])])])]),_:1})]),_:1}))}}),[["__scopeId","data-v-8bfaead3"]]))}}});
