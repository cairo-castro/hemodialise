System.register(["./vendor-legacy-X-yEH-Kx.js","./ionic-legacy-Bcx0Tl_t.js","./_plugin-vue_export-helper-legacy-Du2wO1NW.js","./main-legacy-CDStiije.js"],function(a,e){"use strict";var t,i,o,n,r,s,l,c,d,u,p,f,b,v,m,g,h,x,y,k,_,w,C,z,E,P,A,I,S,j,D,q,N,T,V,M,B,O,R,$,F,L,H,U,J,K,Y,G,W,Q,X,Z,aa,ea,ta,ia,oa,na,ra,sa,la,ca,da,ua,pa,fa,ba,va,ma,ga,ha,xa;return{setters:[a=>{t=a.d,i=a.n,o=a.q,n=a.t,r=a.J,s=a.G,l=a.K,c=a.v,d=a.y,u=a.B,p=a.H,f=a.r,b=a.c,v=a.b,m=a.o,g=a.e,h=a.x,x=a.u,y=a.w,k=a.D,_=a.F,w=a.L,C=a.z},a=>{z=a.g,E=a.A,P=a.e,A=a.t,I=a.m,S=a.o,j=a.x,D=a.n,q=a.p,N=a.B,T=a.C,V=a.k,M=a.f,B=a.s,O=a.u,R=a.D,$=a.E,F=a.i,L=a.F,H=a.G,U=a.w,J=a.l},a=>{K=a.y,Y=a.B,G=a.C,W=a.D,Q=a.E,X=a._,Z=a.F,aa=a.t,ea=a.G,ta=a.H,ia=a.I,oa=a.J,na=a.m,ra=a.g,sa=a.K,la=a.h,ca=a.L,da=a.f,ua=a.M,pa=a.N,fa=a.d,ba=a.O,va=a.P,ma=a.Q,ga=a.r},a=>{ha=a.C,xa=a.A}],execute:function(){var e=document.createElement("style");e.textContent='.checklist-item-card[data-v-2f4d60a9]{background:#fff;border-radius:16px;padding:20px;margin-bottom:16px;border:2px solid #e5e7eb;box-shadow:0 1px 3px rgba(0,0,0,.05);transition:all .3s cubic-bezier(.4,0,.2,1)}.checklist-item-card.has-value[data-v-2f4d60a9]{border-color:#d1d5db;box-shadow:0 4px 12px rgba(0,0,0,.08)}.checklist-item-card.is-conforme[data-v-2f4d60a9]{border-color:#10b981;background:linear-gradient(to bottom,#fff,#ecfdf5)}.checklist-item-card.is-nao-conforme[data-v-2f4d60a9]{border-color:#ef4444;background:linear-gradient(to bottom,#fff,#fef2f2)}.checklist-item-card.is-nao-aplica[data-v-2f4d60a9]{border-color:#6b7280;background:linear-gradient(to bottom,#fff,#f9fafb)}.item-card-header[data-v-2f4d60a9]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:20px;padding-bottom:16px;border-bottom:1px solid #e5e7eb}.header-content[data-v-2f4d60a9]{flex:1;margin-right:12px}.item-card-title[data-v-2f4d60a9]{font-size:17px;font-weight:600;color:#111827;margin:0 0 6px;line-height:1.4}.item-card-description[data-v-2f4d60a9]{font-size:14px;color:#6b7280;margin:0;line-height:1.5}.header-badge[data-v-2f4d60a9]{flex-shrink:0}.status-badge[data-v-2f4d60a9]{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;box-shadow:0 2px 8px rgba(0,0,0,.1);animation:badgePop-2f4d60a9 .3s cubic-bezier(.34,1.56,.64,1)}@keyframes badgePop-2f4d60a9{0%{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}.status-badge.c[data-v-2f4d60a9]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.status-badge.nc[data-v-2f4d60a9]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff}.status-badge.na[data-v-2f4d60a9]{background:linear-gradient(135deg,#6b7280,#4b5563);color:#fff}.status-actions[data-v-2f4d60a9]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:0}@media (max-width: 768px){.status-actions[data-v-2f4d60a9]{grid-template-columns:1fr}}.action-status-btn[data-v-2f4d60a9]{background:#fff;border:2px solid #e5e7eb;border-radius:14px;padding:16px;display:flex;align-items:center;gap:14px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;text-align:left}.action-status-btn[data-v-2f4d60a9]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,rgba(255,255,255,.8) 0%,transparent 100%);opacity:0;transition:opacity .3s ease}.action-status-btn[data-v-2f4d60a9]:hover:before{opacity:1}.action-status-btn[data-v-2f4d60a9]:hover{transform:translateY(-2px);box-shadow:0 8px 16px rgba(0,0,0,.12);border-color:#d1d5db}.action-status-btn[data-v-2f4d60a9]:active{transform:translateY(0);box-shadow:0 2px 4px rgba(0,0,0,.1)}.action-status-btn.conforme.selected[data-v-2f4d60a9]{border-color:#10b981;background:linear-gradient(135deg,#ecfdf5,#d1fae5);box-shadow:0 4px 12px rgba(16,185,129,.25)}.action-status-btn.nao-conforme.selected[data-v-2f4d60a9]{border-color:#ef4444;background:linear-gradient(135deg,#fef2f2,#fee2e2);box-shadow:0 4px 12px rgba(239,68,68,.25)}.action-status-btn.nao-aplica.selected[data-v-2f4d60a9]{border-color:#6b7280;background:linear-gradient(135deg,#f9fafb,#f3f4f6);box-shadow:0 4px 12px rgba(107,114,128,.25)}.action-status-icon[data-v-2f4d60a9]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;flex-shrink:0;transition:all .3s ease}.action-status-icon.success[data-v-2f4d60a9]{background:linear-gradient(135deg,#d1fae5,#a7f3d0);color:#059669}.action-status-btn.conforme.selected .action-status-icon.success[data-v-2f4d60a9]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;transform:scale(1.1)}.action-status-icon.danger[data-v-2f4d60a9]{background:linear-gradient(135deg,#fee2e2,#fecaca);color:#dc2626}.action-status-btn.nao-conforme.selected .action-status-icon.danger[data-v-2f4d60a9]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;transform:scale(1.1)}.action-status-icon.neutral[data-v-2f4d60a9]{background:linear-gradient(135deg,#f3f4f6,#e5e7eb);color:#4b5563}.action-status-btn.nao-aplica.selected .action-status-icon.neutral[data-v-2f4d60a9]{background:linear-gradient(135deg,#6b7280,#4b5563);color:#fff;transform:scale(1.1)}.action-status-content[data-v-2f4d60a9]{flex:1;display:flex;flex-direction:column;gap:2px}.action-status-label[data-v-2f4d60a9]{font-size:15px;font-weight:600;color:#111827;line-height:1.3}.action-status-hint[data-v-2f4d60a9]{font-size:12px;color:#9ca3af;font-weight:500}.action-status-btn.selected .action-status-label[data-v-2f4d60a9]{color:#111827}.action-status-btn.conforme.selected .action-status-hint[data-v-2f4d60a9]{color:#059669}.action-status-btn.nao-conforme.selected .action-status-hint[data-v-2f4d60a9]{color:#dc2626}.action-status-btn.nao-aplica.selected .action-status-hint[data-v-2f4d60a9]{color:#4b5563}.selected-check[data-v-2f4d60a9]{font-size:24px;flex-shrink:0;animation:checkPop-2f4d60a9 .4s cubic-bezier(.34,1.56,.64,1)}@keyframes checkPop-2f4d60a9{0%{transform:scale(0) rotate(-180deg);opacity:0}to{transform:scale(1) rotate(0);opacity:1}}.action-status-btn.conforme.selected .selected-check[data-v-2f4d60a9]{color:#059669}.action-status-btn.nao-conforme.selected .selected-check[data-v-2f4d60a9]{color:#dc2626}.action-status-btn.nao-aplica.selected .selected-check[data-v-2f4d60a9]{color:#4b5563}.observation-card[data-v-2f4d60a9]{margin-top:16px;padding:16px;background:linear-gradient(135deg,#fef2f2,#fee2e2);border:2px solid #ef4444;border-radius:12px;animation:slideDown-2f4d60a9 .4s cubic-bezier(.34,1.56,.64,1)}@keyframes slideDown-2f4d60a9{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.observation-label[data-v-2f4d60a9]{display:flex;align-items:center;gap:8px;font-size:14px;font-weight:600;color:#dc2626;margin-bottom:12px}.observation-label ion-icon[data-v-2f4d60a9]{font-size:20px}.observation-textarea[data-v-2f4d60a9]{width:100%;padding:12px;border:2px solid #fca5a5;border-radius:8px;font-size:14px;font-family:inherit;line-height:1.5;background:#fff;color:#111827;resize:vertical;transition:all .3s ease}.observation-textarea[data-v-2f4d60a9]:focus{outline:none;border-color:#ef4444;box-shadow:0 0 0 3px rgba(239,68,68,.1)}.observation-textarea[data-v-2f4d60a9]::placeholder{color:#9ca3af;font-style:italic}@media (max-width: 768px){.checklist-item-card[data-v-2f4d60a9]{padding:16px}.item-card-title[data-v-2f4d60a9]{font-size:16px}.action-status-btn[data-v-2f4d60a9]{padding:14px}.action-status-icon[data-v-2f4d60a9]{width:44px;height:44px;font-size:22px}}.checklist-container[data-v-1005af6b]{padding:0;max-width:100%;background:#f9fafb;min-height:100vh}.time-header-card[data-v-1005af6b]{background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-primary-shade) 100%);color:#fff;margin:0;border-radius:0}.time-display[data-v-1005af6b]{display:flex;justify-content:space-between;align-items:center}.current-date[data-v-1005af6b],.current-time[data-v-1005af6b]{display:flex;align-items:center;gap:.5rem;font-weight:600}.date-icon[data-v-1005af6b],.time-icon[data-v-1005af6b]{font-size:1.2rem}.section[data-v-1005af6b]{padding:0 16px;margin-top:24px}.section-title[data-v-1005af6b]{font-size:1.1rem;font-weight:700;color:#1f2937;margin:0 0 12px;display:flex;align-items:center;gap:8px}.section-title ion-icon[data-v-1005af6b]{font-size:1.3rem;color:var(--ion-color-primary)}.search-card[data-v-1005af6b]{background:#fff;border:2px solid #e5e7eb;border-radius:12px;padding:16px}.search-input-wrapper[data-v-1005af6b]{position:relative;display:flex;align-items:center;gap:12px;padding:12px 16px;background:#f9fafb;border:2px solid #e5e7eb;border-radius:12px;transition:all .2s ease}.search-input-wrapper[data-v-1005af6b]:focus-within{background:#fff;border-color:var(--ion-color-primary)}.search-icon[data-v-1005af6b]{font-size:1.5rem;color:#9ca3af;flex-shrink:0}.search-input[data-v-1005af6b]{flex:1;border:none;outline:none;background:transparent;font-size:1rem;color:#1f2937}.search-input[data-v-1005af6b]::placeholder{color:#9ca3af}.search-results[data-v-1005af6b]{margin-top:12px;display:flex;flex-direction:column;gap:8px;max-height:400px;overflow-y:auto}.action-btn[data-v-1005af6b]{display:flex;align-items:center;gap:12px;background:#fff;border:2px solid #e5e7eb;border-radius:12px;padding:16px;cursor:pointer;transition:all .2s ease}.action-btn[data-v-1005af6b]:active{transform:scale(.98);border-color:var(--ion-color-primary)}.action-btn.selected[data-v-1005af6b]{border-color:var(--ion-color-success);background:#f0fdf4}.action-icon[data-v-1005af6b]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.action-icon ion-icon[data-v-1005af6b]{font-size:1.8rem;color:#fff}.action-icon.primary[data-v-1005af6b]{background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-primary-shade) 100%)}.action-icon.success[data-v-1005af6b]{background:linear-gradient(135deg,var(--ion-color-success) 0%,var(--ion-color-success-shade) 100%)}.action-content[data-v-1005af6b]{display:flex;flex-direction:column;gap:4px;flex:1}.action-title[data-v-1005af6b]{font-size:1rem;font-weight:600;color:#1f2937}.action-subtitle[data-v-1005af6b]{font-size:.85rem;color:#6b7280}.chevron[data-v-1005af6b]{font-size:1.2rem;color:#9ca3af;flex-shrink:0}.no-results[data-v-1005af6b]{text-align:center;padding:32px 16px}.no-results-icon[data-v-1005af6b]{font-size:4rem;color:#f59e0b;margin-bottom:16px}.no-results h3[data-v-1005af6b]{margin:0 0 8px;font-size:1.2rem;font-weight:700;color:#1f2937}.no-results p[data-v-1005af6b]{margin:0 0 24px;font-size:.95rem;color:#6b7280}.register-btn[data-v-1005af6b]{--border-radius: 12px;height:48px;font-weight:600}.search-loading[data-v-1005af6b]{display:flex;flex-direction:column;align-items:center;gap:12px;padding:32px 16px}.search-loading p[data-v-1005af6b]{margin:0;font-size:.95rem;color:#6b7280}.patient-selected[data-v-1005af6b]{margin-top:12px}.selection-card[data-v-1005af6b]{background:#fff;border:2px solid #e5e7eb;border-radius:12px;padding:16px}.availability-badge[data-v-1005af6b]{display:flex;align-items:center;gap:12px;padding:14px 16px;border-radius:12px;margin-bottom:16px;border:2px solid;transition:all .3s ease}.availability-badge.good[data-v-1005af6b]{background:linear-gradient(135deg,#ecfdf5,#d1fae5);border-color:#10b981}.availability-badge.alert[data-v-1005af6b]{background:linear-gradient(135deg,#fef3c7,#fde68a);border-color:#f59e0b}.availability-badge.warning[data-v-1005af6b]{background:linear-gradient(135deg,#ffedd5,#fed7aa);border-color:#f97316}.availability-badge.critical[data-v-1005af6b]{background:linear-gradient(135deg,#fef2f2,#fee2e2);border-color:#ef4444}.availability-icon[data-v-1005af6b]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:24px;flex-shrink:0}.availability-badge.good .availability-icon[data-v-1005af6b]{background:#10b981;color:#fff}.availability-badge.alert .availability-icon[data-v-1005af6b]{background:#f59e0b;color:#fff}.availability-badge.warning .availability-icon[data-v-1005af6b]{background:#f97316;color:#fff}.availability-badge.critical .availability-icon[data-v-1005af6b]{background:#ef4444;color:#fff}.availability-info[data-v-1005af6b]{flex:1;display:flex;flex-direction:column;gap:2px}.availability-label[data-v-1005af6b]{font-size:15px;font-weight:600;color:#111827}.availability-count[data-v-1005af6b]{font-size:13px;color:#6b7280;font-weight:500}.form-group[data-v-1005af6b]{margin-bottom:20px}.form-group[data-v-1005af6b]:last-child{margin-bottom:0}.input-label[data-v-1005af6b]{display:flex;align-items:center;gap:8px;margin-bottom:8px;font-size:.95rem;font-weight:600;color:#1f2937}.input-label ion-icon[data-v-1005af6b]{font-size:1.2rem;color:var(--ion-color-primary)}.select-input[data-v-1005af6b]{--border-radius: 12px;--background: #f9fafb;--border-width: 2px;--border-color: #e5e7eb;--padding-start: 16px;--padding-end: 16px}.select-input[data-v-1005af6b]:focus-within{--background: white;--border-color: var(--ion-color-primary)}.machine-grid[data-v-1005af6b]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px;margin-top:12px}.machine-card[data-v-1005af6b]{position:relative;display:flex;flex-direction:column;align-items:center;gap:12px;padding:20px 16px;background:#fff;border:3px solid #e5e7eb;border-radius:16px;cursor:pointer;transition:all .3s ease;min-height:140px}.machine-card[data-v-1005af6b]:active{transform:scale(.97)}.machine-card.selected[data-v-1005af6b]{border-color:var(--ion-color-primary);background:linear-gradient(135deg,rgba(var(--ion-color-primary-rgb),.1),rgba(var(--ion-color-primary-rgb),.05));box-shadow:0 4px 12px rgba(var(--ion-color-primary-rgb),.2)}.machine-icon[data-v-1005af6b]{width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,#f3f4f6,#e5e7eb);display:flex;align-items:center;justify-content:center;transition:all .3s ease}.machine-card.selected .machine-icon[data-v-1005af6b]{background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-primary-shade) 100%)}.machine-icon ion-icon[data-v-1005af6b]{font-size:2rem;color:#6b7280;transition:all .3s ease}.machine-card.selected .machine-icon ion-icon[data-v-1005af6b]{color:#fff}.machine-info[data-v-1005af6b]{display:flex;flex-direction:column;align-items:center;gap:4px;flex:1}.machine-name[data-v-1005af6b]{font-size:1rem;font-weight:700;color:#1f2937;text-align:center}.machine-status[data-v-1005af6b]{font-size:.75rem;color:#10b981;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.machine-check[data-v-1005af6b]{position:absolute;top:8px;right:8px}.machine-check ion-icon[data-v-1005af6b]{font-size:1.5rem;color:var(--ion-color-primary)}.shift-selector[data-v-1005af6b]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}@media (min-width: 640px){.shift-selector[data-v-1005af6b]{grid-template-columns:repeat(4,1fr)}}.shift-btn[data-v-1005af6b]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:16px 12px;background:#fff;border:3px solid #e5e7eb;border-radius:16px;cursor:pointer;transition:all .3s ease;font-size:.85rem;font-weight:600;color:#6b7280;position:relative}.shift-btn ion-icon[data-v-1005af6b]{font-size:2rem;color:#9ca3af;transition:all .3s ease}.shift-btn span[data-v-1005af6b]:first-of-type{font-size:.9rem;font-weight:700}.shift-time[data-v-1005af6b]{font-size:.7rem;color:#9ca3af;font-weight:500}.shift-btn.active[data-v-1005af6b]{border-color:var(--ion-color-primary);background:linear-gradient(135deg,rgba(var(--ion-color-primary-rgb),.1),rgba(var(--ion-color-primary-rgb),.05));color:var(--ion-color-primary);box-shadow:0 4px 12px rgba(var(--ion-color-primary-rgb),.2)}.shift-btn.active ion-icon[data-v-1005af6b]{color:var(--ion-color-primary)}.shift-btn.active .shift-time[data-v-1005af6b]{color:var(--ion-color-primary)}.shift-btn[data-v-1005af6b]:active{transform:scale(.95)}.primary-action[data-v-1005af6b]{padding:0 16px;margin-top:24px;margin-bottom:24px}.primary-btn[data-v-1005af6b]{width:100%;display:flex;align-items:center;gap:16px;background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-primary-shade) 100%);border:none;border-radius:16px;padding:20px 24px;cursor:pointer;transition:all .2s ease;box-shadow:0 4px 12px rgba(var(--ion-color-primary-rgb),.3)}.primary-btn[data-v-1005af6b]:disabled{opacity:.5;cursor:not-allowed}.primary-btn[data-v-1005af6b]:active:not(:disabled){transform:scale(.98)}.primary-btn>ion-icon[data-v-1005af6b]:first-child{font-size:2rem;color:#fff;flex-shrink:0}.btn-text[data-v-1005af6b]{display:flex;flex-direction:column;gap:4px;text-align:left;flex:1}.btn-title[data-v-1005af6b]{font-size:1.1rem;font-weight:700;color:#fff}.btn-subtitle[data-v-1005af6b]{font-size:.85rem;color:rgba(255,255,255,.9)}.primary-btn>ion-icon[data-v-1005af6b]:last-child{font-size:1.5rem;color:#fff;flex-shrink:0}.checklist-phase-card[data-v-1005af6b],.phase-progress-card[data-v-1005af6b],.patient-summary-card[data-v-1005af6b],.interrupted-card[data-v-1005af6b],.completed-card[data-v-1005af6b]{margin:16px;border-radius:16px;box-shadow:0 2px 8px rgba(0,0,0,.08);overflow:hidden}.phase-header[data-v-1005af6b]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.phase-header h3[data-v-1005af6b]{margin:0;font-size:1.3rem;font-weight:700}.progress-steps[data-v-1005af6b]{display:flex;justify-content:space-between;margin:1rem 0}.step[data-v-1005af6b]{display:flex;flex-direction:column;align-items:center;gap:.5rem;flex:1}.step-circle[data-v-1005af6b]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--ion-color-light);color:var(--ion-color-medium);font-weight:700;transition:all .3s ease}.step.active .step-circle[data-v-1005af6b]{background:var(--ion-color-primary);color:#fff}.step.completed .step-circle[data-v-1005af6b]{background:var(--ion-color-success);color:#fff}.step.interrupted .step-circle[data-v-1005af6b]{background:var(--ion-color-danger);color:#fff}.step-label[data-v-1005af6b]{font-size:.75rem;text-align:center;font-weight:500;color:var(--ion-color-medium)}.step.active .step-label[data-v-1005af6b]{color:var(--ion-color-primary);font-weight:600}.phase-completion[data-v-1005af6b]{margin-top:1rem}.phase-completion p[data-v-1005af6b]{text-align:center;margin-top:.5rem;font-weight:600;color:var(--ion-color-dark)}.patient-summary[data-v-1005af6b]{display:flex;justify-content:space-between;align-items:center}.patient-details h4[data-v-1005af6b]{margin:0;font-weight:600}.patient-details p[data-v-1005af6b]{margin:.25rem 0 0;color:var(--ion-color-medium);font-size:.875rem}.session-time p[data-v-1005af6b]{margin:0;font-size:.875rem;color:var(--ion-color-primary);font-weight:500}.checklist-items[data-v-1005af6b]{margin-bottom:1.5rem}.checklist-item[data-v-1005af6b]{--border-color: var(--ion-color-light);--padding: 16px 0;margin-bottom:12px;border-radius:8px;transition:all .3s ease}.checklist-item.completed[data-v-1005af6b]{--background: var(--ion-color-success-tint);--border-color: var(--ion-color-success)}.checklist-label h3[data-v-1005af6b]{margin:0;font-size:1rem;font-weight:600;color:var(--ion-color-dark)}.checklist-label p[data-v-1005af6b]{margin:.25rem 0 0;font-size:.875rem;color:var(--ion-color-medium)}.completed-icon[data-v-1005af6b]{font-size:1.5rem}.action-buttons[data-v-1005af6b]{display:flex;flex-direction:column;gap:12px;margin-top:1.5rem}.interrupt-button[data-v-1005af6b]{--border-color: var(--ion-color-danger);--color: var(--ion-color-danger)}.advance-button[data-v-1005af6b]{font-size:1.1rem;font-weight:700}.interrupted-content[data-v-1005af6b],.completed-content[data-v-1005af6b]{text-align:center;padding:2rem 1rem}.interrupted-icon[data-v-1005af6b],.completed-icon[data-v-1005af6b]{font-size:4rem;margin-bottom:1rem;color:var(--ion-color-danger)}.completed-icon[data-v-1005af6b]{color:var(--ion-color-success)}.interrupted-content h3[data-v-1005af6b],.completed-content h3[data-v-1005af6b]{margin:0 0 1rem;font-size:1.5rem;font-weight:700}.interruption-reason[data-v-1005af6b]{padding:1rem;background:var(--ion-color-light);border-radius:8px;margin:1rem 0;text-align:left}.interrupt-modal-content[data-v-1005af6b]{padding:1rem}.warning-section[data-v-1005af6b]{text-align:center;padding:1rem;margin-bottom:1.5rem;background:var(--ion-color-warning-tint);border-radius:12px;border:2px solid var(--ion-color-warning)}.warning-icon[data-v-1005af6b]{font-size:3rem;color:var(--ion-color-warning);margin-bottom:.5rem}.warning-section h3[data-v-1005af6b]{margin:0 0 .5rem;color:var(--ion-color-warning-shade)}.modal-buttons[data-v-1005af6b]{display:flex;flex-direction:column;gap:12px;margin-top:1.5rem}.form-group[data-v-1005af6b]{margin-bottom:1rem}.return-button[data-v-1005af6b]{margin-top:1rem;font-size:1.1rem;font-weight:600}.phase-section[data-v-1005af6b]{padding:16px}.phase-header-card[data-v-1005af6b]{display:flex;align-items:center;gap:16px;background:#fff;border:2px solid #e5e7eb;border-radius:16px;padding:20px;margin-bottom:20px;box-shadow:0 2px 8px rgba(0,0,0,.06)}.phase-header-icon[data-v-1005af6b]{width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-primary-shade) 100%);display:flex;align-items:center;justify-content:center;flex-shrink:0}.phase-header-icon ion-icon[data-v-1005af6b]{font-size:2rem;color:#fff}.phase-header-content[data-v-1005af6b]{flex:1}.phase-header-content h3[data-v-1005af6b]{margin:0 0 4px;font-size:1.2rem;font-weight:700;color:#1f2937}.phase-header-content p[data-v-1005af6b]{margin:0;font-size:.9rem;color:#6b7280}.phase-header-badge[data-v-1005af6b]{flex-shrink:0}.phase-header-badge ion-chip[data-v-1005af6b]{font-weight:700;font-size:1rem}.checklist-items-grid[data-v-1005af6b]{display:flex;flex-direction:column;gap:12px;margin-bottom:20px}.observations-card[data-v-1005af6b]{background:#fff;border:2px solid #e5e7eb;border-radius:16px;padding:20px;margin-bottom:20px}.card-label[data-v-1005af6b]{display:flex;align-items:center;gap:8px;font-size:.95rem;font-weight:700;color:#1f2937;margin-bottom:12px}.card-label ion-icon[data-v-1005af6b]{font-size:1.3rem;color:var(--ion-color-primary)}.observations-input[data-v-1005af6b]{width:100%;border:2px solid #e5e7eb;border-radius:12px;padding:12px 16px;font-size:.95rem;color:#1f2937;font-family:inherit;resize:vertical;transition:all .2s ease}.observations-input[data-v-1005af6b]:focus{outline:none;border-color:var(--ion-color-primary);background:#f9fafb}.observations-input[data-v-1005af6b]::placeholder{color:#9ca3af}.dashboard-actions[data-v-1005af6b]{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:20px}.action-card[data-v-1005af6b]{display:flex;flex-direction:column;align-items:center;gap:12px;background:#fff;border:3px solid #e5e7eb;border-radius:16px;padding:20px 16px;cursor:pointer;transition:all .2s ease}.action-card[data-v-1005af6b]:active{transform:scale(.95)}.action-card.warning[data-v-1005af6b]{border-color:#fbbf24}.action-card.warning[data-v-1005af6b]:hover{background:#fef3c7}.action-card.danger[data-v-1005af6b]{border-color:#ef4444}.action-card.danger[data-v-1005af6b]:hover{background:#fee2e2}.action-card-icon[data-v-1005af6b]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center}.action-card-icon ion-icon[data-v-1005af6b]{font-size:1.8rem;color:#fff}.action-card-icon.warning[data-v-1005af6b]{background:linear-gradient(135deg,#f59e0b,#d97706)}.action-card-icon.danger[data-v-1005af6b]{background:linear-gradient(135deg,#ef4444,#dc2626)}.action-card-content[data-v-1005af6b]{display:flex;flex-direction:column;align-items:center;gap:4px}.action-card-title[data-v-1005af6b]{font-size:1rem;font-weight:700;color:#1f2937}.action-card-subtitle[data-v-1005af6b]{font-size:.8rem;color:#6b7280}.primary-continue-btn[data-v-1005af6b]{width:100%;display:flex;align-items:center;gap:16px;background:linear-gradient(135deg,var(--ion-color-success) 0%,var(--ion-color-success-shade) 100%);border:none;border-radius:16px;padding:20px 24px;cursor:pointer;transition:all .2s ease;box-shadow:0 4px 12px rgba(var(--ion-color-success-rgb),.3)}.primary-continue-btn[data-v-1005af6b]:active:not(.disabled){transform:scale(.98)}.primary-continue-btn.disabled[data-v-1005af6b]{opacity:.5;cursor:not-allowed;background:linear-gradient(135deg,#9ca3af,#6b7280);box-shadow:0 4px 12px rgba(156,163,175,.3)}.primary-continue-btn>ion-icon[data-v-1005af6b]:first-child{font-size:2rem;color:#fff;flex-shrink:0}.primary-continue-btn>ion-icon[data-v-1005af6b]:last-child{font-size:1.5rem;color:#fff;flex-shrink:0}@media (max-width: 480px){.dashboard-actions[data-v-1005af6b]{grid-template-columns:1fr}.phase-header-card[data-v-1005af6b]{flex-wrap:wrap}.phase-header-badge[data-v-1005af6b]{width:100%;display:flex;justify-content:center;margin-top:8px}}\n',document.head.appendChild(e);const ya={class:"item-card-header"},ka={class:"header-content"},_a={class:"item-card-title"},wa={key:0,class:"item-card-description"},Ca={key:0,class:"header-badge"},za={class:"status-actions"},Ea={class:"action-status-icon success"},Pa={class:"action-status-icon danger"},Aa={class:"action-status-icon neutral"},Ia={key:0,class:"observation-card"},Sa={class:"observation-label"},ja=["value"],Da=t({__name:"ChecklistItem",props:{title:{},description:{default:""},value:{default:null},observation:{default:""},required:{type:Boolean,default:!1}},emits:["update:value","update:observation"],setup(a,{emit:e}){const t=a,f=e,b=a=>{t.value===a?(f("update:value",null),f("update:observation","")):(f("update:value",a),"NC"!==a&&f("update:observation",""))},v=a=>{switch(a){case"C":default:return K;case"NC":return G;case"NA":return W}};return(a,e)=>(o(),i("div",{class:l(["checklist-item-card",{"has-value":null!==a.value,"is-conforme":"C"===a.value,"is-nao-conforme":"NC"===a.value,"is-nao-aplica":"NA"===a.value}])},[n("div",ya,[n("div",ka,[n("h3",_a,s(a.title),1),a.description?(o(),i("p",wa,s(a.description),1)):r("",!0)]),a.value?(o(),i("div",Ca,[n("div",{class:l(["status-badge",a.value.toLowerCase()])},[c(d(z),{icon:v(a.value)},null,8,["icon"])],2)])):r("",!0)]),n("div",za,[n("button",{class:l(["action-status-btn conforme",{selected:"C"===a.value}]),onClick:e[0]||(e[0]=a=>b("C")),type:"button"},[n("div",Ea,[c(d(z),{icon:d(K)},null,8,["icon"])]),e[4]||(e[4]=n("div",{class:"action-status-content"},[n("span",{class:"action-status-label"},"Conforme"),n("span",{class:"action-status-hint"},"Tudo OK")],-1)),"C"===a.value?(o(),u(d(z),{key:0,icon:d(Y),class:"selected-check"},null,8,["icon"])):r("",!0)],2),n("button",{class:l(["action-status-btn nao-conforme",{selected:"NC"===a.value}]),onClick:e[1]||(e[1]=a=>b("NC")),type:"button"},[n("div",Pa,[c(d(z),{icon:d(G)},null,8,["icon"])]),e[5]||(e[5]=n("div",{class:"action-status-content"},[n("span",{class:"action-status-label"},"Não Conforme"),n("span",{class:"action-status-hint"},"Problema")],-1)),"NC"===a.value?(o(),u(d(z),{key:0,icon:d(Y),class:"selected-check"},null,8,["icon"])):r("",!0)],2),n("button",{class:l(["action-status-btn nao-aplica",{selected:"NA"===a.value}]),onClick:e[2]||(e[2]=a=>b("NA")),type:"button"},[n("div",Aa,[c(d(z),{icon:d(W)},null,8,["icon"])]),e[6]||(e[6]=n("div",{class:"action-status-content"},[n("span",{class:"action-status-label"},"Não Aplica"),n("span",{class:"action-status-hint"},"N/A")],-1)),"NA"===a.value?(o(),u(d(z),{key:0,icon:d(Y),class:"selected-check"},null,8,["icon"])):r("",!0)],2)]),"NC"===a.value?(o(),i("div",Ia,[n("label",Sa,[c(d(z),{icon:d(Q)},null,8,["icon"]),e[7]||(e[7]=p(" Descreva o Problema * ",-1))]),n("textarea",{value:a.observation,onInput:e[3]||(e[3]=a=>{return e=a.target.value,void f("update:observation",e);var e}),class:"observation-textarea",rows:"3",placeholder:"Ex: Equipamento apresentando ruído anormal...",required:""},null,40,ja)])):r("",!0)],2))}}),qa=X(Da,[["__scopeId","data-v-2f4d60a9"]]),Na={class:"checklist-container"},Ta={class:"time-display"},Va={class:"current-date"},Ma={class:"current-time"},Ba={key:0,class:"section"},Oa={class:"section-title"},Ra={class:"search-card"},$a={class:"search-input-wrapper"},Fa={key:0,class:"patient-selected"},La={class:"action-btn selected"},Ha={class:"action-icon success"},Ua={class:"action-content"},Ja={class:"action-title"},Ka={class:"action-subtitle"},Ya={key:1,class:"search-results"},Ga=["onClick"],Wa={class:"action-icon primary"},Qa={class:"action-content"},Xa={class:"action-title"},Za={class:"action-subtitle"},ae={key:2,class:"no-results"},ee={key:3,class:"search-loading"},te={key:1,class:"section"},ie={class:"section-title"},oe={class:"selection-card"},ne={class:"availability-icon"},re={class:"availability-info"},se={class:"availability-label"},le={class:"availability-count"},ce={class:"form-group"},de={class:"input-label"},ue={class:"machine-grid"},pe=["onClick"],fe={class:"machine-icon"},be={class:"machine-info"},ve={class:"machine-name"},me={key:0,class:"machine-check"},ge={class:"form-group"},he={class:"input-label"},xe={class:"shift-selector"},ye={class:"primary-action"},ke=["disabled"],_e={key:2},we={class:"phase-header"},Ce={class:"phase-time"},ze={class:"phase-progress"},Ee={class:"progress-steps"},Pe={class:"step-circle"},Ae={key:2},Ie={class:"step-label"},Se={class:"phase-completion"},je={class:"patient-summary"},De={class:"patient-details"},qe={class:"session-time"},Ne={key:0,class:"phase-section"},Te={class:"phase-header-card"},Ve={class:"phase-header-icon"},Me={class:"phase-header-content"},Be={class:"phase-header-badge"},Oe={class:"checklist-items-grid"},Re={class:"observations-card"},$e={class:"card-label"},Fe={class:"dashboard-actions"},Le={class:"action-card-icon warning"},He={class:"action-card-icon danger"},Ue=["disabled"],Je={class:"btn-text"},Ke={class:"btn-title"},Ye={class:"btn-subtitle"},Ge={key:1,class:"interrupted-section"},We={class:"interrupted-content"},Qe={class:"interruption-reason"},Xe={key:2,class:"completed-section"},Ze={class:"completed-content"},at={class:"interrupt-modal-content"},et={class:"warning-section"},tt={class:"form-group"},it={class:"modal-buttons"};a("default",X(t({__name:"ChecklistPage",setup(a){const e=C(),t=x(),W=ha.getInstance();W.getSearchPatientUseCase();const X=W.getMachineRepository(),ya=f(""),ka=f(""),_a=f(!1),wa=f(""),Ca=f(0),za=f("machine-patient"),Ea=f(""),Pa=f([]),Aa=f(!1),Ia=f(null);let Sa;const ja=f(null),Da=f([]),ot=f(null),nt=f(!1),rt=f(null),st=f(null),lt=f(!1),ct=f({machine_id:0,shift:"matutino",observations:"",machine_disinfected:!1,capillary_lines_identified:!1,patient_identification_confirmed:!1,vascular_access_evaluated:!1,vital_signs_checked:!1,medications_reviewed:!1,dialyzer_membrane_checked:!1,equipment_functioning_verified:!1,dialysis_parameters_verified:!1,patient_comfort_assessed:!1,fluid_balance_monitored:!1,alarms_responded:!1,session_completed_safely:!1,vascular_access_secured:!1,patient_vital_signs_stable:!1,equipment_cleaned:!1}),dt=f({}),ut=f({}),pt=["pre_dialysis","during_session","post_dialysis"];let ft;const bt=b(()=>Ia.value&&ct.value.machine_id&&ct.value.shift),vt=b(()=>!!rt.value&&_t().every(a=>{const e=$t(a.key);if(null===e)return!1;if("C"===e||"NA"===e)return!0;if("NC"===e){const e=Ft(a.key);return e&&e.trim().length>0}return!1})),mt=b(()=>!!rt.value&&"post_dialysis"===rt.value.current_phase),gt=a=>({pre_dialysis:"Pré-Diálise",during_session:"Durante a Sessão",post_dialysis:"Pós-Diálise",completed:"Concluído",interrupted:"Interrompido"}[a]||a),ht=a=>({pre_dialysis:"Pré",during_session:"Durante",post_dialysis:"Pós"}[a]||a),xt=a=>({pre_dialysis:"warning",during_session:"primary",post_dialysis:"secondary",completed:"success",interrupted:"danger"}[a]||"medium"),yt=a=>K,kt=a=>{if(!rt.value)return!1;switch(a){case"pre_dialysis":return null!==rt.value.pre_dialysis_completed_at;case"during_session":return null!==rt.value.during_session_completed_at;case"post_dialysis":return null!==rt.value.post_dialysis_completed_at;default:return!1}},_t=()=>({pre_dialysis:[{key:"machine_disinfected",label:"Máquina Desinfetada",description:"Verificar se a máquina foi devidamente desinfetada"},{key:"capillary_lines_identified",label:"Linhas Capilares Identificadas",description:"Identificar e verificar as linhas capilares"},{key:"patient_identification_confirmed",label:"Identificação do Paciente",description:"Confirmar identidade com dois identificadores"},{key:"vascular_access_evaluated",label:"Acesso Vascular Avaliado",description:"Avaliar condições do acesso vascular"},{key:"vital_signs_checked",label:"Sinais Vitais Verificados",description:"Aferir pressão arterial, temperatura e peso"},{key:"medications_reviewed",label:"Medicações Revisadas",description:"Revisar medicações e dosagens prescritas"},{key:"dialyzer_membrane_checked",label:"Membrana do Dialisador Verificada",description:"Verificar integridade da membrana"},{key:"equipment_functioning_verified",label:"Funcionamento dos Equipamentos",description:"Testar funcionamento de todos os equipamentos"}],during_session:[{key:"dialysis_parameters_verified",label:"Parâmetros de Diálise Verificados",description:"Confirmar e ajustar parâmetros de diálise"},{key:"patient_comfort_assessed",label:"Conforto do Paciente Avaliado",description:"Verificar conforto e bem-estar do paciente"},{key:"fluid_balance_monitored",label:"Balanço Hídrico Monitorado",description:"Acompanhar remoção e balanço de fluidos"},{key:"alarms_responded",label:"Resposta a Alarmes",description:"Verificar e responder adequadamente aos alarmes"}],post_dialysis:[{key:"session_completed_safely",label:"Sessão Finalizada com Segurança",description:"Finalizar sessão seguindo protocolos de segurança"},{key:"vascular_access_secured",label:"Acesso Vascular Protegido",description:"Proteger e cuidar do acesso vascular"},{key:"patient_vital_signs_stable",label:"Sinais Vitais Estáveis",description:"Confirmar estabilidade dos sinais vitais"},{key:"equipment_cleaned",label:"Equipamentos Limpos",description:"Limpar e preparar equipamentos para próximo uso"}]}[rt.value?.current_phase]||[]),wt=()=>{const a=new Date;ya.value=a.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),ka.value=a.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},Ct=()=>{Sa&&clearTimeout(Sa),Ea.value.length<3?Pa.value=[]:(Aa.value=!0,Sa=setTimeout(async()=>{await zt()},500))},zt=async()=>{if(Ea.value.length<3)return Pa.value=[],void(Aa.value=!1);try{const a=W.getPatientRepository(),e=await a.quickSearch(Ea.value,10);Pa.value=e}catch(a){console.error("Erro ao buscar pacientes:",a),Pa.value=[]}finally{Aa.value=!1}},Et=()=>{Ia.value=null,Ea.value="",Pa.value=[]},Pt=()=>{localStorage.setItem("patient_search_query",Ea.value),e.push("/patients/new")},At=async()=>{if(nt.value)return void(za.value="pre-dialysis");if(!(await Vt()).canCreate)return;const a=await U.create({message:"Iniciando checklist...",spinner:"crescent"});await a.present();try{const a=await fetch("/api/checklists",{method:"POST",headers:xa.getAuthHeaders(),body:JSON.stringify({patient_id:Ia.value?.id,machine_id:ct.value.machine_id,shift:ct.value.shift,observations:ct.value.observations})}),e=await a.json();if(!a.ok||!e.success){const a=e.message||e.errors?.machine_id?.[0]||"Erro ao iniciar checklist";throw new Error(a)}{rt.value=e.checklist,ja.value=Da.value.find(a=>a.id===ct.value.machine_id)||null,Nt();const a=e.resumed?"Checklist existente carregado!":"Novo checklist iniciado com sucesso!",t=await A.create({message:a,duration:2e3,color:"success",position:"top"});await t.present()}}catch(e){const a=await A.create({message:e.message||"Erro ao iniciar checklist",duration:3e3,color:"danger",position:"top"});await a.present()}finally{await a.dismiss()}},It=async()=>{if(!vt.value)return;const a=await U.create({message:"Avançando para próxima fase...",spinner:"crescent"});await a.present();try{await St();const a=await fetch(`/api/checklists/${rt.value.id}/advance`,{method:"POST",headers:{"Content-Type":"application/json",...xa.getAuthHeaders()}}),e=await a.json();if(!e.success)throw new Error(e.message||"Erro ao avançar fase");{rt.value=e.checklist,Nt();const a=await A.create({message:e.message,duration:2e3,color:"success",position:"top"});await a.present()}}catch(e){const a=await A.create({message:e.message||"Erro ao avançar fase",duration:3e3,color:"danger",position:"top"});await a.present()}finally{await a.dismiss()}},St=async()=>{if(rt.value)try{const a={},e={};_t().forEach(t=>{const i=$t(t.key),o=Ft(t.key);let n=!1;("C"===i||"NA"===i||"NC"===i&&o&&o.trim().length>0)&&(n=!0),a[t.key]=n,o&&o.trim().length>0&&(e[t.key]=o)});const t=await fetch(`/api/checklists/${rt.value.id}/phase`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({phase_data:a,observations:ct.value.observations,item_observations:e})});if(!t.ok)throw new Error("Erro ao salvar dados");const i=await t.json();i.success&&(Ca.value=i.phase_completion)}catch(a){console.error("Erro no updatePhaseData:",a)}},jt=async()=>{const a=await U.create({message:"Interrompendo checklist...",spinner:"crescent"});await a.present();try{const a=await fetch(`/api/checklists/${rt.value.id}/interrupt`,{method:"POST",headers:xa.getAuthHeaders(),body:JSON.stringify({reason:wa.value})}),e=await a.json();if(!e.success)throw new Error(e.message||"Erro ao interromper checklist");{rt.value=e.checklist,_a.value=!1;const a=await A.create({message:"Checklist interrompido com sucesso.",duration:3e3,color:"warning",position:"top"});await a.present()}}catch(e){const a=await A.create({message:e.message||"Erro ao interromper checklist",duration:3e3,color:"danger",position:"top"});await a.present()}finally{await a.dismiss()}},Dt=()=>{e.replace("/dashboard")},qt=async()=>{if(!rt.value)return;const a=await U.create({message:"Pausando checklist..."});await a.present();try{const a=await fetch(`/api/checklists/${rt.value.id}/pause`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),t=await a.json();if(!t.success)throw new Error(t.message||"Erro ao pausar checklist");{const a=await A.create({message:"Checklist pausado com sucesso. Você pode retomá-lo a qualquer momento.",duration:3e3,color:"success",position:"top"});await a.present(),e.replace("/dashboard")}}catch(t){console.error("Erro ao pausar checklist:",t);const a=await A.create({message:"Erro ao pausar checklist. Tente novamente.",duration:3e3,color:"danger",position:"top"});await a.present()}finally{await a.dismiss()}},Nt=()=>{const a=_t(),e=a.filter(a=>null!==$t(a.key)).length;Ca.value=a.length>0?e/a.length*100:0},Tt=async()=>{try{lt.value=!0;const a=await fetch("/api/machines/availability",{headers:xa.getAuthHeaders()});if(a.ok){const e=await a.json();st.value=e.availability}}catch(a){console.error("Error fetching machine availability:",a)}finally{lt.value=!1}},Vt=async()=>{if(await Tt(),!st.value)return{canCreate:!0};const{available:a,overall_status:e,message:t}=st.value;if(0===a){const a=await J.create({header:"Máquinas Indisponíveis",message:t||"Não há máquinas disponíveis no momento. Por favor, aguarde até que uma máquina fique livre.",buttons:["OK"]});return await a.present(),{canCreate:!1}}if("warning"===e||"alert"===e){const e=await J.create({header:"Atenção",message:`${t}. Apenas ${a} máquina(s) disponível(is). Deseja continuar?`,buttons:[{text:"Cancelar",role:"cancel"},{text:"Continuar",role:"confirm"}]});await e.present();const{role:i}=await e.onDidDismiss();return{canCreate:"confirm"===i}}return{canCreate:!0}},Mt=async()=>{if(ot.value)try{(await fetch(`/api/checklists/${ot.value}/resume`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Accept:"application/json"}})).ok&&console.log("Checklist retomado com sucesso")}catch(a){console.error("Erro ao retomar checklist:",a)}},Bt=a=>{Object.keys(ct.value).forEach(e=>{void 0!==a[e]&&(ct.value[e]=a[e])}),a.item_observations&&(ut.value={...a.item_observations}),_t().forEach(e=>{const t=a[e.key];void 0!==t&&(!0===t?dt.value[e.key]="C":!1===t&&ut.value[e.key]&&(dt.value[e.key]="NC"))})},Ot=a=>new Date(a).toLocaleDateString("pt-BR"),Rt=a=>new Date(a).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),$t=a=>dt.value[a]||null,Ft=a=>ut.value[a]||"";let Lt=null;const Ht=()=>{const a=localStorage.getItem("return_to_checklist"),e=localStorage.getItem("new_patient_id");console.log("🔍 Verificando retorno - return_to_checklist:",a,"new_patient_id:",e),"true"===a&&e&&(console.log("🎯 Detectado retorno de cadastro, carregando paciente..."),(async a=>{try{console.log("🔄 Carregando paciente ID:",a);const e=W.getPatientRepository(),t=await e.getById(a);if(t){console.log("✅ Paciente carregado:",t),Ia.value=t,Ea.value=t.full_name,Pa.value=[];const a=await A.create({message:`Paciente ${t.full_name} selecionado!`,duration:2e3,color:"success",position:"top"});await a.present()}}catch(e){console.error("❌ Erro ao carregar paciente:",e);const a=await A.create({message:"Erro ao carregar paciente cadastrado",duration:3e3,color:"danger",position:"top"});await a.present()}})(parseInt(e)),localStorage.removeItem("return_to_checklist"),localStorage.removeItem("new_patient_id"),localStorage.removeItem("patient_search_query"))};return E(()=>{console.log("🚀 onIonViewWillEnter - Página sendo exibida"),Ht()}),v(()=>t.path,a=>{console.log("🔄 Rota mudou para:",a),"/checklist/new"===a&&(console.log("📍 Detectado retorno para /checklist/new via watch"),setTimeout(Ht,100))}),m(()=>{console.log("🏁 onMounted - Página montada"),(async()=>{try{Da.value=await X.getAvailable(),await Tt()}catch(a){console.error("Error loading machines:",a)}})(),(async()=>{const a=t.params.id;if(a&&"new"!==a)try{const e=await fetch(`/api/checklists/${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,Accept:"application/json"}});if(e.ok){const a=await e.json();switch(rt.value=a,ot.value=a.id,nt.value=!0,ja.value=a.machine,Ia.value=a.patient,a.current_phase){case"pre_dialysis":default:za.value="pre-dialysis";break;case"during_session":za.value="during-session";break;case"post_dialysis":za.value="post-dialysis"}a.paused_at&&!a.resumed_at&&await Mt(),Bt(a),Nt(),console.log("Checklist carregado:",a)}}catch(e){console.error("Erro ao carregar checklist:",e)}})(),wt(),ft=setInterval(wt,1e3),Ht()}),g(()=>{ft&&clearInterval(ft)}),(a,e)=>(o(),u(d(P),null,{default:h(()=>[c(d(q),{translucent:!0},{default:h(()=>[c(d(I),{color:"primary"},{default:h(()=>[c(d(S),{slot:"start"},{default:h(()=>[c(d(j),{"default-href":"/dashboard"})]),_:1}),c(d(D),null,{default:h(()=>[...e[11]||(e[11]=[p("Checklist de Segurança",-1)])]),_:1})]),_:1})]),_:1}),c(d(F),{fullscreen:!0},{default:h(()=>{return[n("div",Na,[c(d(N),{class:"time-header-card"},{default:h(()=>[c(d(T),null,{default:h(()=>[n("div",Ta,[n("div",Va,[c(d(z),{icon:d(Z),class:"date-icon"},null,8,["icon"]),p(" "+s(ka.value),1)]),n("div",Ma,[c(d(z),{icon:d(aa),class:"time-icon"},null,8,["icon"]),p(" "+s(ya.value),1)])])]),_:1})]),_:1}),rt.value?r("",!0):(o(),i("div",Ba,[n("h2",Oa,[c(d(z),{icon:d(ea)},null,8,["icon"]),e[12]||(e[12]=p(" Etapa 1: Buscar Paciente ",-1))]),n("div",Ra,[n("div",$a,[c(d(z),{icon:d(ta),class:"search-icon"},null,8,["icon"]),y(n("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>Ea.value=a),type:"text",placeholder:"Digite o nome do paciente...",class:"search-input",onInput:Ct},null,544),[[k,Ea.value]])]),Ia.value?(o(),i("div",Fa,[n("div",La,[n("div",Ha,[c(d(z),{icon:d(K)},null,8,["icon"])]),n("div",Ua,[n("span",Ja,s(Ia.value.full_name),1),n("span",Ka,s(Ot(Ia.value.birth_date))+" • "+s(Ia.value.age)+" anos ",1)]),c(d(V),{fill:"clear",onClick:Et},{default:h(()=>[c(d(z),{icon:d(ia),slot:"icon-only"},null,8,["icon"])]),_:1})])])):Pa.value.length>0&&Ea.value.length>0?(o(),i("div",Ya,[(o(!0),i(_,null,w(Pa.value,a=>(o(),i("div",{key:a.id,class:"action-btn",onClick:e=>(a=>{Ia.value=a,Ea.value=a.full_name,Pa.value=[]})(a)},[n("div",Wa,[c(d(z),{icon:d(ea)},null,8,["icon"])]),n("div",Qa,[n("span",Xa,s(a.full_name),1),n("span",Za,s(Ot(a.birth_date))+" • "+s(a.age)+" anos ",1)]),c(d(z),{icon:d(ga),class:"chevron"},null,8,["icon"])],8,Ga))),128))])):Ea.value.length>2&&0===Pa.value.length&&!Aa.value?(o(),i("div",ae,[c(d(z),{icon:d(Q),class:"no-results-icon"},null,8,["icon"]),e[14]||(e[14]=n("h3",null,"Paciente não encontrado",-1)),e[15]||(e[15]=n("p",null,"Não encontramos nenhum paciente com esse nome.",-1)),c(d(V),{expand:"block",onClick:Pt,class:"register-btn"},{default:h(()=>[c(d(z),{icon:d(ea),slot:"start"},null,8,["icon"]),e[13]||(e[13]=p(" Cadastrar Novo Paciente ",-1))]),_:1})])):r("",!0),Aa.value?(o(),i("div",ee,[c(d(M),{name:"crescent"}),e[16]||(e[16]=n("p",null,"Buscando...",-1))])):r("",!0)])])),Ia.value&&!rt.value?(o(),i("div",te,[n("h2",ie,[c(d(z),{icon:d(oa)},null,8,["icon"]),e[17]||(e[17]=p(" Etapa 2: Máquina e Turno ",-1))]),n("div",oe,[st.value?(o(),i("div",{key:0,class:l(["availability-badge",st.value.overall_status])},[n("div",ne,["good"===st.value.overall_status?(o(),u(d(z),{key:0,icon:d(K)},null,8,["icon"])):"critical"===st.value.overall_status?(o(),u(d(z),{key:1,icon:d(G)},null,8,["icon"])):(o(),u(d(z),{key:2,icon:d(Q)},null,8,["icon"]))]),n("div",re,[n("span",se,s(st.value.message),1),n("span",le,s(st.value.available)+" de "+s(st.value.total)+" disponíveis",1)])],2)):r("",!0),n("div",ce,[n("label",de,[c(d(z),{icon:d(na)},null,8,["icon"]),e[18]||(e[18]=p(" Selecione a Máquina ",-1))]),n("div",ue,[(o(!0),i(_,null,w(Da.value,a=>(o(),i("button",{key:a.id,type:"button",class:l(["machine-card",{selected:ct.value.machine_id===a.id}]),onClick:e=>ct.value.machine_id=a.id},[n("div",fe,[c(d(z),{icon:d(oa)},null,8,["icon"])]),n("div",be,[n("span",ve,s(a.name),1),e[19]||(e[19]=n("span",{class:"machine-status"},"Disponível",-1))]),ct.value.machine_id===a.id?(o(),i("div",me,[c(d(z),{icon:d(K)},null,8,["icon"])])):r("",!0)],10,pe))),128))])]),n("div",ge,[n("label",he,[c(d(z),{icon:d(aa)},null,8,["icon"]),e[20]||(e[20]=p(" Selecione o Turno ",-1))]),n("div",xe,[n("button",{type:"button",class:l(["shift-btn",{active:"matutino"===ct.value.shift}]),onClick:e[1]||(e[1]=a=>ct.value.shift="matutino")},[c(d(z),{icon:d(ra)},null,8,["icon"]),e[21]||(e[21]=n("span",null,"Matutino",-1)),e[22]||(e[22]=n("span",{class:"shift-time"},"06:00 - 12:00",-1))],2),n("button",{type:"button",class:l(["shift-btn",{active:"vespertino"===ct.value.shift}]),onClick:e[2]||(e[2]=a=>ct.value.shift="vespertino")},[c(d(z),{icon:d(sa)},null,8,["icon"]),e[23]||(e[23]=n("span",null,"Vespertino",-1)),e[24]||(e[24]=n("span",{class:"shift-time"},"12:00 - 18:00",-1))],2),n("button",{type:"button",class:l(["shift-btn",{active:"noturno"===ct.value.shift}]),onClick:e[3]||(e[3]=a=>ct.value.shift="noturno")},[c(d(z),{icon:d(la)},null,8,["icon"]),e[25]||(e[25]=n("span",null,"Noturno",-1)),e[26]||(e[26]=n("span",{class:"shift-time"},"18:00 - 00:00",-1))],2),n("button",{type:"button",class:l(["shift-btn",{active:"madrugada"===ct.value.shift}]),onClick:e[4]||(e[4]=a=>ct.value.shift="madrugada")},[c(d(z),{icon:d(ca)},null,8,["icon"]),e[27]||(e[27]=n("span",null,"Madrugada",-1)),e[28]||(e[28]=n("span",{class:"shift-time"},"00:00 - 06:00",-1))],2)])])]),n("div",ye,[n("button",{class:"primary-btn",onClick:At,disabled:!bt.value},[c(d(z),{icon:d(da)},null,8,["icon"]),e[29]||(e[29]=n("div",{class:"btn-text"},[n("span",{class:"btn-title"},"Iniciar Checklist"),n("span",{class:"btn-subtitle"},"Começar verificação de segurança")],-1)),c(d(z),{icon:d(ua)},null,8,["icon"])],8,ke)])])):r("",!0),rt.value?(o(),i("div",_e,[c(d(N),{class:"phase-progress-card"},{default:h(()=>[c(d(T),null,{default:h(()=>[n("div",we,[n("h3",null,s(gt(rt.value.current_phase)),1),n("div",Ce,[c(d(B),{color:xt(rt.value.current_phase)},{default:h(()=>[c(d(z),{icon:yt(rt.value.current_phase)},null,8,["icon"]),c(d(O),null,{default:h(()=>{return[p(s((a=rt.value.current_phase,{pre_dialysis:"Preparando",during_session:"Em Andamento",post_dialysis:"Finalizando",completed:"Concluído",interrupted:"Interrompido"}[a]||a)),1)];var a}),_:1})]),_:1},8,["color"])])]),n("div",ze,[n("div",Ee,[(o(),i(_,null,w(pt,a=>{return n("div",{class:l(["step",{active:a===rt.value.current_phase,completed:kt(a),interrupted:rt.value.is_interrupted}]),key:a},[n("div",Pe,[kt(a)?(o(),u(d(z),{key:0,icon:d(Y)},null,8,["icon"])):rt.value.is_interrupted?(o(),u(d(z),{key:1,icon:d(ia)},null,8,["icon"])):(o(),i("span",Ae,s((e=a,{pre_dialysis:"1",during_session:"2",post_dialysis:"3"}[e]||"")),1))]),n("span",Ie,s(ht(a)),1)],2);var e}),64))])]),n("div",Se,[c(d(R),{value:Ca.value/100,color:100===Ca.value?"success":"primary"},null,8,["value","color"]),n("p",null,s(Math.round(Ca.value))+"% concluído",1)])]),_:1})]),_:1}),c(d(N),{class:"patient-summary-card"},{default:h(()=>[c(d(T),null,{default:h(()=>[n("div",je,[n("div",De,[n("h4",null,s(Ia.value.full_name),1),n("p",null,s(ja.value?.name)+" • Turno "+s(rt.value.shift),1)]),n("div",qe,[n("p",null,"Iniciado às "+s(Rt(rt.value.pre_dialysis_started_at)),1)])])]),_:1})]),_:1}),rt.value.is_interrupted?(o(),i("div",Ge,[c(d(N),{class:"interrupted-card"},{default:h(()=>[c(d(T),null,{default:h(()=>[n("div",We,[c(d(z),{icon:d(Q),class:"interrupted-icon"},null,8,["icon"]),e[35]||(e[35]=n("h3",null,"Checklist Interrompido",-1)),n("p",null,"O checklist foi interrompido em "+s(Rt(rt.value.interrupted_at)),1),n("p",Qe,[e[33]||(e[33]=n("strong",null,"Motivo:",-1)),p(" "+s(rt.value.interruption_reason),1)]),c(d(V),{expand:"block",color:"primary",onClick:Dt,class:"return-button"},{default:h(()=>[c(d(z),{icon:d(va),slot:"start"},null,8,["icon"]),e[34]||(e[34]=p(" Retornar ao Dashboard ",-1))]),_:1})])]),_:1})]),_:1})])):(o(),i("div",Ne,[n("div",Te,[n("div",Ve,[c(d(z),{icon:yt(rt.value.current_phase)},null,8,["icon"])]),n("div",Me,[n("h3",null,s(gt(rt.value.current_phase)),1),n("p",null,s((a=rt.value.current_phase,{pre_dialysis:"Verificações de segurança antes de iniciar a sessão de diálise",during_session:"Monitoramento contínuo durante o procedimento",post_dialysis:"Finalização segura da sessão e limpeza dos equipamentos"}[a]||"")),1)]),n("div",Be,[c(d(B),{color:xt(rt.value.current_phase)},{default:h(()=>[p(s(Math.round(Ca.value))+"% ",1)]),_:1},8,["color"])])]),n("div",Oe,[(o(!0),i(_,null,w(_t(),a=>(o(),u(qa,{key:a.key,title:a.label,description:a.description,value:$t(a.key),observation:Ft(a.key),"onUpdate:value":e=>{return t=a.key,i=e,dt.value[t]=i,ct.value[t]="C"===i,Nt(),void(rt.value&&St());var t,i},"onUpdate:observation":e=>{return t=a.key,i=e,ut.value[t]=i,Lt&&clearTimeout(Lt),void(Lt=setTimeout(()=>{rt.value&&St()},1e3));var t,i}},null,8,["title","description","value","observation","onUpdate:value","onUpdate:observation"]))),128))]),n("div",Re,[n("label",$e,[c(d(z),{icon:d(pa)},null,8,["icon"]),e[30]||(e[30]=p(" Observações Adicionais ",-1))]),y(n("textarea",{"onUpdate:modelValue":e[5]||(e[5]=a=>ct.value.observations=a),class:"observations-input",rows:"4",placeholder:"Digite observações sobre esta fase do checklist..."},null,512),[[k,ct.value.observations]])]),n("div",Fe,[n("button",{class:"action-card warning",onClick:qt},[n("div",Le,[c(d(z),{icon:d(fa)},null,8,["icon"])]),e[31]||(e[31]=n("div",{class:"action-card-content"},[n("span",{class:"action-card-title"},"Pausar"),n("span",{class:"action-card-subtitle"},"Voltar depois")],-1))]),n("button",{class:"action-card danger",onClick:e[6]||(e[6]=a=>_a.value=!0)},[n("div",He,[c(d(z),{icon:d(ba)},null,8,["icon"])]),e[32]||(e[32]=n("div",{class:"action-card-content"},[n("span",{class:"action-card-title"},"Interromper"),n("span",{class:"action-card-subtitle"},"Cancelar processo")],-1))])]),n("button",{class:l(["primary-continue-btn",{disabled:!vt.value}]),disabled:!vt.value,onClick:It},[c(d(z),{icon:d(K)},null,8,["icon"]),n("div",Je,[n("span",Ke,s(mt.value?"Concluir Checklist":"Avançar para Próxima Fase"),1),n("span",Ye,s(vt.value?"Todos os itens verificados":"Complete todos os itens obrigatórios"),1)]),c(d(z),{icon:d(ua)},null,8,["icon"])],10,Ue)])),"completed"===rt.value.current_phase?(o(),i("div",Xe,[c(d(N),{class:"completed-card"},{default:h(()=>[c(d(T),null,{default:h(()=>[n("div",Ze,[c(d(z),{icon:d(K),class:"completed-icon"},null,8,["icon"]),e[37]||(e[37]=n("h3",null,"Checklist Concluído com Sucesso!",-1)),n("p",null,"Todas as fases foram completadas em "+s(Rt(rt.value.post_dialysis_completed_at)),1),c(d(V),{expand:"block",color:"success",onClick:Dt,class:"return-button"},{default:h(()=>[c(d(z),{icon:d(Y),slot:"start"},null,8,["icon"]),e[36]||(e[36]=p(" Finalizar e Retornar ",-1))]),_:1})])]),_:1})]),_:1})])):r("",!0)])):r("",!0)]),c(d($),{"is-open":_a.value,onWillDismiss:e[10]||(e[10]=a=>_a.value=!1)},{default:h(()=>[c(d(q),null,{default:h(()=>[c(d(I),null,{default:h(()=>[c(d(D),null,{default:h(()=>[...e[38]||(e[38]=[p("Interromper Checklist",-1)])]),_:1}),c(d(S),{slot:"end"},{default:h(()=>[c(d(V),{onClick:e[7]||(e[7]=a=>_a.value=!1)},{default:h(()=>[c(d(z),{icon:d(ia)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),c(d(F),null,{default:h(()=>[n("div",at,[n("div",et,[c(d(z),{icon:d(ma),class:"warning-icon"},null,8,["icon"]),e[39]||(e[39]=n("h3",null,"Atenção!",-1)),e[40]||(e[40]=n("p",null,"Você está prestes a interromper o checklist de segurança. Esta ação deve ser usada apenas em casos de emergência ou intercorrências médicas.",-1))]),n("div",tt,[c(d(L),{fill:"outline",class:"patient-input"},{default:h(()=>[c(d(O),{position:"floating"},{default:h(()=>[...e[41]||(e[41]=[p("Motivo da Interrupção",-1)])]),_:1}),c(d(H),{modelValue:wa.value,"onUpdate:modelValue":e[8]||(e[8]=a=>wa.value=a),rows:4,placeholder:"Descreva o motivo da interrupção (obrigatório)",required:""},null,8,["modelValue"])]),_:1})]),n("div",it,[c(d(V),{expand:"block",fill:"outline",color:"medium",onClick:e[9]||(e[9]=a=>_a.value=!1)},{default:h(()=>[...e[42]||(e[42]=[p(" Cancelar ",-1)])]),_:1}),c(d(V),{expand:"block",color:"danger",disabled:!wa.value.trim(),onClick:jt},{default:h(()=>[c(d(z),{icon:d(ba),slot:"start"},null,8,["icon"]),e[43]||(e[43]=p(" Confirmar Interrupção ",-1))]),_:1},8,["disabled"])])])]),_:1})]),_:1},8,["is-open"])];var a}),_:1})]),_:1}))}}),[["__scopeId","data-v-1005af6b"]]))}}});
