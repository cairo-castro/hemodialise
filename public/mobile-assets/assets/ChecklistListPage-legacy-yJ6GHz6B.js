System.register(["./vendor-legacy-DlkPr0jj.js","./ionic-legacy-uAFUVFYq.js","./_plugin-vue_export-helper-legacy-B7gxhGwx.js","./main-legacy-CcdLw2FA.js","./useStatsAutoRefresh-legacy-CqTqRqS5.js"],function(a,e){"use strict";var t,i,n,o,s,r,c,l,d,p,u,g,v,h,m,x,f,b,y,w,k,_,z,C,j,$,I,A,D,P,S,E,T,M,R,U,B,q,N,O,L,F,H,Y,G,J,K,Q;return{setters:[a=>{t=a.d,i=a.r,n=a.c,o=a.o,s=a.B,r=a.q,c=a.x,l=a.y,d=a.v,p=a.H,u=a.t,g=a.n,v=a.J,h=a.G,m=a.K,x=a.F,f=a.L,b=a.z,y=a.C},a=>{w=a.e,k=a.o,_=a.q,z=a.x,C=a.p,j=a.k,$=a.g,I=a.r,A=a.s,D=a.u,P=a.f,S=a.y,E=a.z,T=a.i,M=a.l,R=a.n,U=a.t},a=>{B=a.y,q=a.z,N=a.t,O=a.r,L=a.A,F=a.m,H=a.p,Y=a.f,G=a.B,J=a._},a=>{K=a.C},a=>{Q=a.u}],execute:function(){var e=document.createElement("style");e.textContent=".header-gradient[data-v-0ab4a798]{background:var(--ion-card-background);padding:24px 20px;position:relative;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.08);border-bottom:2px solid var(--ion-color-step-150)}.header-content[data-v-0ab4a798]{position:relative;z-index:2}.unit-info h2[data-v-0ab4a798]{margin:0 0 8px;font-size:24px;font-weight:700;color:var(--ion-text-color)}.unit-info p[data-v-0ab4a798]{margin:0;font-size:16px;color:var(--ion-color-step-600);font-weight:500}.status-indicators[data-v-0ab4a798]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-top:16px}.status-item[data-v-0ab4a798]{display:flex;align-items:center;gap:1rem;padding:1.25rem;background:var(--ion-card-background);border-radius:16px;box-shadow:0 2px 12px rgba(0,0,0,.08);transition:transform .2s ease,box-shadow .2s ease;border-left:4px solid transparent}.status-item[data-v-0ab4a798]:active{transform:translateY(-2px);box-shadow:0 4px 16px rgba(0,0,0,.12)}.status-item ion-icon[data-v-0ab4a798]{font-size:2.5rem;flex-shrink:0}.status-item span[data-v-0ab4a798]{color:var(--ion-text-color);font-size:.75rem;line-height:1.2;font-weight:500;flex:1}.status-item.available[data-v-0ab4a798]{border-left-color:var(--color-available)}.status-item.available ion-icon[data-v-0ab4a798]{color:var(--color-available)}.status-item.occupied[data-v-0ab4a798]{border-left-color:var(--color-occupied)}.status-item.occupied ion-icon[data-v-0ab4a798]{color:var(--color-occupied)}.status-item.updating[data-v-0ab4a798]{animation:pulse-0ab4a798 1.5s ease-in-out infinite}@keyframes pulse-0ab4a798{0%,to{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(.98)}}.content-container[data-v-0ab4a798]{padding:0 16px 100px}.checklists-section[data-v-0ab4a798]{margin-top:16px}.checklist-card[data-v-0ab4a798]{background:var(--ion-card-background);border-radius:16px;margin-bottom:16px;box-shadow:0 4px 12px rgba(0,0,0,.1);overflow:hidden;cursor:pointer;transition:all .3s ease;position:relative}.checklist-card[data-v-0ab4a798]:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.15)}.card-content[data-v-0ab4a798]{padding:20px;display:flex;justify-content:space-between;align-items:center}.checklist-info[data-v-0ab4a798]{flex:1;display:flex;flex-direction:column;gap:16px}.machine-section[data-v-0ab4a798]{display:flex;align-items:center;gap:12px}.machine-icon[data-v-0ab4a798]{width:40px;height:40px;background:rgba(var(--ion-color-primary-rgb),.1);border-radius:12px;display:flex;align-items:center;justify-content:center}.machine-icon ion-icon[data-v-0ab4a798]{font-size:20px;color:var(--ion-color-primary)}.machine-details h3[data-v-0ab4a798]{margin:0 0 4px;font-size:18px;font-weight:600;color:var(--ion-text-color)}.machine-id[data-v-0ab4a798]{margin:0;font-size:14px;color:var(--ion-color-step-600);font-family:Courier New,monospace}.patient-section[data-v-0ab4a798]{display:flex;align-items:center;gap:12px}.patient-icon[data-v-0ab4a798]{width:32px;height:32px;background:rgba(var(--ion-color-success-rgb),.1);border-radius:10px;display:flex;align-items:center;justify-content:center}.patient-icon ion-icon[data-v-0ab4a798]{font-size:16px;color:var(--ion-color-success)}.patient-details h4[data-v-0ab4a798]{margin:0 0 4px;font-size:16px;font-weight:500;color:var(--ion-text-color)}.phase-info[data-v-0ab4a798]{margin:0;font-size:12px;color:var(--ion-color-step-600);text-transform:uppercase;letter-spacing:.5px}.checklist-actions[data-v-0ab4a798]{display:flex;flex-direction:column;align-items:center;gap:12px;min-width:100px}.status-section[data-v-0ab4a798]{display:flex;flex-direction:column;align-items:center;gap:8px}.progress-circle[data-v-0ab4a798]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:12px;color:#fff;box-shadow:0 2px 8px rgba(0,0,0,.15)}.progress-circle.pre-dialysis[data-v-0ab4a798]{background:var(--ion-color-primary)}.progress-circle.during-session[data-v-0ab4a798]{background:var(--ion-color-warning)}.progress-circle.post-dialysis[data-v-0ab4a798]{background:var(--ion-color-secondary)}.progress-text[data-v-0ab4a798]{font-size:11px;font-weight:600}.time-info[data-v-0ab4a798]{text-align:center}.time-label[data-v-0ab4a798]{font-size:12px;color:var(--ion-color-step-600);font-weight:500}.action-button[data-v-0ab4a798]{--padding-start: 16px;--padding-end: 16px;--height: 32px;font-size:12px;font-weight:600;letter-spacing:.5px;min-width:80px}.pause-btn[data-v-0ab4a798]{--padding-start: 8px;--padding-end: 8px;--height: 32px;min-width:32px}.paused-indicator[data-v-0ab4a798]{background:rgba(var(--ion-color-warning-rgb),.1);border-top:1px solid rgba(var(--ion-color-warning-rgb),.3);padding:8px 20px;display:flex;align-items:center;gap:8px;font-size:12px;color:var(--ion-color-warning)}.paused-indicator ion-icon[data-v-0ab4a798]{font-size:14px}.empty-state[data-v-0ab4a798]{display:flex;align-items:center;justify-content:center;min-height:400px;padding:40px 20px}.empty-content[data-v-0ab4a798]{text-align:center;max-width:280px}.empty-icon[data-v-0ab4a798]{font-size:64px;color:var(--ion-color-step-300);margin-bottom:16px}.empty-content h3[data-v-0ab4a798]{margin:0 0 8px;font-size:20px;color:var(--ion-text-color)}.empty-content p[data-v-0ab4a798]{margin:0 0 24px;font-size:16px;color:var(--ion-color-step-600);line-height:1.5}.start-button[data-v-0ab4a798]{--border-radius: 12px;height:48px;font-weight:600}.loading-state[data-v-0ab4a798]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:var(--ion-color-step-600)}.loading-state p[data-v-0ab4a798]{margin-top:16px;font-size:14px}.add-fab[data-v-0ab4a798]{--box-shadow: 0 8px 24px rgba(0, 123, 255, .3)}@media (max-width: 480px){.header-gradient[data-v-0ab4a798]{padding:20px 16px}.status-indicators[data-v-0ab4a798]{flex-direction:column;gap:12px}.card-content[data-v-0ab4a798]{padding:16px;flex-direction:column;align-items:stretch;gap:16px}.checklist-actions[data-v-0ab4a798]{flex-direction:row;justify-content:space-between;align-items:center;min-width:auto}.status-section[data-v-0ab4a798]{flex-direction:row;gap:12px}.progress-circle[data-v-0ab4a798]{width:40px;height:40px;font-size:10px}}\n",document.head.appendChild(e);const V={class:"header-gradient"},W={class:"header-content"},X={key:0,class:"unit-info"},Z={class:"status-indicators"},aa={class:"content-container"},ea={key:0,class:"checklists-section"},ta=["onClick"],ia={class:"card-content"},na={class:"checklist-info"},oa={class:"machine-section"},sa={class:"machine-icon"},ra={class:"machine-details"},ca={class:"machine-id"},la={class:"patient-section"},da={class:"patient-icon"},pa={class:"patient-details"},ua={class:"phase-info"},ga={class:"checklist-actions"},va={class:"status-section"},ha={class:"progress-text"},ma={class:"time-info"},xa={class:"time-label"},fa={key:0,class:"paused-indicator"},ba={key:1,class:"empty-state"},ya={class:"empty-content"},wa={key:2,class:"loading-state"};a("default",J(t({__name:"ChecklistListPage",setup(a){const e=b(),t=K.getInstance().getCurrentUserUseCase(),J=i(!1),ka=i(null),_a=i([]),za=i([]),Ca=n(()=>za.value.filter(a=>"available"===a.status).length),ja=n(()=>za.value.filter(a=>"occupied"===a.status).length),$a=async()=>{try{const a=await fetch("/api/checklists/active",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),e=await a.json();e.success&&(_a.value=e.checklists)}catch(a){console.error("Erro ao carregar checklists ativos:",a)}},Ia=async()=>{try{const a=await fetch("/api/machines",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json",Accept:"application/json"}});if(!a.ok)return console.warn(`Failed to load machines: ${a.status}`),void(za.value=[]);const e=await a.json();e.success&&e.machines?za.value=e.machines:za.value=[]}catch(a){console.error("Erro ao carregar mÃ¡quinas:",a),za.value=[]}},Aa=async()=>{J.value=!0;try{await Promise.all([$a(),Ia()])}finally{J.value=!1}},{isRefreshing:Da,forceRefresh:Pa}=Q(Aa,{loadOnMount:!1,interval:15e3,onStatsUpdated:()=>{console.log("[ChecklistList] Stats atualizados automaticamente")}}),Sa=async a=>{await Pa(),a.target.complete()},Ea=a=>{e.push(`/checklist/${a.id}`)},Ta=()=>{e.push("/checklist/new")},Ma=a=>({pre_dialysis:"primary",during_session:"warning",post_dialysis:"secondary",completed:"success",interrupted:"danger"}[a]||"medium"),Ra=a=>a.replace("_","-"),Ua=a=>void 0!==a.phase_completion?Math.round(a.phase_completion):{pre_dialysis:25,during_session:50,post_dialysis:75,completed:100,interrupted:0}[a.current_phase]||0,Ba=a=>{const e=new Date(a),t=(new Date).getTime()-e.getTime(),i=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);return i>0?`${i}h ${n}m`:`${n}m`},qa=a=>{const e=new Date(a),t=(new Date).getTime()-e.getTime(),i=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);return i>0?`${i}h ${n}m`:`${n}m`};return o(async()=>{await(async()=>{try{ka.value=await t.execute()}catch(a){console.error("Error loading user:",a)}})(),await Aa()}),(a,e)=>(r(),s(l(w),null,{default:c(()=>[d(l(I),null,{default:c(()=>[d(l(k),{color:"primary"},{default:c(()=>[d(l(_),{slot:"start"},{default:c(()=>[d(l(z),{"default-href":"/dashboard"})]),_:1}),d(l(C),null,{default:c(()=>[...e[0]||(e[0]=[p("Checklists Ativos",-1)])]),_:1}),d(l(_),{slot:"end"},{default:c(()=>[d(l(j),{onClick:Aa,disabled:J.value},{default:c(()=>[d(l($),{icon:l(B)},null,8,["icon"])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),d(l(T),{fullscreen:!0},{default:c(()=>[d(l(A),{slot:"fixed",onIonRefresh:Sa},{default:c(()=>[d(l(D))]),_:1}),u("div",V,[u("div",W,[ka.value?(r(),g("div",X,[u("h2",null,h(ka.value.unit?.name||"Unidade de HemodiÃ¡lise"),1),u("p",null,h(_a.value.length)+" checklist"+h(1!==_a.value.length?"s":"")+" "+h(1===_a.value.length?"ativo":"ativos"),1)])):v("",!0),u("div",Z,[u("div",{class:m(["status-item available",{updating:l(Da)}])},[d(l($),{icon:l(q)},null,8,["icon"]),u("span",null,h(Ca.value)+" DisponÃ­vel"+h(1!==Ca.value?"is":""),1)],2),u("div",{class:m(["status-item occupied",{updating:l(Da)}])},[d(l($),{icon:l(N)},null,8,["icon"]),u("span",null,h(ja.value)+" Em Uso",1)],2)])])]),u("div",aa,[_a.value.length>0?(r(),g("div",ea,[(r(!0),g(x,null,f(_a.value,a=>{return r(),g("div",{key:a.id,class:"checklist-card",onClick:e=>Ea(a)},[u("div",ia,[u("div",na,[u("div",oa,[u("div",sa,[d(l($),{icon:l(F)},null,8,["icon"])]),u("div",ra,[u("h3",null,h(a.machine.name),1),u("p",ca,h(a.machine.identifier),1)])]),u("div",la,[u("div",da,[d(l($),{icon:l(H)},null,8,["icon"])]),u("div",pa,[u("h4",null,h(a.patient.name),1),u("p",ua,h((e=a.current_phase,{pre_dialysis:"PrÃ©-DiÃ¡lise",during_session:"Durante SessÃ£o",post_dialysis:"PÃ³s-DiÃ¡lise",completed:"ConcluÃ­do",interrupted:"Interrompido"}[e]||e)),1)])])]),u("div",ga,[u("div",va,[u("div",{class:m(["progress-circle",Ra(a.current_phase)])},[u("span",ha,h(Ua(a))+"%",1)],2),u("div",ma,[u("span",xa,h(Ba(a.created_at)),1)])]),d(l(j),{color:Ma(a.current_phase),size:"small",class:"action-button",onClick:y(e=>Ea(a),["stop"])},{default:c(()=>[p(h(a.paused_at?"RETOMAR":"CONTINUAR"),1)]),_:2},1032,["color","onClick"]),a.paused_at?v("",!0):(r(),s(l(j),{key:0,fill:"clear",size:"small",color:"medium",onClick:y(e=>(async a=>{const e=await M.create({header:"Pausar Checklist",message:`Deseja pausar o checklist da mÃ¡quina ${a.machine.name}?`,buttons:[{text:"Cancelar",role:"cancel"},{text:"Pausar",handler:async()=>{const e=await R.create({message:"Pausando checklist..."});await e.present();try{const e=await fetch(`/api/checklists/${a.id}/pause`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),t=await e.json();if(!t.success)throw new Error(t.message);{const a=await U.create({message:"Checklist pausado com sucesso.",duration:3e3,color:"success"});await a.present(),await Aa()}}catch(t){const a=await U.create({message:"Erro ao pausar checklist.",duration:3e3,color:"danger"});await a.present()}finally{await e.dismiss()}}}]});await e.present()})(a),["stop"]),class:"pause-btn"},{default:c(()=>[d(l($),{icon:l(Y),slot:"icon-only"},null,8,["icon"])]),_:1},8,["onClick"]))])]),a.paused_at?(r(),g("div",fa,[d(l($),{icon:l(G)},null,8,["icon"]),u("span",null,"Pausado hÃ¡ "+h(qa(a.paused_at)),1)])):v("",!0)],8,ta);var e}),128))])):v("",!0),0!==_a.value.length||J.value?v("",!0):(r(),g("div",ba,[u("div",ya,[d(l($),{icon:l(O),class:"empty-icon"},null,8,["icon"]),e[2]||(e[2]=u("h3",null,"Nenhum checklist ativo",-1)),e[3]||(e[3]=u("p",null,"Inicie um novo checklist de seguranÃ§a para comeÃ§ar.",-1)),d(l(j),{color:"primary",onClick:Ta,class:"start-button"},{default:c(()=>[d(l($),{icon:l(L),slot:"start"},null,8,["icon"]),e[1]||(e[1]=p(" Iniciar Checklist ",-1))]),_:1})])])),J.value?(r(),g("div",wa,[d(l(P),{name:"crescent"}),e[4]||(e[4]=u("p",null,"Carregando checklists...",-1))])):v("",!0)]),d(l(S),{vertical:"bottom",horizontal:"end",slot:"fixed"},{default:c(()=>[d(l(E),{color:"primary",onClick:Ta,class:"add-fab"},{default:c(()=>[d(l($),{icon:l(L)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),[["__scopeId","data-v-0ab4a798"]]))}}});
