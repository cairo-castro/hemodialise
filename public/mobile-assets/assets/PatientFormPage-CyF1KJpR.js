import{d as b,r as w,c as I,o as V,B as C,q as y,x as l,y as a,v as s,H as n,t,C as O,z as x}from"./vendor-DcQkTNkg.js";import{e as B,o as S,q as k,x as P,p as A,r as q,g as d,J as p,K as N,L as r,G as v,i as U,l as T,n as D,t as _}from"./ionic-GHA3wq_y.js";import{I as M,p as H,H as z,U as E,v as F,G,V as K,K as j,r as J,_ as L}from"./_plugin-vue_export-helper-Dt2dLz-X.js";import{C as Q}from"./main-uYwd2XlE.js";const R={class:"welcome-card-dash"},W={class:"patient-avatar-large"},X={class:"input-cards-dash"},Y={class:"input-card-dash"},Z={class:"card-icon-dash primary"},$={class:"card-content-dash"},ee={class:"input-card-dash"},ae={class:"card-icon-dash secondary"},te={class:"card-content-dash"},se={class:"input-card-dash"},oe={class:"card-icon-dash tertiary"},le={class:"card-content-dash"},ne={class:"input-card-dash"},ie={class:"card-icon-dash quaternary"},de={class:"card-content-dash"},re={class:"input-card-dash"},ue={class:"card-icon-dash danger"},ce={class:"card-content-dash"},pe={class:"input-card-dash"},me={class:"card-icon-dash medium"},ve={class:"card-content-dash"},_e={class:"buttons-dash"},fe=["disabled"],ge=b({__name:"PatientFormPage",setup(he){const c=x(),f=Q.getInstance().getCreatePatientUseCase(),o=w({full_name:"",birth_date:"",blood_type:"",medical_record:"",allergies:"",observations:""}),m=I(()=>o.value.full_name.trim().length>0&&o.value.birth_date.length>0),g=async()=>{if(!m.value)return;const u=await D.create({message:"Cadastrando paciente...",spinner:"crescent"});await u.present();try{const e=await f.execute(o.value);if(e){console.log("‚úÖ Paciente criado com sucesso:",e);const i=e.id.toString();localStorage.setItem("new_patient_id",i),localStorage.setItem("return_to_checklist","true"),console.log("üíæ localStorage salvo - new_patient_id:",i),console.log("üíæ localStorage salvo - return_to_checklist: true"),await u.dismiss(),await(await _.create({message:"Paciente cadastrado com sucesso!",duration:2e3,color:"success",position:"top"})).present(),console.log("üîô Voltando para checklist..."),c.replace("/checklist/new")}}catch(e){await u.dismiss(),await(await _.create({message:e.message||"Erro ao cadastrar paciente",duration:3e3,color:"danger",position:"top"})).present()}},h=async()=>{o.value.full_name||o.value.birth_date?await(await T.create({header:"Descartar altera√ß√µes?",message:"Tem certeza que deseja cancelar? Os dados preenchidos ser√£o perdidos.",buttons:[{text:"Continuar Editando",role:"cancel"},{text:"Descartar",role:"destructive",handler:()=>{localStorage.removeItem("patient_search_query"),c.replace("/checklist/new")}}]})).present():(localStorage.removeItem("patient_search_query"),c.replace("/checklist/new"))};return V(()=>{const u=localStorage.getItem("patient_search_query");u&&(o.value.full_name=u)}),(u,e)=>(y(),C(a(B),null,{default:l(()=>[s(a(q),null,{default:l(()=>[s(a(S),{color:"primary"},{default:l(()=>[s(a(k),{slot:"start"},{default:l(()=>[s(a(P),{"default-href":"/checklist/new"})]),_:1}),s(a(A),null,{default:l(()=>[...e[6]||(e[6]=[n("Novo Paciente",-1)])]),_:1})]),_:1})]),_:1}),s(a(U),{class:"modal-content-dash"},{default:l(()=>[t("form",{onSubmit:O(g,["prevent"]),class:"form-dash"},[t("div",R,[t("div",W,[s(a(d),{icon:a(M)},null,8,["icon"])]),e[7]||(e[7]=t("h2",null,"Cadastrar Novo Paciente",-1)),e[8]||(e[8]=t("p",null,"Preencha todas as informa√ß√µes necess√°rias",-1))]),t("div",X,[t("div",Y,[t("div",Z,[s(a(d),{icon:a(H)},null,8,["icon"])]),t("div",$,[e[9]||(e[9]=t("label",null,"Nome Completo",-1)),s(a(p),{modelValue:o.value.full_name,"onUpdate:modelValue":e[0]||(e[0]=i=>o.value.full_name=i),type:"text",required:"",placeholder:"Digite o nome completo",class:"input-dash"},null,8,["modelValue"])])]),t("div",ee,[t("div",ae,[s(a(d),{icon:a(z)},null,8,["icon"])]),t("div",te,[e[10]||(e[10]=t("label",null,"Data de Nascimento",-1)),s(a(p),{modelValue:o.value.birth_date,"onUpdate:modelValue":e[1]||(e[1]=i=>o.value.birth_date=i),type:"date",required:"",class:"input-dash"},null,8,["modelValue"])])]),t("div",se,[t("div",oe,[s(a(d),{icon:a(E)},null,8,["icon"])]),t("div",le,[e[20]||(e[20]=t("label",null,[n("Tipo Sangu√≠neo "),t("span",{class:"optional"},"(opcional)")],-1)),s(a(N),{modelValue:o.value.blood_type,"onUpdate:modelValue":e[2]||(e[2]=i=>o.value.blood_type=i),placeholder:"Selecione o tipo sangu√≠neo",interface:"action-sheet",class:"select-dash"},{default:l(()=>[s(a(r),{value:""},{default:l(()=>[...e[11]||(e[11]=[n("N√£o informado",-1)])]),_:1}),s(a(r),{value:"A+"},{default:l(()=>[...e[12]||(e[12]=[n("A+",-1)])]),_:1}),s(a(r),{value:"A-"},{default:l(()=>[...e[13]||(e[13]=[n("A-",-1)])]),_:1}),s(a(r),{value:"B+"},{default:l(()=>[...e[14]||(e[14]=[n("B+",-1)])]),_:1}),s(a(r),{value:"B-"},{default:l(()=>[...e[15]||(e[15]=[n("B-",-1)])]),_:1}),s(a(r),{value:"AB+"},{default:l(()=>[...e[16]||(e[16]=[n("AB+",-1)])]),_:1}),s(a(r),{value:"AB-"},{default:l(()=>[...e[17]||(e[17]=[n("AB-",-1)])]),_:1}),s(a(r),{value:"O+"},{default:l(()=>[...e[18]||(e[18]=[n("O+",-1)])]),_:1}),s(a(r),{value:"O-"},{default:l(()=>[...e[19]||(e[19]=[n("O-",-1)])]),_:1})]),_:1},8,["modelValue"])])]),t("div",ne,[t("div",ie,[s(a(d),{icon:a(F)},null,8,["icon"])]),t("div",de,[e[21]||(e[21]=t("label",null,[n("Prontu√°rio M√©dico "),t("span",{class:"optional"},"(opcional)")],-1)),s(a(p),{modelValue:o.value.medical_record,"onUpdate:modelValue":e[3]||(e[3]=i=>o.value.medical_record=i),type:"text",placeholder:"N√∫mero do prontu√°rio",class:"input-dash"},null,8,["modelValue"])])]),t("div",re,[t("div",ue,[s(a(d),{icon:a(G)},null,8,["icon"])]),t("div",ce,[e[22]||(e[22]=t("label",null,[n("Alergias "),t("span",{class:"optional"},"(opcional)")],-1)),s(a(v),{modelValue:o.value.allergies,"onUpdate:modelValue":e[4]||(e[4]=i=>o.value.allergies=i),rows:"3",placeholder:"Descreva alergias conhecidas",class:"textarea-dash"},null,8,["modelValue"])])]),t("div",pe,[t("div",me,[s(a(d),{icon:a(K)},null,8,["icon"])]),t("div",ve,[e[23]||(e[23]=t("label",null,[n("Observa√ß√µes M√©dicas "),t("span",{class:"optional"},"(opcional)")],-1)),s(a(v),{modelValue:o.value.observations,"onUpdate:modelValue":e[5]||(e[5]=i=>o.value.observations=i),rows:"4",placeholder:"Observa√ß√µes gerais sobre o paciente",class:"textarea-dash"},null,8,["modelValue"])])])]),t("div",_e,[t("button",{type:"button",class:"btn-cancel-dash",onClick:h},[s(a(d),{icon:a(j)},null,8,["icon"]),e[24]||(e[24]=n(" Cancelar ",-1))]),t("button",{type:"submit",class:"btn-submit-dash",disabled:!m.value},[s(a(d),{icon:a(J)},null,8,["icon"]),e[25]||(e[25]=n(" Cadastrar ",-1))],8,fe)])],32)]),_:1})]),_:1}))}}),Oe=L(ge,[["__scopeId","data-v-cee18d21"]]);export{Oe as default};
