System.register(["./vendor-legacy-CXQ1o16N.js","./ionic-legacy-CQzVRdmB.js","./_plugin-vue_export-helper-legacy-Du2wO1NW.js","./main-legacy-CoaD-sl0.js"],function(e,a){"use strict";var t,i,n,s,o,c,l,r,d,p,u,g,h,f,m,x,v,y,w,b,k,_,z,C,j,$,I,A,D,P,E,T,S,U,M,q,B,N,O,R,F,H,L,Y,G,J,K;return{setters:[e=>{t=e.d,i=e.r,n=e.c,s=e.o,o=e.A,c=e.q,l=e.x,r=e.y,d=e.v,p=e.H,u=e.t,g=e.n,h=e.J,f=e.G,m=e.F,x=e.L,v=e.B,y=e.K,w=e.C},e=>{b=e.e,k=e.m,_=e.o,z=e.x,C=e.n,j=e.k,$=e.g,I=e.p,A=e.q,D=e.r,P=e.f,E=e.y,T=e.z,S=e.i,U=e.l,M=e.w,q=e.t},e=>{B=e.x,N=e.y,O=e.t,R=e.q,F=e.z,H=e.m,L=e.p,Y=e.d,G=e.A,J=e._},e=>{K=e.C}],execute:function(){var a=document.createElement("style");a.textContent='.header-gradient[data-v-a70ea2e7]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:24px 20px;position:relative;overflow:hidden}.header-gradient[data-v-a70ea2e7]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="2" fill="white" opacity="0.05"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>\');pointer-events:none}.header-content[data-v-a70ea2e7]{position:relative;z-index:2}.unit-info h2[data-v-a70ea2e7]{margin:0 0 8px;font-size:24px;font-weight:600}.unit-info p[data-v-a70ea2e7]{margin:0;font-size:16px;opacity:.9}.status-indicators[data-v-a70ea2e7]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-top:16px}.status-item[data-v-a70ea2e7]{display:flex;align-items:center;gap:1rem;padding:1.25rem;background:#fff;border-radius:16px;box-shadow:0 2px 12px rgba(0,0,0,.08);transition:transform .2s ease,box-shadow .2s ease;border-left:4px solid transparent}.status-item[data-v-a70ea2e7]:active{transform:translateY(-2px);box-shadow:0 4px 16px rgba(0,0,0,.12)}.status-item ion-icon[data-v-a70ea2e7]{font-size:2.5rem;flex-shrink:0}.status-item span[data-v-a70ea2e7]{color:#1f2937;font-size:.75rem;line-height:1.2;font-weight:500;flex:1}.status-item.available[data-v-a70ea2e7]{border-left-color:#10b981}.status-item.available ion-icon[data-v-a70ea2e7]{color:#10b981}.status-item.occupied[data-v-a70ea2e7]{border-left-color:#f59e0b}.status-item.occupied ion-icon[data-v-a70ea2e7]{color:#f59e0b}.content-container[data-v-a70ea2e7]{padding:0 16px 100px}.checklists-section[data-v-a70ea2e7]{margin-top:16px}.checklist-card[data-v-a70ea2e7]{background:#fff;border-radius:16px;margin-bottom:16px;box-shadow:0 4px 12px rgba(0,0,0,.1);overflow:hidden;cursor:pointer;transition:all .3s ease;position:relative}.checklist-card[data-v-a70ea2e7]:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.15)}.card-content[data-v-a70ea2e7]{padding:20px;display:flex;justify-content:space-between;align-items:center}.checklist-info[data-v-a70ea2e7]{flex:1;display:flex;flex-direction:column;gap:16px}.machine-section[data-v-a70ea2e7]{display:flex;align-items:center;gap:12px}.machine-icon[data-v-a70ea2e7]{width:40px;height:40px;background:#e3f2fd;border-radius:12px;display:flex;align-items:center;justify-content:center}.machine-icon ion-icon[data-v-a70ea2e7]{font-size:20px;color:#1976d2}.machine-details h3[data-v-a70ea2e7]{margin:0 0 4px;font-size:18px;font-weight:600;color:#2c3e50}.machine-id[data-v-a70ea2e7]{margin:0;font-size:14px;color:#6c757d;font-family:Courier New,monospace}.patient-section[data-v-a70ea2e7]{display:flex;align-items:center;gap:12px}.patient-icon[data-v-a70ea2e7]{width:32px;height:32px;background:#f3e5f5;border-radius:10px;display:flex;align-items:center;justify-content:center}.patient-icon ion-icon[data-v-a70ea2e7]{font-size:16px;color:#7b1fa2}.patient-details h4[data-v-a70ea2e7]{margin:0 0 4px;font-size:16px;font-weight:500;color:#2c3e50}.phase-info[data-v-a70ea2e7]{margin:0;font-size:12px;color:#6c757d;text-transform:uppercase;letter-spacing:.5px}.checklist-actions[data-v-a70ea2e7]{display:flex;flex-direction:column;align-items:center;gap:12px;min-width:100px}.status-section[data-v-a70ea2e7]{display:flex;flex-direction:column;align-items:center;gap:8px}.progress-circle[data-v-a70ea2e7]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:12px;color:#fff;box-shadow:0 2px 8px rgba(0,0,0,.15)}.progress-circle.pre-dialysis[data-v-a70ea2e7]{background:linear-gradient(135deg,#1976d2,#1565c0)}.progress-circle.during-session[data-v-a70ea2e7]{background:linear-gradient(135deg,#f57c00,#ef6c00)}.progress-circle.post-dialysis[data-v-a70ea2e7]{background:linear-gradient(135deg,#7b1fa2,#6a1b9a)}.progress-text[data-v-a70ea2e7]{font-size:11px;font-weight:600}.time-info[data-v-a70ea2e7]{text-align:center}.time-label[data-v-a70ea2e7]{font-size:12px;color:#6c757d;font-weight:500}.action-button[data-v-a70ea2e7]{--padding-start: 16px;--padding-end: 16px;--height: 32px;font-size:12px;font-weight:600;letter-spacing:.5px;min-width:80px}.pause-btn[data-v-a70ea2e7]{--padding-start: 8px;--padding-end: 8px;--height: 32px;min-width:32px}.paused-indicator[data-v-a70ea2e7]{background:#fff3e0;border-top:1px solid #ffe0b2;padding:8px 20px;display:flex;align-items:center;gap:8px;font-size:12px;color:#ef6c00}.paused-indicator ion-icon[data-v-a70ea2e7]{font-size:14px}.empty-state[data-v-a70ea2e7]{display:flex;align-items:center;justify-content:center;min-height:400px;padding:40px 20px}.empty-content[data-v-a70ea2e7]{text-align:center;max-width:280px}.empty-icon[data-v-a70ea2e7]{font-size:64px;color:#dee2e6;margin-bottom:16px}.empty-content h3[data-v-a70ea2e7]{margin:0 0 8px;font-size:20px;color:#495057}.empty-content p[data-v-a70ea2e7]{margin:0 0 24px;font-size:16px;color:#6c757d;line-height:1.5}.start-button[data-v-a70ea2e7]{--border-radius: 12px;height:48px;font-weight:600}.loading-state[data-v-a70ea2e7]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#6c757d}.loading-state p[data-v-a70ea2e7]{margin-top:16px;font-size:14px}.add-fab[data-v-a70ea2e7]{--box-shadow: 0 8px 24px rgba(0, 123, 255, .3)}@media (max-width: 480px){.header-gradient[data-v-a70ea2e7]{padding:20px 16px}.status-indicators[data-v-a70ea2e7]{flex-direction:column;gap:12px}.card-content[data-v-a70ea2e7]{padding:16px;flex-direction:column;align-items:stretch;gap:16px}.checklist-actions[data-v-a70ea2e7]{flex-direction:row;justify-content:space-between;align-items:center;min-width:auto}.status-section[data-v-a70ea2e7]{flex-direction:row;gap:12px}.progress-circle[data-v-a70ea2e7]{width:40px;height:40px;font-size:10px}}\n',document.head.appendChild(a);const Q={class:"header-gradient"},V={class:"header-content"},W={key:0,class:"unit-info"},X={class:"status-indicators"},Z={class:"status-item available"},ee={class:"status-item occupied"},ae={class:"content-container"},te={key:0,class:"checklists-section"},ie=["onClick"],ne={class:"card-content"},se={class:"checklist-info"},oe={class:"machine-section"},ce={class:"machine-icon"},le={class:"machine-details"},re={class:"machine-id"},de={class:"patient-section"},pe={class:"patient-icon"},ue={class:"patient-details"},ge={class:"phase-info"},he={class:"checklist-actions"},fe={class:"status-section"},me={class:"progress-text"},xe={class:"time-info"},ve={class:"time-label"},ye={key:0,class:"paused-indicator"},we={key:1,class:"empty-state"},be={class:"empty-content"},ke={key:2,class:"loading-state"};e("default",J(t({__name:"ChecklistListPage",setup(e){const a=v(),t=K.getInstance().getCurrentUserUseCase(),J=i(!1),_e=i(null),ze=i([]),Ce=i([]),je=n(()=>Ce.value.filter(e=>"available"===e.status).length),$e=n(()=>Ce.value.filter(e=>"occupied"===e.status).length),Ie=async()=>{try{const e=await fetch("/api/checklists/active",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),a=await e.json();a.success&&(ze.value=a.checklists)}catch(e){console.error("Erro ao carregar checklists ativos:",e)}},Ae=async()=>{try{const e=await fetch("/api/machines",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok)return console.warn(`Failed to load machines: ${e.status}`),void(Ce.value=[]);const a=await e.json();a.success&&a.machines?Ce.value=a.machines:Ce.value=[]}catch(e){console.error("Erro ao carregar máquinas:",e),Ce.value=[]}},De=async()=>{J.value=!0;try{await Promise.all([Ie(),Ae()])}finally{J.value=!1}},Pe=async e=>{await De(),e.target.complete()},Ee=e=>{a.push(`/checklist/${e.id}`)},Te=()=>{a.push("/checklist/new")},Se=e=>({pre_dialysis:"primary",during_session:"warning",post_dialysis:"secondary",completed:"success",interrupted:"danger"}[e]||"medium"),Ue=e=>e.replace("_","-"),Me=e=>void 0!==e.phase_completion?Math.round(e.phase_completion):{pre_dialysis:25,during_session:50,post_dialysis:75,completed:100,interrupted:0}[e.current_phase]||0,qe=e=>{const a=new Date(e),t=(new Date).getTime()-a.getTime(),i=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);return i>0?`${i}h ${n}m`:`${n}m`},Be=e=>{const a=new Date(e),t=(new Date).getTime()-a.getTime(),i=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);return i>0?`${i}h ${n}m`:`${n}m`};return s(async()=>{await(async()=>{try{_e.value=await t.execute()}catch(e){console.error("Error loading user:",e)}})(),await De()}),(e,a)=>(c(),o(r(b),null,{default:l(()=>[d(r(I),null,{default:l(()=>[d(r(k),{color:"primary"},{default:l(()=>[d(r(_),{slot:"start"},{default:l(()=>[d(r(z),{"default-href":"/dashboard"})]),_:1}),d(r(C),null,{default:l(()=>[...a[0]||(a[0]=[p("Checklists Ativos",-1)])]),_:1}),d(r(_),{slot:"end"},{default:l(()=>[d(r(j),{onClick:De,disabled:J.value},{default:l(()=>[d(r($),{icon:r(B)},null,8,["icon"])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),d(r(S),{fullscreen:!0},{default:l(()=>[d(r(A),{slot:"fixed",onIonRefresh:Pe},{default:l(()=>[d(r(D))]),_:1}),u("div",Q,[u("div",V,[_e.value?(c(),g("div",W,[u("h2",null,f(_e.value.unit?.name||"Unidade de Hemodiálise"),1),u("p",null,f(ze.value.length)+" checklist"+f(1!==ze.value.length?"s":"")+" "+f(1===ze.value.length?"ativo":"ativos"),1)])):h("",!0),u("div",X,[u("div",Z,[d(r($),{icon:r(N)},null,8,["icon"]),u("span",null,f(je.value)+" Disponível"+f(1!==je.value?"is":""),1)]),u("div",ee,[d(r($),{icon:r(O)},null,8,["icon"]),u("span",null,f($e.value)+" Em Uso",1)])])])]),u("div",ae,[ze.value.length>0?(c(),g("div",te,[(c(!0),g(m,null,x(ze.value,e=>{return c(),g("div",{key:e.id,class:"checklist-card",onClick:a=>Ee(e)},[u("div",ne,[u("div",se,[u("div",oe,[u("div",ce,[d(r($),{icon:r(H)},null,8,["icon"])]),u("div",le,[u("h3",null,f(e.machine.name),1),u("p",re,f(e.machine.identifier),1)])]),u("div",de,[u("div",pe,[d(r($),{icon:r(L)},null,8,["icon"])]),u("div",ue,[u("h4",null,f(e.patient.name),1),u("p",ge,f((a=e.current_phase,{pre_dialysis:"Pré-Diálise",during_session:"Durante Sessão",post_dialysis:"Pós-Diálise",completed:"Concluído",interrupted:"Interrompido"}[a]||a)),1)])])]),u("div",he,[u("div",fe,[u("div",{class:y(["progress-circle",Ue(e.current_phase)])},[u("span",me,f(Me(e))+"%",1)],2),u("div",xe,[u("span",ve,f(qe(e.created_at)),1)])]),d(r(j),{color:Se(e.current_phase),size:"small",class:"action-button",onClick:w(a=>Ee(e),["stop"])},{default:l(()=>[p(f(e.paused_at?"RETOMAR":"CONTINUAR"),1)]),_:2},1032,["color","onClick"]),e.paused_at?h("",!0):(c(),o(r(j),{key:0,fill:"clear",size:"small",color:"medium",onClick:w(a=>(async e=>{const a=await U.create({header:"Pausar Checklist",message:`Deseja pausar o checklist da máquina ${e.machine.name}?`,buttons:[{text:"Cancelar",role:"cancel"},{text:"Pausar",handler:async()=>{const a=await M.create({message:"Pausando checklist..."});await a.present();try{const a=await fetch(`/api/checklists/${e.id}/pause`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),t=await a.json();if(!t.success)throw new Error(t.message);{const e=await q.create({message:"Checklist pausado com sucesso.",duration:3e3,color:"success"});await e.present(),await De()}}catch(t){const e=await q.create({message:"Erro ao pausar checklist.",duration:3e3,color:"danger"});await e.present()}finally{await a.dismiss()}}}]});await a.present()})(e),["stop"]),class:"pause-btn"},{default:l(()=>[d(r($),{icon:r(Y),slot:"icon-only"},null,8,["icon"])]),_:1},8,["onClick"]))])]),e.paused_at?(c(),g("div",ye,[d(r($),{icon:r(G)},null,8,["icon"]),u("span",null,"Pausado há "+f(Be(e.paused_at)),1)])):h("",!0)],8,ie);var a}),128))])):h("",!0),0!==ze.value.length||J.value?h("",!0):(c(),g("div",we,[u("div",be,[d(r($),{icon:r(R),class:"empty-icon"},null,8,["icon"]),a[2]||(a[2]=u("h3",null,"Nenhum checklist ativo",-1)),a[3]||(a[3]=u("p",null,"Inicie um novo checklist de segurança para começar.",-1)),d(r(j),{color:"primary",onClick:Te,class:"start-button"},{default:l(()=>[d(r($),{icon:r(F),slot:"start"},null,8,["icon"]),a[1]||(a[1]=p(" Iniciar Checklist ",-1))]),_:1})])])),J.value?(c(),g("div",ke,[d(r(P),{name:"crescent"}),a[4]||(a[4]=u("p",null,"Carregando checklists...",-1))])):h("",!0)]),d(r(E),{vertical:"bottom",horizontal:"end",slot:"fixed"},{default:l(()=>[d(r(T),{color:"primary",onClick:Te,class:"add-fab"},{default:l(()=>[d(r($),{icon:r(F)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),[["__scopeId","data-v-a70ea2e7"]]))}}});
