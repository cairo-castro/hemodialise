import{d as C,r as I,c as w,o as S,A as y,q as V,x as l,y as t,v as s,t as a,K as c,H as r,C as P,B as k}from"./vendor-BlPZouPF.js";import{e as x,m as B,o as O,x as N,n as q,g as d,p as A,J as v,K as _,L as u,i as U,l as D,w as T,t as f}from"./ionic-C-hOnMqp.js";import{G as F,p as H,F as R,R as z,S as E,I as K,y as M,_ as j}from"./_plugin-vue_export-helper-B7Fc93E3.js";import{C as G}from"./main-DpZpFifR.js";const J={class:"modal-title-dash"},L={class:"progress-dash"},Q={class:"input-cards-dash"},W={class:"input-card-dash"},X={class:"card-icon-dash primary"},Y={class:"card-content-dash"},Z={class:"input-card-dash"},$={class:"card-icon-dash secondary"},ee={class:"card-content-dash"},ae={class:"input-card-dash"},te={class:"card-icon-dash tertiary"},se={class:"card-content-dash"},oe={class:"input-card-dash"},le={class:"card-icon-dash success"},ne={class:"card-content-dash"},re={class:"buttons-dash"},ie=["disabled"],de=C({__name:"PatientFormPage",setup(ue){const p=k(),g=G.getInstance().getCreatePatientUseCase(),o=I({full_name:"",birth_date:"",blood_group:"",rh_factor:"",allergies:"",observations:""}),m=w(()=>o.value.full_name.trim().length>0&&o.value.birth_date.length>0),h=async()=>{if(!m.value)return;const i=await T.create({message:"Cadastrando paciente...",spinner:"crescent"});await i.present();try{const e=await g.execute(o.value);if(e){console.log("âœ… Paciente criado com sucesso:",e);const n=e.id.toString();localStorage.setItem("new_patient_id",n),localStorage.setItem("return_to_checklist","true"),console.log("ðŸ’¾ localStorage salvo - new_patient_id:",n),console.log("ðŸ’¾ localStorage salvo - return_to_checklist: true"),await i.dismiss(),await(await f.create({message:"Paciente cadastrado com sucesso!",duration:2e3,color:"success",position:"top"})).present(),console.log("ðŸ”™ Voltando para checklist..."),p.back()}}catch(e){await i.dismiss(),await(await f.create({message:e.message||"Erro ao cadastrar paciente",duration:3e3,color:"danger",position:"top"})).present()}},b=async()=>{o.value.full_name||o.value.birth_date?await(await D.create({header:"Descartar alteraÃ§Ãµes?",message:"Tem certeza que deseja cancelar? Os dados preenchidos serÃ£o perdidos.",buttons:[{text:"Continuar Editando",role:"cancel"},{text:"Descartar",role:"destructive",handler:()=>{localStorage.removeItem("patient_search_query"),p.back()}}]})).present():(localStorage.removeItem("patient_search_query"),p.back())};return S(()=>{const i=localStorage.getItem("patient_search_query");i&&(o.value.full_name=i)}),(i,e)=>(V(),y(t(x),null,{default:l(()=>[s(t(A),null,{default:l(()=>[s(t(B),{color:"primary"},{default:l(()=>[s(t(O),{slot:"start"},{default:l(()=>[s(t(N),{"default-href":"/checklist/new"})]),_:1}),s(t(q),null,{default:l(()=>[a("div",J,[s(t(d),{icon:t(F)},null,8,["icon"]),e[4]||(e[4]=a("span",null,"Novo Paciente",-1))])]),_:1})]),_:1})]),_:1}),s(t(U),{class:"modal-content-dash"},{default:l(()=>[a("form",{onSubmit:P(h,["prevent"]),class:"form-dash"},[e[20]||(e[20]=a("div",{class:"welcome-card-dash"},[a("h2",null,"Cadastrar Novo Paciente"),a("p",null,"Preencha as informaÃ§Ãµes bÃ¡sicas")],-1)),a("div",L,[a("div",{class:c(["progress-item",{done:o.value.full_name}])},[...e[5]||(e[5]=[a("div",{class:"progress-dot"},null,-1),a("span",null,"Nome",-1)])],2),a("div",{class:c(["progress-line",{active:o.value.birth_date}])},null,2),a("div",{class:c(["progress-item",{done:o.value.birth_date}])},[...e[6]||(e[6]=[a("div",{class:"progress-dot"},null,-1),a("span",null,"Data",-1)])],2),a("div",{class:c(["progress-line",{active:o.value.blood_group||o.value.rh_factor}])},null,2),a("div",{class:c(["progress-item",{done:o.value.blood_group&&o.value.rh_factor}])},[...e[7]||(e[7]=[a("div",{class:"progress-dot"},null,-1),a("span",null,"Sangue",-1)])],2)]),a("div",Q,[a("div",W,[a("div",X,[s(t(d),{icon:t(H)},null,8,["icon"])]),a("div",Y,[e[8]||(e[8]=a("label",null,"Nome Completo",-1)),s(t(v),{modelValue:o.value.full_name,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.full_name=n),type:"text",required:"",placeholder:"Digite o nome completo",class:"input-dash"},null,8,["modelValue"])])]),a("div",Z,[a("div",$,[s(t(d),{icon:t(R)},null,8,["icon"])]),a("div",ee,[e[9]||(e[9]=a("label",null,"Data de Nascimento",-1)),s(t(v),{modelValue:o.value.birth_date,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.birth_date=n),type:"date",required:"",class:"input-dash"},null,8,["modelValue"])])]),a("div",ae,[a("div",te,[s(t(d),{icon:t(z)},null,8,["icon"])]),a("div",se,[e[14]||(e[14]=a("label",null,[r("Tipo SanguÃ­neo "),a("span",{class:"optional"},"(opcional)")],-1)),s(t(_),{modelValue:o.value.blood_group,"onUpdate:modelValue":e[2]||(e[2]=n=>o.value.blood_group=n),placeholder:"Selecione o tipo",interface:"action-sheet",class:"select-dash"},{default:l(()=>[s(t(u),{value:"A"},{default:l(()=>[...e[10]||(e[10]=[r("A",-1)])]),_:1}),s(t(u),{value:"B"},{default:l(()=>[...e[11]||(e[11]=[r("B",-1)])]),_:1}),s(t(u),{value:"AB"},{default:l(()=>[...e[12]||(e[12]=[r("AB",-1)])]),_:1}),s(t(u),{value:"O"},{default:l(()=>[...e[13]||(e[13]=[r("O",-1)])]),_:1})]),_:1},8,["modelValue"])])]),a("div",oe,[a("div",le,[s(t(d),{icon:t(E)},null,8,["icon"])]),a("div",ne,[e[17]||(e[17]=a("label",null,[r("Fator RH "),a("span",{class:"optional"},"(opcional)")],-1)),s(t(_),{modelValue:o.value.rh_factor,"onUpdate:modelValue":e[3]||(e[3]=n=>o.value.rh_factor=n),placeholder:"Selecione o fator",interface:"action-sheet",class:"select-dash"},{default:l(()=>[s(t(u),{value:"+"},{default:l(()=>[...e[15]||(e[15]=[r("Positivo (+)",-1)])]),_:1}),s(t(u),{value:"-"},{default:l(()=>[...e[16]||(e[16]=[r("Negativo (-)",-1)])]),_:1})]),_:1},8,["modelValue"])])])]),a("div",re,[a("button",{type:"button",class:"btn-cancel-dash",onClick:b},[s(t(d),{icon:t(K)},null,8,["icon"]),e[18]||(e[18]=r(" Cancelar ",-1))]),a("button",{type:"submit",class:"btn-submit-dash",disabled:!m.value},[s(t(d),{icon:t(M)},null,8,["icon"]),e[19]||(e[19]=r(" Cadastrar ",-1))],8,ie)])],32)]),_:1})]),_:1}))}}),ge=j(de,[["__scopeId","data-v-1b784657"]]);export{ge as default};
