import{d as q,r as c,c as F,o as G,z as $,n as h,v as s,x as e,A as J,t as o,B as D,l as L,D as P,q as a,E as d}from"./vendor-C2XN_qWx.js";import{e as K,t as m,n as Q,o as W,p as X,k as w,g as i,q as Y,r as Z,s as ee,u as g,v as p,w as te,i as oe,m as ae,x as se,y as ne}from"./ionic-Duh8nJBT.js";import{s as le,a as ie,b as re,c as ce,m as de,d as ue,p as me,e as fe,f as ge,w as U,_ as pe}from"./_plugin-vue_export-helper-BGt4Pv6P.js";import{C as ve}from"./main-Dw9z8FtT.js";const he={key:0,class:"welcome-section"},we={class:"welcome-content"},Ce={class:"actions-container"},ke={class:"actions-grid"},be={key:1,class:"stats-container"},_e={class:"stats-grid"},ye={class:"stat-item"},Ie={class:"stat-number"},Se={class:"stat-item"},Me={class:"stat-number"},xe={class:"stat-item"},Oe={class:"stat-number"},De={class:"status-indicator"},Le=q({__name:"DashboardPage",setup(Pe){const u=J(),C=ve.getInstance(),E=C.getCurrentUserUseCase(),B=C.getLogoutUseCase(),r=c(null),f=c(navigator.onLine),v=c(!1),k=c(0),b=c(3),_=c(!1),l=c(!1),R=F(()=>r.value&&{tecnico:"Técnico",admin:"Admin",gestor:"Gestor",coordenador:"Coordenador",supervisor:"Supervisor"}[r.value.role]||"Usuário"),y=async()=>{try{r.value=await E.execute(),console.log("User loaded:",r.value)}catch(n){console.error("Error loading user:",n),await(await m.create({message:"Erro ao carregar dados do usuário",duration:3e3,color:"danger",position:"top"})).present(),setTimeout(()=>{u.replace("/login")},2e3)}},I=async()=>{try{await new Promise(n=>setTimeout(n,1e3)),k.value=Math.floor(Math.random()*10)+1,b.value=3,v.value=!0,console.log("Stats loaded")}catch(n){console.error("Error loading stats:",n),v.value=!0}},T=async n=>{try{await Promise.all([y(),I()]),await(await m.create({message:"Dados atualizados",duration:1500,color:"success",position:"top"})).present()}catch(t){console.error("Error refreshing:",t)}finally{n.target.complete()}},z=async()=>{await(await se.create({header:"Confirmar Saída",message:"Deseja realmente sair do aplicativo?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Sair",role:"confirm",handler:async()=>{try{await B.execute(),await(await m.create({message:"Logout realizado com sucesso",duration:2e3,color:"success",position:"top"})).present(),u.replace("/login")}catch(t){console.error("Logout error:",t),u.replace("/login")}}}]})).present()},A=()=>{console.log("Navigating to checklist..."),u.push("/checklist")},H=()=>{console.log("Navigating to patients..."),u.push("/patients")},S=async()=>{await(await m.create({message:"Funcionalidade em breve",duration:2e3,color:"warning",position:"middle"})).present()},N=async()=>{await(await ne.create({header:"Mudar Interface",subHeader:"Escolha a interface que deseja usar",buttons:[{text:"📱 Mobile (Atual)",icon:"phone-portrait-outline",data:{interface:"mobile"},handler:()=>{console.log("Mobile interface selected (already current)")}},{text:"🖥️ Desktop",icon:"desktop-outline",data:{interface:"desktop"},handler:()=>{console.log("Switching to desktop interface..."),window.location.href="/desktop"}},{text:"⚙️ Admin (Filament)",icon:"settings-outline",data:{interface:"admin"},handler:()=>{console.log("Switching to admin interface..."),window.location.href="/admin"}},{text:"Cancelar",icon:"close-outline",role:"cancel",data:{action:"cancel"}}]})).present()},V=()=>{const n=localStorage.getItem("dark-mode");n!==null?l.value=n==="true":l.value=window.matchMedia("(prefers-color-scheme: dark)").matches,M()},M=()=>{l.value?document.body.classList.add("dark"):document.body.classList.remove("dark")},j=async()=>{l.value=!l.value,localStorage.setItem("dark-mode",l.value.toString()),M(),await(await m.create({message:"Modo ".concat(l.value?"escuro":"claro"," ativado"),duration:1500,color:"medium",position:"bottom"})).present(),console.log("Dark mode toggled:",l.value)},x=()=>{f.value=navigator.onLine};return G(async()=>{console.log("Dashboard mounted, loading data..."),V(),_.value=!0;try{await y(),I(),window.addEventListener("online",x),window.addEventListener("offline",x)}catch(n){console.error("Dashboard initialization error:",n)}finally{_.value=!1}}),(n,t)=>(h(),$(e(K),null,{default:s(()=>[o(e(Y),null,{default:s(()=>[o(e(Q),{color:"primary"},{default:s(()=>[o(e(W),null,{default:s(()=>[...t[0]||(t[0]=[D("Hemodiálise Mobile",-1)])]),_:1}),o(e(X),{slot:"end"},{default:s(()=>[o(e(w),{onClick:j,fill:"clear",class:"theme-toggle-btn"},{default:s(()=>[o(e(i),{icon:l.value?e(le):e(ie),slot:"icon-only"},null,8,["icon"])]),_:1}),o(e(w),{onClick:N,fill:"clear",class:"interface-switch-btn"},{default:s(()=>[o(e(i),{icon:e(re),slot:"icon-only"},null,8,["icon"])]),_:1}),o(e(w),{onClick:z,fill:"clear"},{default:s(()=>[o(e(i),{icon:e(ce),slot:"icon-only"},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),o(e(ae),{fullscreen:!0},{default:s(()=>{var O;return[o(e(Z),{slot:"fixed",onIonRefresh:T},{default:s(()=>[o(e(ee))]),_:1}),r.value?(h(),L("div",he,[a("div",we,[o(e(i),{icon:e(de),class:"welcome-icon"},null,8,["icon"]),a("h1",null,"Olá, "+d(r.value.name.split(" ")[0])+"!",1),a("p",null,d(((O=r.value.unit)==null?void 0:O.name)||"Sistema de Hemodiálise"),1)])])):P("",!0),a("div",Ce,[t[9]||(t[9]=a("h2",null,"Ações Principais",-1)),a("div",ke,[o(e(g),{button:"",class:"action-card checklist",onClick:A},{default:s(()=>[o(e(p),null,{default:s(()=>[o(e(i),{icon:e(ue),class:"action-icon"},null,8,["icon"]),t[1]||(t[1]=a("h3",null,"Novo Checklist",-1)),t[2]||(t[2]=a("p",null,"Verificação de segurança",-1))]),_:1})]),_:1}),o(e(g),{button:"",class:"action-card patients",onClick:H},{default:s(()=>[o(e(p),null,{default:s(()=>[o(e(i),{icon:e(me),class:"action-icon"},null,8,["icon"]),t[3]||(t[3]=a("h3",null,"Pacientes",-1)),t[4]||(t[4]=a("p",null,"Buscar e gerenciar",-1))]),_:1})]),_:1}),o(e(g),{button:"",class:"action-card reports",onClick:S},{default:s(()=>[o(e(p),null,{default:s(()=>[o(e(i),{icon:e(fe),class:"action-icon"},null,8,["icon"]),t[5]||(t[5]=a("h3",null,"Relatórios",-1)),t[6]||(t[6]=a("p",null,"Visualizar dados",-1))]),_:1})]),_:1}),o(e(g),{button:"",class:"action-card settings",onClick:S},{default:s(()=>[o(e(p),null,{default:s(()=>[o(e(i),{icon:e(ge),class:"action-icon"},null,8,["icon"]),t[7]||(t[7]=a("h3",null,"Configurações",-1)),t[8]||(t[8]=a("p",null,"Ajustes do app",-1))]),_:1})]),_:1})])]),v.value?(h(),L("div",be,[t[13]||(t[13]=a("h2",null,"Resumo de Hoje",-1)),a("div",_e,[a("div",ye,[a("div",Ie,d(k.value),1),t[10]||(t[10]=a("div",{class:"stat-label"},"Checklists Hoje",-1))]),a("div",Se,[a("div",Me,d(b.value),1),t[11]||(t[11]=a("div",{class:"stat-label"},"Máquinas Ativas",-1))]),a("div",xe,[a("div",Oe,d(R.value),1),t[12]||(t[12]=a("div",{class:"stat-label"},"Perfil",-1))])])])):P("",!0),a("div",De,[o(e(te),{color:f.value?"success":"danger"},{default:s(()=>[o(e(i),{icon:f.value?e(U):e(U),slot:"start"},null,8,["icon"]),o(e(oe),null,{default:s(()=>[D(d(f.value?"Online":"Offline"),1)]),_:1})]),_:1},8,["color"])])]}),_:1})]),_:1}))}}),Te=pe(Le,[["__scopeId","data-v-0dd89b04"]]);export{Te as default};
