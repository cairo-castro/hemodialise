import{d as F,r as y,c as x,o as G,z as O,n as u,v as l,x as t,t as o,B as s,q as n,l as m,D as w,G as H,F as J,C as K,E as g}from"./vendor-C2XN_qWx.js";import{e as Q,n as A,t as I,o as D,q as V,z as W,p as S,k as C,g as c,r as N,J as X,K as Y,m as U,h as v,i as _,j as B,D as Z,E as d,G as L,v as h,w as ee,y as te}from"./ionic-BY6d-3MW.js";import{g as oe,e as le,i as ae,f as se,j as ne,k as ie,_ as re}from"./_plugin-vue_export-helper-DsnVPzCl.js";import{C as ue}from"./index-DJzgSW-U.js";const de={class:"search-container"},pe={class:"patients-container"},fe={class:"patient-header"},me={class:"patient-info"},ce={class:"patient-status"},ve={class:"patient-details"},_e={key:0,class:"detail-item"},ge={key:1,class:"detail-item"},be={key:0,class:"empty-state"},ye={key:0},Ce={key:1},we={class:"form-group"},Ie={class:"form-group"},Ve={class:"form-group"},Be={class:"form-group"},ke={class:"form-group"},Pe={class:"form-group"},xe={class:"modal-buttons"},Oe=F({__name:"PatientsPage",setup(Ae){const k=ue.getInstance(),T=k.getCreatePatientUseCase(),q=k.get("PatientRepository"),b=y([]),p=y(""),f=y(!1),i=y({full_name:"",birth_date:"",medical_record:"",blood_type:"",allergies:"",observations:""}),P=x(()=>{if(!p.value)return b.value;const r=p.value.toLowerCase();return b.value.filter(e=>e.full_name.toLowerCase().includes(r)||e.medical_record.toLowerCase().includes(r)||e.blood_type&&e.blood_type.toLowerCase().includes(r))}),E=x(()=>i.value.full_name.length>0&&i.value.birth_date.length>0&&i.value.medical_record.length>0),M=async()=>{const r=await A.create({message:"Carregando pacientes...",spinner:"crescent"});await r.present();try{b.value=await q.getAll()}catch(e){console.error("Error loading patients:",e),await(await I.create({message:"Erro ao carregar pacientes",duration:3e3,color:"danger",position:"top"})).present()}finally{await r.dismiss()}},$=r=>{p.value=r.target.value},j=r=>{console.log("Selected patient:",r)},R=async()=>{const r=await A.create({message:"Cadastrando paciente...",spinner:"crescent"});await r.present();try{const e=await T.execute(i.value);b.value.unshift(e),i.value={full_name:"",birth_date:"",medical_record:"",blood_type:"",allergies:"",observations:""},f.value=!1,await(await I.create({message:"Paciente cadastrado com sucesso!",duration:2e3,color:"success",position:"top"})).present()}catch(e){await(await I.create({message:e.message||"Erro ao cadastrar paciente",duration:3e3,color:"danger",position:"top"})).present()}finally{await r.dismiss()}},z=r=>new Date(r).toLocaleDateString("pt-BR");return G(()=>{M()}),(r,e)=>(u(),O(t(Q),null,{default:l(()=>[o(t(N),{translucent:!0},{default:l(()=>[o(t(D),null,{default:l(()=>[o(t(V),{slot:"start"},{default:l(()=>[o(t(W),{"default-href":"/dashboard"})]),_:1}),o(t(S),null,{default:l(()=>[...e[11]||(e[11]=[s("Pacientes",-1)])]),_:1}),o(t(V),{slot:"end"},{default:l(()=>[o(t(C),{onClick:e[0]||(e[0]=a=>f.value=!0)},{default:l(()=>[o(t(c),{icon:t(oe),slot:"icon-only"},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),o(t(U),{fullscreen:!0},{default:l(()=>[n("div",de,[o(t(X),{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=a=>p.value=a),placeholder:"Buscar pacientes...",onIonInput:$,"show-clear-button":"focus"},null,8,["modelValue"])]),n("div",pe,[(u(!0),m(J,null,H(P.value,a=>(u(),O(t(h),{key:a.id,class:"patient-card",button:"",onClick:De=>j(a)},{default:l(()=>[o(t(ee),null,{default:l(()=>[n("div",fe,[n("div",me,[n("h3",null,g(a.full_name),1),n("p",null,g(z(a.birth_date))+" • "+g(a.age)+" anos",1)]),n("div",ce,[o(t(te),{color:"success"},{default:l(()=>[...e[12]||(e[12]=[s("Ativo",-1)])]),_:1})])]),n("div",ve,[a.medical_record?(u(),m("div",_e,[o(t(c),{icon:t(ne)},null,8,["icon"]),n("span",null,g(a.medical_record),1)])):w("",!0),a.blood_type?(u(),m("div",ge,[o(t(c),{icon:t(ie)},null,8,["icon"]),n("span",null,g(a.blood_type),1)])):w("",!0)])]),_:2},1024)]),_:2},1032,["onClick"]))),128)),P.value.length===0?(u(),m("div",be,[o(t(c),{icon:t(le)},null,8,["icon"]),e[13]||(e[13]=n("h3",null,"Nenhum paciente encontrado",-1)),p.value?(u(),m("p",ye,"Tente ajustar os termos de busca")):(u(),m("p",Ce,"Cadastre o primeiro paciente"))])):w("",!0)]),o(t(Y),{"is-open":f.value,onWillDismiss:e[10]||(e[10]=a=>f.value=!1)},{default:l(()=>[o(t(N),null,{default:l(()=>[o(t(D),null,{default:l(()=>[o(t(S),null,{default:l(()=>[...e[14]||(e[14]=[s("Novo Paciente",-1)])]),_:1}),o(t(V),{slot:"end"},{default:l(()=>[o(t(C),{onClick:e[2]||(e[2]=a=>f.value=!1)},{default:l(()=>[o(t(c),{icon:t(ae),slot:"icon-only"},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),o(t(U),{class:"modal-content"},{default:l(()=>[n("form",{onSubmit:K(R,["prevent"]),class:"create-form"},[n("div",we,[o(t(v),{class:"mobile-input",fill:"outline"},{default:l(()=>[o(t(_),{position:"floating"},{default:l(()=>[...e[15]||(e[15]=[s("Nome Completo *",-1)])]),_:1}),o(t(B),{modelValue:i.value.full_name,"onUpdate:modelValue":e[3]||(e[3]=a=>i.value.full_name=a),type:"text",required:"",placeholder:"Digite o nome completo"},null,8,["modelValue"])]),_:1})]),n("div",Ie,[o(t(v),{class:"mobile-input",fill:"outline"},{default:l(()=>[o(t(_),{position:"floating"},{default:l(()=>[...e[16]||(e[16]=[s("Data de Nascimento *",-1)])]),_:1}),o(t(B),{modelValue:i.value.birth_date,"onUpdate:modelValue":e[4]||(e[4]=a=>i.value.birth_date=a),type:"date",required:""},null,8,["modelValue"])]),_:1})]),n("div",Ve,[o(t(v),{class:"mobile-input",fill:"outline"},{default:l(()=>[o(t(_),{position:"floating"},{default:l(()=>[...e[17]||(e[17]=[s("Prontuário Médico *",-1)])]),_:1}),o(t(B),{modelValue:i.value.medical_record,"onUpdate:modelValue":e[5]||(e[5]=a=>i.value.medical_record=a),type:"text",required:"",placeholder:"Número do prontuário"},null,8,["modelValue"])]),_:1})]),n("div",Be,[o(t(v),{class:"mobile-input",fill:"outline"},{default:l(()=>[o(t(_),{position:"floating"},{default:l(()=>[...e[18]||(e[18]=[s("Tipo Sanguíneo",-1)])]),_:1}),o(t(Z),{modelValue:i.value.blood_type,"onUpdate:modelValue":e[6]||(e[6]=a=>i.value.blood_type=a),placeholder:"Selecione"},{default:l(()=>[o(t(d),{value:"A+"},{default:l(()=>[...e[19]||(e[19]=[s("A+",-1)])]),_:1}),o(t(d),{value:"A-"},{default:l(()=>[...e[20]||(e[20]=[s("A-",-1)])]),_:1}),o(t(d),{value:"B+"},{default:l(()=>[...e[21]||(e[21]=[s("B+",-1)])]),_:1}),o(t(d),{value:"B-"},{default:l(()=>[...e[22]||(e[22]=[s("B-",-1)])]),_:1}),o(t(d),{value:"AB+"},{default:l(()=>[...e[23]||(e[23]=[s("AB+",-1)])]),_:1}),o(t(d),{value:"AB-"},{default:l(()=>[...e[24]||(e[24]=[s("AB-",-1)])]),_:1}),o(t(d),{value:"O+"},{default:l(()=>[...e[25]||(e[25]=[s("O+",-1)])]),_:1}),o(t(d),{value:"O-"},{default:l(()=>[...e[26]||(e[26]=[s("O-",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),n("div",ke,[o(t(v),{class:"mobile-input",fill:"outline"},{default:l(()=>[o(t(_),{position:"floating"},{default:l(()=>[...e[27]||(e[27]=[s("Alergias",-1)])]),_:1}),o(t(L),{modelValue:i.value.allergies,"onUpdate:modelValue":e[7]||(e[7]=a=>i.value.allergies=a),rows:"3",placeholder:"Descreva alergias conhecidas..."},null,8,["modelValue"])]),_:1})]),n("div",Pe,[o(t(v),{class:"mobile-input",fill:"outline"},{default:l(()=>[o(t(_),{position:"floating"},{default:l(()=>[...e[28]||(e[28]=[s("Observações",-1)])]),_:1}),o(t(L),{modelValue:i.value.observations,"onUpdate:modelValue":e[8]||(e[8]=a=>i.value.observations=a),rows:"3",placeholder:"Observações gerais..."},null,8,["modelValue"])]),_:1})]),n("div",xe,[o(t(C),{expand:"block",type:"submit",class:"mobile-button",disabled:!E.value},{default:l(()=>[o(t(c),{icon:t(se),slot:"start"},null,8,["icon"]),e[29]||(e[29]=s(" Cadastrar Paciente ",-1))]),_:1},8,["disabled"]),o(t(C),{expand:"block",fill:"outline",class:"mobile-button",onClick:e[9]||(e[9]=a=>f.value=!1)},{default:l(()=>[...e[30]||(e[30]=[s(" Cancelar ",-1)])]),_:1})])],32)]),_:1})]),_:1},8,["is-open"])]),_:1})]),_:1}))}}),Te=re(Oe,[["__scopeId","data-v-8ef970da"]]);export{Te as default};
