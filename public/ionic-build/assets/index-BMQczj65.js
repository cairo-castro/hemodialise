const __vite__fileDeps=["assets/LoginPage-C7LF7KPk.js","assets/vendor-C2XN_qWx.js","assets/ionic-BY6d-3MW.js","assets/_plugin-vue_export-helper-DpvRZPJi.js","assets/LoginPage-PFn9vUM2.css","assets/DashboardPage-B_YihvJI.js","assets/DashboardPage-CrlLhi61.css","assets/ChecklistPage-ePaGMWzX.js","assets/ChecklistPage-CVDRxScG.css","assets/PatientsPage-CvWNrXTd.js","assets/PatientsPage-CpOB4Kzx.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var _=Object.defineProperty;var k=(a,e,t)=>e in a?_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var h=(a,e,t)=>(k(a,typeof e!="symbol"?e+"":e,t),t);import{d as E,l as T,n as C,q as l,t as y,v,x as S,F as D,y as b}from"./vendor-C2XN_qWx.js";import{I as R,a as U,c as A,b as I,_ as p,d as P}from"./ionic-BY6d-3MW.js";function Z(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const L=E({__name:"App",setup(a){return(e,t)=>(C(),T(D,null,[t[0]||(t[0]=l("div",{class:"desktop-warning",style:{display:"none"}},[l("h1",null,"ðŸ“± Aplicativo Mobile"),l("p",null,"Este aplicativo foi projetado exclusivamente para dispositivos mÃ³veis."),l("p",null,"Acesse pelo seu smartphone ou tablet para uma melhor experiÃªncia."),l("div",{style:{"margin-top":"2rem",padding:"1rem",background:"rgba(255,255,255,0.1)","border-radius":"8px"}},[l("p",{style:{"font-size":"1rem"}},"Para testar no navegador, use as ferramentas de desenvolvedor (F12) e ative a visualizaÃ§Ã£o mobile.")])],-1)),y(S(R),null,{default:v(()=>[y(S(U))]),_:1})],64))}}),O={BASE_URL:"http://localhost:8000/api",PRODUCTION_URL:"/api",getApiUrl(){return this.PRODUCTION_URL},ENDPOINTS:{LOGIN:"/login",LOGOUT:"/logout",ME:"/me",PATIENTS:"/patients",PATIENTS_SEARCH:"/patients/search",CHECKLISTS:"/checklists",CHECKLISTS_TODAY:"/checklists/today",CHECKLISTS_PENDING:"/checklists/pending",CHECKLISTS_BY_USER:"/checklists/user",CHECKLISTS_BY_MACHINE:"/checklists/machine",MACHINES:"/machines",MACHINES_AVAILABLE:"/machines/available",MACHINES_BY_UNIT:"/machines/unit"}};class N{constructor(e){h(this,"baseUrl");this.baseUrl=e||O.getApiUrl()}async get(e,t){return this.request("GET",e,void 0,t)}async post(e,t,r){return this.request("POST",e,t,r)}async put(e,t,r){return this.request("PUT",e,t,r)}async delete(e,t){return this.request("DELETE",e,void 0,t)}async request(e,t,r,o){const s="".concat(this.baseUrl).concat(t),n={"Content-Type":"application/json",Accept:"application/json"};o&&(n.Authorization="Bearer ".concat(o));const u={method:e,headers:n};r&&(e==="POST"||e==="PUT")&&(u.body=JSON.stringify(r));try{const i=await fetch(s,u),g=await i.json();if(!i.ok)throw{message:g.message||"Erro na requisiÃ§Ã£o",errors:g.errors,status:i.status};return g}catch(i){throw i instanceof Error&&i.name==="TypeError"?{message:"Erro de conectividade. Verifique sua conexÃ£o.",status:0}:i}}}class B{set(e,t){try{localStorage.setItem(e,t)}catch(r){console.error("Erro ao salvar no localStorage:",r)}}get(e){try{return localStorage.getItem(e)}catch(t){return console.error("Erro ao ler do localStorage:",t),null}}remove(e){try{localStorage.removeItem(e)}catch(t){console.error("Erro ao remover do localStorage:",t)}}clear(){try{localStorage.clear()}catch(e){console.error("Erro ao limpar localStorage:",e)}}setObject(e,t){try{this.set(e,JSON.stringify(t))}catch(r){console.error("Erro ao salvar objeto no localStorage:",r)}}getObject(e){try{const t=this.get(e);return t?JSON.parse(t):null}catch(t){return console.error("Erro ao ler objeto do localStorage:",t),null}}}class V{constructor(e,t){h(this,"TOKEN_KEY","auth_token");this.apiDataSource=e,this.localStorageDataSource=t}async login(e){return(await this.apiDataSource.post("/login",e)).data}async getCurrentUser(){const e=this.getStoredToken();if(!e)throw new Error("Token nÃ£o encontrado");return(await this.apiDataSource.get("/me",e)).data}async logout(){const e=this.getStoredToken();e&&await this.apiDataSource.post("/logout",{},e)}getStoredToken(){return this.localStorageDataSource.get(this.TOKEN_KEY)}storeToken(e){this.localStorageDataSource.set(this.TOKEN_KEY,e)}removeToken(){this.localStorageDataSource.remove(this.TOKEN_KEY)}isAuthenticated(){const e=this.getStoredToken();return e!==null&&e!==""}}class x{constructor(e,t){this.apiDataSource=e,this.localStorageDataSource=t}getToken(){const e=this.localStorageDataSource.get("auth_token");if(!e)throw new Error("Token de autenticaÃ§Ã£o nÃ£o encontrado");return e}async search(e){const t=this.getToken(),r=new URLSearchParams({full_name:e.full_name,birth_date:e.birth_date});try{return(await this.apiDataSource.get("/patients/search?".concat(r.toString()),t)).data}catch(o){if(o.status===404)return null;throw o}}async create(e){const t=this.getToken();return(await this.apiDataSource.post("/patients",e,t)).data}async getById(e){const t=this.getToken();return(await this.apiDataSource.get("/patients/".concat(e),t)).data}async getAll(){const e=this.getToken();return(await this.apiDataSource.get("/patients",e)).data}async update(e,t){const r=this.getToken();return(await this.apiDataSource.put("/patients/".concat(e),t,r)).data}}class ${constructor(e,t){this.apiDataSource=e,this.localStorageDataSource=t}getToken(){const e=this.localStorageDataSource.get("auth_token");if(!e)throw new Error("Token de autenticaÃ§Ã£o nÃ£o encontrado");return e}async create(e){const t=this.getToken();return(await this.apiDataSource.post("/checklists",e,t)).data}async getById(e){const t=this.getToken();return(await this.apiDataSource.get("/checklists/".concat(e),t)).data}async getByUser(e,t){const r=this.getToken(),o=new URLSearchParams;t&&o.append("limit",t.toString());const s="/checklists/user/".concat(e).concat(o.toString()?"?"+o.toString():"");return(await this.apiDataSource.get(s,r)).data}async getByMachine(e,t){const r=this.getToken(),o=new URLSearchParams;t&&o.append("date",t);const s="/checklists/machine/".concat(e).concat(o.toString()?"?"+o.toString():"");return(await this.apiDataSource.get(s,r)).data}async getTodaysChecklists(){const e=this.getToken(),t=new Date().toISOString().split("T")[0];return(await this.apiDataSource.get("/checklists/today/".concat(t),e)).data}async getPendingChecklists(){const e=this.getToken();return(await this.apiDataSource.get("/checklists/pending",e)).data}}class K{constructor(e,t){this.apiDataSource=e,this.localStorageDataSource=t}getToken(){const e=this.localStorageDataSource.get("auth_token");if(!e)throw new Error("Token de autenticaÃ§Ã£o nÃ£o encontrado");return e}async getAll(){const e=this.getToken();return(await this.apiDataSource.get("/machines",e)).data}async getById(e){const t=this.getToken();return(await this.apiDataSource.get("/machines/".concat(e),t)).data}async getByUnit(e){const t=this.getToken();return(await this.apiDataSource.get("/machines/unit/".concat(e),t)).data}async getAvailable(){const e=this.getToken();return(await this.apiDataSource.get("/machines/available",e)).data}}class M{constructor(e){this.authRepository=e}async execute(e){if(!e.email||!e.password)throw new Error("Email e senha sÃ£o obrigatÃ³rios");if(!this.isValidEmail(e.email))throw new Error("Email deve ter um formato vÃ¡lido");const t=await this.authRepository.login(e);return this.authRepository.storeToken(t.access_token),t}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}}class q{constructor(e){this.authRepository=e}async execute(){if(!this.authRepository.isAuthenticated())throw new Error("UsuÃ¡rio nÃ£o estÃ¡ autenticado");try{return await this.authRepository.getCurrentUser()}catch(e){throw this.authRepository.removeToken(),new Error("SessÃ£o expirada. FaÃ§a login novamente.")}}}class H{constructor(e){this.authRepository=e}async execute(){try{await this.authRepository.logout()}catch(e){console.warn("Erro ao fazer logout na API:",e)}finally{this.authRepository.removeToken()}}}class j{constructor(e){this.patientRepository=e}async execute(e){var r;if(!((r=e.full_name)!=null&&r.trim()))throw new Error("Nome completo Ã© obrigatÃ³rio");if(!e.birth_date)throw new Error("Data de nascimento Ã© obrigatÃ³ria");if(!this.isValidDate(e.birth_date))throw new Error("Data de nascimento deve estar no formato vÃ¡lido");const t={full_name:e.full_name.trim().toLowerCase(),birth_date:e.birth_date};return await this.patientRepository.search(t)}isValidDate(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}}class G{constructor(e){this.patientRepository=e}async execute(e){var r,o,s,n,u;if(!((r=e.full_name)!=null&&r.trim()))throw new Error("Nome completo Ã© obrigatÃ³rio");if(!e.birth_date)throw new Error("Data de nascimento Ã© obrigatÃ³ria");if(!((o=e.medical_record)!=null&&o.trim()))throw new Error("ProntuÃ¡rio mÃ©dico Ã© obrigatÃ³rio");if(!this.isValidDate(e.birth_date))throw new Error("Data de nascimento deve estar no formato vÃ¡lido");if(e.blood_type&&!this.isValidBloodType(e.blood_type))throw new Error("Tipo sanguÃ­neo invÃ¡lido");const t={full_name:e.full_name.trim(),birth_date:e.birth_date,medical_record:e.medical_record.trim(),blood_type:(s=e.blood_type)==null?void 0:s.trim(),allergies:(n=e.allergies)==null?void 0:n.trim(),observations:(u=e.observations)==null?void 0:u.trim()};return await this.patientRepository.create(t)}isValidDate(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}isValidBloodType(e){return["A+","A-","B+","B-","AB+","AB-","O+","O-"].includes(e)}}class Y{constructor(e){this.checklistRepository=e}async execute(e){if(!e.patient_id)throw new Error("ID do paciente Ã© obrigatÃ³rio");if(!e.machine_id)throw new Error("ID da mÃ¡quina Ã© obrigatÃ³rio");if(!e.shift)throw new Error("Turno Ã© obrigatÃ³rio");if(!this.isValidShift(e.shift))throw new Error("Turno deve ser: matutino, vespertino ou noturno");if(![e.patient_identification,e.access_patency,e.vital_signs,e.weight_measurement,e.machine_parameters,e.anticoagulation,e.alarm_tests,e.emergency_procedures].every(r=>r===!0))throw new Error("Todos os 8 itens de seguranÃ§a devem ser verificados");return await this.checklistRepository.create(e)}isValidShift(e){return["matutino","vespertino","noturno"].includes(e)}}const c=class c{constructor(){h(this,"services",new Map);this.registerServices()}static getInstance(){return c.instance||(c.instance=new c),c.instance}registerServices(){const e=new N,t=new B;this.services.set("ApiDataSource",e),this.services.set("LocalStorageDataSource",t);const r=new V(e,t),o=new x(e,t),s=new $(e,t),n=new K(e,t);this.services.set("AuthRepository",r),this.services.set("PatientRepository",o),this.services.set("ChecklistRepository",s),this.services.set("MachineRepository",n),this.services.set("LoginUseCase",new M(r)),this.services.set("GetCurrentUserUseCase",new q(r)),this.services.set("LogoutUseCase",new H(r)),this.services.set("SearchPatientUseCase",new j(o)),this.services.set("CreatePatientUseCase",new G(o)),this.services.set("CreateChecklistUseCase",new Y(s))}get(e){const t=this.services.get(e);if(!t)throw new Error("Service ".concat(e," not found"));return t}getLoginUseCase(){return this.get("LoginUseCase")}getCurrentUserUseCase(){return this.get("GetCurrentUserUseCase")}getLogoutUseCase(){return this.get("LogoutUseCase")}getSearchPatientUseCase(){return this.get("SearchPatientUseCase")}getCreatePatientUseCase(){return this.get("CreatePatientUseCase")}getCreateChecklistUseCase(){return this.get("CreateChecklistUseCase")}getAuthRepository(){return this.get("AuthRepository")}getMachineRepository(){return this.get("MachineRepository")}};h(c,"instance");let m=c;const z=m.getInstance(),f=z.getAuthRepository(),d=(a,e,t)=>{f.isAuthenticated()?t():t("/login")},F=(a,e,t)=>{f.isAuthenticated()?t("/dashboard"):t()},J=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:()=>p(()=>import("./LoginPage-C7LF7KPk.js"),__vite__mapDeps([0,1,2,3,4])),beforeEnter:F},{path:"/dashboard",name:"Dashboard",component:()=>p(()=>import("./DashboardPage-B_YihvJI.js"),__vite__mapDeps([5,1,2,3,6])),beforeEnter:d},{path:"/checklist",name:"Checklist",component:()=>p(()=>import("./ChecklistPage-ePaGMWzX.js"),__vite__mapDeps([7,1,2,3,8])),beforeEnter:d},{path:"/patients",name:"Patients",component:()=>p(()=>import("./PatientsPage-CvWNrXTd.js"),__vite__mapDeps([9,1,2,3,10])),beforeEnter:d},{path:"/:pathMatch(.*)*",redirect:"/login"}],w=A({history:I("/"),routes:J}),W=b(L).use(P).use(w);w.isReady().then(()=>{W.mount("#app")});export{m as C,Z as __vite_legacy_guard};
