System.register(["./vendor-legacy-B8oEYziD.js","./ionic-legacy-COuvH9Nk.js","./_plugin-vue_export-helper-legacy-B1j4x3Yl.js","./index-legacy-Bofdzc--.js"],function(e,a){"use strict";var o,t,l,n,i,r,s,d,c,u,m,g,f,p,v,b,h,y,x,w,_,k,E,C,j,S,U,V;return{setters:[e=>{o=e.d,t=e.r,l=e.c,n=e.o,i=e.z,r=e.n,s=e.v,d=e.x,c=e.A,u=e.t,m=e.l,g=e.q,f=e.B,p=e.C},e=>{v=e.e,b=e.f,h=e.g,y=e.h,x=e.i,w=e.j,_=e.k,k=e.l,E=e.m,C=e.t},e=>{j=e.m,S=e.l,U=e._},e=>{V=e.C}],execute:function(){var a=document.createElement("style");a.textContent=".login-content[data-v-3f05bc85]{--background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)}.loading-container[data-v-3f05bc85]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;color:#fff;text-align:center}.loading-container ion-spinner[data-v-3f05bc85]{--color: white;margin-bottom:1rem;transform:scale(1.5)}.login-container[data-v-3f05bc85]{display:flex;flex-direction:column;min-height:100vh;padding:2rem 1.5rem;color:#fff}.login-header[data-v-3f05bc85]{text-align:center;margin-bottom:3rem;flex-grow:1;display:flex;flex-direction:column;justify-content:center}.logo-container[data-v-3f05bc85]{margin-bottom:1rem}.logo-icon[data-v-3f05bc85]{font-size:4rem;color:#fff}.login-header h1[data-v-3f05bc85]{font-size:2rem;font-weight:700;margin:.5rem 0}.login-header p[data-v-3f05bc85]{font-size:1rem;opacity:.9;margin:0}.login-form[data-v-3f05bc85]{margin-bottom:2rem}.form-group[data-v-3f05bc85]{margin-bottom:1rem}.mobile-input[data-v-3f05bc85]{--background: rgba(255, 255, 255, .95);--color: #1f2937;border-radius:12px;margin-bottom:1rem}.mobile-button[data-v-3f05bc85]{--background: rgba(255, 255, 255, .2);--background-activated: rgba(255, 255, 255, .3);--color: white;--border-radius: 12px;margin-top:1rem;font-weight:600;backdrop-filter:blur(10px)}.login-footer[data-v-3f05bc85]{text-align:center;opacity:.8;font-size:.875rem}.login-footer p[data-v-3f05bc85]{margin:.25rem 0}\n",document.head.appendChild(a);const z={key:0,class:"loading-container"},D={key:1,class:"login-container"},L={class:"login-header"},q={class:"logo-container"},A={class:"form-group"},T={class:"form-group"};e("default",U(o({__name:"LoginPage",setup(e){const a=c(),o=V.getInstance(),U=o.getLoginUseCase(),B=o.getCurrentUserUseCase(),I=o.getAuthRepository(),M=t({email:"",password:""}),H=t(!1),K=t(!1),O=t({header:"",message:""}),P=l(()=>M.value.email.length>0&&M.value.password.length>0),Q=async()=>{H.value=!0;try{await U.execute(M.value);const e=await B.execute();if("field_user"!==e.role)throw new Error("Este aplicativo é destinado apenas para usuários de campo. Use o sistema web para acessar a área administrativa.");const o=await C.create({message:`Bem-vindo, ${e.name}!`,duration:2e3,color:"success",position:"top"});await o.present(),a.replace("/dashboard")}catch(e){console.error("Login error:",e),O.value={header:"Erro no Login",message:e.message||"Erro interno. Tente novamente."},K.value=!0}finally{H.value=!1}};return n(()=>{(async()=>{try{I.isAuthenticated()&&("field_user"===(await B.execute()).role?a.replace("/dashboard"):I.removeToken())}catch(e){I.removeToken()}})()}),(e,a)=>(r(),i(d(v),null,{default:s(()=>[u(d(E),{fullscreen:!0,class:"login-content"},{default:s(()=>[H.value?(r(),m("div",z,[u(d(b),{name:"crescent"}),a[3]||(a[3]=g("p",null,"Entrando...",-1))])):(r(),m("div",D,[g("div",L,[g("div",q,[u(d(h),{icon:d(j),class:"logo-icon"},null,8,["icon"])]),a[4]||(a[4]=g("h1",null,"Hemodiálise",-1)),a[5]||(a[5]=g("p",null,"Sistema Mobile de Segurança",-1))]),g("form",{onSubmit:p(Q,["prevent"]),class:"login-form"},[g("div",A,[u(d(y),{class:"mobile-input",fill:"outline"},{default:s(()=>[u(d(x),{position:"floating"},{default:s(()=>[...a[6]||(a[6]=[f("Email",-1)])]),_:1}),u(d(w),{modelValue:M.value.email,"onUpdate:modelValue":a[0]||(a[0]=e=>M.value.email=e),type:"email",required:"",disabled:H.value,placeholder:"Digite seu email"},null,8,["modelValue","disabled"])]),_:1})]),g("div",T,[u(d(y),{class:"mobile-input",fill:"outline"},{default:s(()=>[u(d(x),{position:"floating"},{default:s(()=>[...a[7]||(a[7]=[f("Senha",-1)])]),_:1}),u(d(w),{modelValue:M.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>M.value.password=e),type:"password",required:"",disabled:H.value,placeholder:"Digite sua senha"},null,8,["modelValue","disabled"])]),_:1})]),u(d(_),{expand:"block",type:"submit",class:"mobile-button",disabled:H.value||!P.value},{default:s(()=>[u(d(h),{icon:d(S),slot:"start"},null,8,["icon"]),a[8]||(a[8]=f(" Entrar ",-1))]),_:1},8,["disabled"])],32),u(d(k),{"is-open":K.value,header:O.value.header,message:O.value.message,buttons:["OK"],onDidDismiss:a[2]||(a[2]=e=>K.value=!1)},null,8,["is-open","header","message"]),a[9]||(a[9]=g("div",{class:"login-footer"},[g("p",null,"Sistema de Controle de Qualidade"),g("p",null,"Estado do Maranhão")],-1))]))]),_:1})]),_:1}))}}),[["__scopeId","data-v-3f05bc85"]]))}}});
