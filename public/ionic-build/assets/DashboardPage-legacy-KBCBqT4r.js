System.register(["./vendor-legacy-B8oEYziD.js","./ionic-legacy-COuvH9Nk.js","./_plugin-vue_export-helper-legacy-B1j4x3Yl.js","./index-legacy-Bofdzc--.js"],function(a,e){"use strict";var t,n,i,o,r,c,s,l,d,u,v,m,g,p,f,h,b,y,w,x,k,_,C,z,j,q,L,E,P,S,D,I,R,A,B,M,U,O,T,H,N,F,G;return{setters:[a=>{t=a.d,n=a.r,i=a.o,o=a.z,r=a.n,c=a.v,s=a.x,l=a.A,d=a.t,u=a.B,v=a.l,m=a.D,g=a.q,p=a.E,f=a.F,h=a.G,b=a.H},a=>{y=a.e,w=a.n,x=a.o,k=a.p,_=a.q,C=a.k,z=a.g,j=a.r,q=a.s,L=a.u,E=a.v,P=a.w,S=a.m,D=a.x,I=a.y},a=>{R=a.a,A=a.p,B=a.c,M=a.t,U=a.h,O=a.b,T=a.d,H=a.e,N=a.w,F=a._},a=>{G=a.C}],execute:function(){var e=document.createElement("style");e.textContent=".welcome-header[data-v-10b87563]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem;background:linear-gradient(135deg,var(--ion-color-primary) 0%,var(--ion-color-primary-shade) 100%);color:#fff;margin-bottom:1rem}.user-info h2[data-v-10b87563]{margin:0;font-size:1.5rem;font-weight:600}.user-info p[data-v-10b87563]{margin:.25rem 0 0;opacity:.9;font-size:.9rem}.user-avatar ion-icon[data-v-10b87563]{font-size:3rem;opacity:.8}.stats-grid[data-v-10b87563]{display:grid;grid-template-columns:repeat(3,1fr);gap:.75rem;padding:0 1rem;margin-bottom:1.5rem}.stat-card[data-v-10b87563]{background:#fff;border-radius:12px;padding:1rem;text-align:center;box-shadow:0 2px 8px rgba(0,0,0,.1)}.stat-icon[data-v-10b87563]{margin-bottom:.5rem}.stat-icon ion-icon[data-v-10b87563]{font-size:2rem}.stat-icon.success ion-icon[data-v-10b87563]{color:var(--ion-color-success)}.stat-icon.warning ion-icon[data-v-10b87563]{color:var(--ion-color-warning)}.stat-icon.primary ion-icon[data-v-10b87563]{color:var(--ion-color-primary)}.stat-content h3[data-v-10b87563]{margin:0;font-size:1.5rem;font-weight:700;color:var(--ion-color-dark)}.stat-content p[data-v-10b87563]{margin:.25rem 0 0;font-size:.75rem;color:var(--ion-color-medium)}.quick-actions[data-v-10b87563]{padding:0 1rem;margin-bottom:1.5rem}.quick-actions h3[data-v-10b87563]{margin:0 0 1rem;color:var(--ion-color-dark);font-size:1.1rem;font-weight:600}.action-card[data-v-10b87563]{margin-bottom:.75rem;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1)}.action-content[data-v-10b87563]{display:flex;align-items:center;padding:.5rem 0}.action-icon[data-v-10b87563]{margin-right:1rem}.action-icon ion-icon[data-v-10b87563]{font-size:1.5rem;color:var(--ion-color-primary)}.action-text[data-v-10b87563]{flex:1}.action-text h4[data-v-10b87563]{margin:0;font-size:1rem;font-weight:600;color:var(--ion-color-dark)}.action-text p[data-v-10b87563]{margin:.25rem 0 0;font-size:.875rem;color:var(--ion-color-medium)}.action-arrow ion-icon[data-v-10b87563]{color:var(--ion-color-medium)}.recent-section[data-v-10b87563]{padding:0 1rem;margin-bottom:1.5rem}.recent-section h3[data-v-10b87563]{margin:0 0 1rem;color:var(--ion-color-dark);font-size:1.1rem;font-weight:600}.checklist-card[data-v-10b87563]{margin-bottom:.75rem;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1)}.checklist-header[data-v-10b87563]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.checklist-header h4[data-v-10b87563]{margin:0;font-size:1rem;font-weight:600;color:var(--ion-color-dark)}.checklist-date[data-v-10b87563],.checklist-patient[data-v-10b87563]{margin:.25rem 0 0;font-size:.875rem;color:var(--ion-color-medium)}.status-bar[data-v-10b87563]{display:flex;align-items:center;justify-content:center;padding:1rem;gap:.5rem;border-top:1px solid var(--ion-color-light);background:var(--ion-color-light-tint)}.status-online[data-v-10b87563]{color:var(--ion-color-success)}.status-offline[data-v-10b87563]{color:var(--ion-color-danger)}\n",document.head.appendChild(e);const J={key:0,class:"welcome-header"},K={class:"user-info"},Q={class:"user-avatar"},V={class:"stats-grid"},W={class:"stat-card"},X={class:"stat-icon success"},Y={class:"stat-content"},Z={class:"stat-card"},$={class:"stat-icon warning"},aa={class:"stat-content"},ea={class:"stat-card"},ta={class:"stat-icon primary"},na={class:"stat-content"},ia={class:"quick-actions"},oa={class:"action-content"},ra={class:"action-icon"},ca={class:"action-arrow"},sa={class:"action-content"},la={class:"action-icon"},da={class:"action-arrow"},ua={key:1,class:"recent-section"},va={class:"checklist-header"},ma={class:"checklist-date"},ga={class:"checklist-patient"},pa={class:"status-bar"};a("default",F(t({__name:"DashboardPage",setup(a){const e=l(),t=G.getInstance(),F=t.getCurrentUserUseCase(),fa=t.getLogoutUseCase(),ha=t.get("ChecklistRepository"),ba=t.getMachineRepository(),ya=n(null),wa=n([]),xa=n([]),ka=n([]),_a=n([]),Ca=n(navigator.onLine),za=async()=>{const a=await w.create({message:"Carregando dados...",spinner:"crescent"});await a.present();try{const[a,e,t]=await Promise.all([ha.getTodaysChecklists(),ha.getPendingChecklists(),ba.getAvailable()]);wa.value=a,xa.value=e,_a.value=t,ya.value&&(ka.value=await ha.getByUser(ya.value.id,5))}catch(e){console.error("Error loading dashboard data:",e)}finally{await a.dismiss()}},ja=async a=>{try{await za()}finally{a.target.complete()}},qa=async()=>{const a=await D.create({header:"Sair do Sistema",message:"Tem certeza que deseja sair?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Sair",role:"confirm",handler:async()=>{try{await fa.execute(),e.replace("/login")}catch(a){console.error("Logout error:",a),e.replace("/login")}}}]});await a.present()},La=()=>{e.push("/checklist")},Ea=()=>{e.push("/patients")},Pa=a=>{switch(a){case"matutino":return"success";case"vespertino":return"warning";case"noturno":return"secondary";default:return"medium"}},Sa=a=>{switch(a){case"matutino":return"Manhã";case"vespertino":return"Tarde";case"noturno":return"Noite";default:return a}},Da=()=>{Ca.value=navigator.onLine};return i(async()=>{await(async()=>{try{ya.value=await F.execute()}catch(a){console.error("Error loading user:",a),e.replace("/login")}})(),await za(),window.addEventListener("online",Da),window.addEventListener("offline",Da)}),(a,e)=>(r(),o(s(y),null,{default:c(()=>[d(s(j),{translucent:!0},{default:c(()=>[d(s(x),null,{default:c(()=>[d(s(k),null,{default:c(()=>[...e[0]||(e[0]=[u("Dashboard",-1)])]),_:1}),d(s(_),{slot:"end"},{default:c(()=>[d(s(C),{onClick:qa},{default:c(()=>[d(s(z),{icon:s(R),slot:"icon-only"},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),d(s(S),{fullscreen:!0},{default:c(()=>{var a;return[d(s(q),{slot:"fixed",onIonRefresh:ja},{default:c(()=>[d(s(L))]),_:1}),ya.value?(r(),v("div",J,[g("div",K,[g("h2",null,"Olá, "+p(ya.value.name)+"!",1),g("p",null,p((null===(a=ya.value.unit)||void 0===a?void 0:a.name)||"Sem unidade definida"),1)]),g("div",Q,[d(s(z),{icon:s(A)},null,8,["icon"])])])):m("",!0),g("div",V,[g("div",W,[g("div",X,[d(s(z),{icon:s(B)},null,8,["icon"])]),g("div",Y,[g("h3",null,p(wa.value.length),1),e[1]||(e[1]=g("p",null,"Checklists Hoje",-1))])]),g("div",Z,[g("div",$,[d(s(z),{icon:s(M)},null,8,["icon"])]),g("div",aa,[g("h3",null,p(xa.value.length),1),e[2]||(e[2]=g("p",null,"Pendentes",-1))])]),g("div",ea,[g("div",ta,[d(s(z),{icon:s(U)},null,8,["icon"])]),g("div",na,[g("h3",null,p(_a.value.length),1),e[3]||(e[3]=g("p",null,"Máquinas Ativas",-1))])])]),g("div",ia,[e[6]||(e[6]=g("h3",null,"Ações Rápidas",-1)),d(s(E),{class:"action-card",button:"",onClick:La},{default:c(()=>[d(s(P),null,{default:c(()=>[g("div",oa,[g("div",ra,[d(s(z),{icon:s(O)},null,8,["icon"])]),e[4]||(e[4]=g("div",{class:"action-text"},[g("h4",null,"Novo Checklist"),g("p",null,"Iniciar verificação de segurança")],-1)),g("div",ca,[d(s(z),{icon:s(T)},null,8,["icon"])])])]),_:1})]),_:1}),d(s(E),{class:"action-card",button:"",onClick:Ea},{default:c(()=>[d(s(P),null,{default:c(()=>[g("div",sa,[g("div",la,[d(s(z),{icon:s(H)},null,8,["icon"])]),e[5]||(e[5]=g("div",{class:"action-text"},[g("h4",null,"Pacientes"),g("p",null,"Buscar e gerenciar pacientes")],-1)),g("div",da,[d(s(z),{icon:s(T)},null,8,["icon"])])])]),_:1})]),_:1})]),ka.value.length>0?(r(),v("div",ua,[e[7]||(e[7]=g("h3",null,"Últimos Checklists",-1)),(r(!0),v(f,null,h(ka.value,a=>(r(),o(s(E),{key:a.id,class:"checklist-card"},{default:c(()=>[d(s(P),null,{default:c(()=>{return[g("div",va,[g("h4",null,"Máquina "+p(a.machine_id),1),d(s(I),{color:Pa(a.shift)},{default:c(()=>[u(p(Sa(a.shift)),1)]),_:2},1032,["color"])]),g("p",ma,p((e=a.created_at,new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}))),1),g("p",ga,"Paciente ID: "+p(a.patient_id),1)];var e}),_:2},1024)]),_:2},1024))),128))])):m("",!0),g("div",pa,[d(s(z),{icon:s(N),class:b({"status-online":Ca.value,"status-offline":!Ca.value})},null,8,["icon","class"]),g("span",{class:b({"status-online":Ca.value,"status-offline":!Ca.value})},p(Ca.value?"Online":"Offline"),3)])]}),_:1})]),_:1}))}}),[["__scopeId","data-v-10b87563"]]))}}});
