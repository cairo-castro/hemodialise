import{d as Q,r as b,c as D,o as W,z as q,n as u,v as a,x as e,t as o,B as r,q as l,l as p,D as C,G as X,F as Y,H as y,C as Z,E as _}from"./vendor-C2XN_qWx.js";import{e as ee,n as S,t as V,o as U,q as k,z as te,p as N,k as w,g as n,r as T,J as oe,K as le,m as E,h as f,j as P,D as ae,E as c,G as L,C as se,i as ne,v as ie,w as re,y as de}from"./ionic-BY6d-3MW.js";import{g as ue,e as ce,i as pe,j as M,k as O,n as h,o as B,c as $,q as me,r as R,u as ve,v as fe,b as _e,x as ge,_ as be}from"./_plugin-vue_export-helper-DpvRZPJi.js";import{C as Ce}from"./index-BMQczj65.js";const ye={class:"search-container"},we={class:"patients-container"},Ie={class:"patient-header"},Ve={class:"patient-info"},ke={class:"patient-status"},Pe={class:"patient-details"},Oe={key:0,class:"detail-item"},Be={key:1,class:"detail-item"},xe={key:0,class:"empty-state"},Ae={key:0},De={key:1},qe={class:"modal-title"},Se={class:"form-progress"},Ue={class:"info-banner"},Ne={class:"form-section"},Te={class:"section-header"},Ee={class:"form-group"},Le={class:"input-label"},Me={class:"form-row"},he={class:"form-group flex-1"},$e={class:"input-label"},Re={class:"form-group",style:{width:"120px"}},je={class:"input-label"},ze={class:"form-section"},Ge={class:"section-header"},Fe={class:"form-group"},He={class:"input-label"},Je={class:"form-group"},Ke={class:"input-label"},Qe={class:"form-group"},We={class:"input-label"},Xe={key:0,class:"validation-summary"},Ye={class:"modal-actions"},Ze=Q({__name:"PatientsPage",setup(et){const x=Ce.getInstance(),j=x.getCreatePatientUseCase(),z=x.get("PatientRepository"),g=b([]),m=b(""),v=b(!1),i=b({full_name:"",birth_date:"",medical_record:"",blood_type:"",allergies:"",observations:""}),A=D(()=>{if(!m.value)return g.value;const d=m.value.toLowerCase();return g.value.filter(t=>t.full_name.toLowerCase().includes(d)||t.medical_record.toLowerCase().includes(d)||t.blood_type&&t.blood_type.toLowerCase().includes(d))}),I=D(()=>i.value.full_name.length>0&&i.value.birth_date.length>0&&i.value.medical_record.length>0),G=async()=>{const d=await S.create({message:"Carregando pacientes...",spinner:"crescent"});await d.present();try{g.value=await z.getAll()}catch(t){console.error("Error loading patients:",t),await(await V.create({message:"Erro ao carregar pacientes",duration:3e3,color:"danger",position:"top"})).present()}finally{await d.dismiss()}},F=d=>{m.value=d.target.value},H=d=>{console.log("Selected patient:",d)},J=async()=>{const d=await S.create({message:"Cadastrando paciente...",spinner:"crescent"});await d.present();try{const t=await j.execute(i.value);g.value.unshift(t),i.value={full_name:"",birth_date:"",medical_record:"",blood_type:"",allergies:"",observations:""},v.value=!1,await(await V.create({message:"Paciente cadastrado com sucesso!",duration:2e3,color:"success",position:"top"})).present()}catch(t){await(await V.create({message:t.message||"Erro ao cadastrar paciente",duration:3e3,color:"danger",position:"top"})).present()}finally{await d.dismiss()}},K=d=>new Date(d).toLocaleDateString("pt-BR");return W(()=>{G()}),(d,t)=>(u(),q(e(ee),null,{default:a(()=>[o(e(T),{translucent:!0},{default:a(()=>[o(e(U),null,{default:a(()=>[o(e(k),{slot:"start"},{default:a(()=>[o(e(te),{"default-href":"/dashboard"})]),_:1}),o(e(N),null,{default:a(()=>[...t[11]||(t[11]=[r("Pacientes",-1)])]),_:1}),o(e(k),{slot:"end"},{default:a(()=>[o(e(w),{onClick:t[0]||(t[0]=s=>v.value=!0)},{default:a(()=>[o(e(n),{icon:e(ue),slot:"icon-only"},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),o(e(E),{fullscreen:!0},{default:a(()=>[l("div",ye,[o(e(oe),{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s),placeholder:"Buscar pacientes...",onIonInput:F,"show-clear-button":"focus"},null,8,["modelValue"])]),l("div",we,[(u(!0),p(Y,null,X(A.value,s=>(u(),q(e(ie),{key:s.id,class:"patient-card",button:"",onClick:tt=>H(s)},{default:a(()=>[o(e(re),null,{default:a(()=>[l("div",Ie,[l("div",Ve,[l("h3",null,_(s.full_name),1),l("p",null,_(K(s.birth_date))+" • "+_(s.age)+" anos",1)]),l("div",ke,[o(e(de),{color:"success"},{default:a(()=>[...t[12]||(t[12]=[r("Ativo",-1)])]),_:1})])]),l("div",Pe,[s.medical_record?(u(),p("div",Oe,[o(e(n),{icon:e(B)},null,8,["icon"]),l("span",null,_(s.medical_record),1)])):C("",!0),s.blood_type?(u(),p("div",Be,[o(e(n),{icon:e(R)},null,8,["icon"]),l("span",null,_(s.blood_type),1)])):C("",!0)])]),_:2},1024)]),_:2},1032,["onClick"]))),128)),A.value.length===0?(u(),p("div",xe,[o(e(n),{icon:e(ce)},null,8,["icon"]),t[13]||(t[13]=l("h3",null,"Nenhum paciente encontrado",-1)),m.value?(u(),p("p",Ae,"Tente ajustar os termos de busca")):(u(),p("p",De,"Cadastre o primeiro paciente"))])):C("",!0)]),o(e(le),{"is-open":v.value,onWillDismiss:t[10]||(t[10]=s=>v.value=!1)},{default:a(()=>[o(e(T),null,{default:a(()=>[o(e(U),{color:"primary"},{default:a(()=>[o(e(N),null,{default:a(()=>[l("div",qe,[o(e(n),{icon:e(pe)},null,8,["icon"]),t[14]||(t[14]=l("span",null,"Novo Paciente",-1))])]),_:1}),o(e(k),{slot:"end"},{default:a(()=>[o(e(w),{onClick:t[2]||(t[2]=s=>v.value=!1)},{default:a(()=>[o(e(n),{icon:e(M),slot:"icon-only"},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),o(e(E),{class:"modal-content"},{default:a(()=>[l("form",{onSubmit:Z(J,["prevent"]),class:"create-form"},[l("div",Se,[l("div",{class:y(["progress-step",{active:i.value.full_name}])},[o(e(n),{icon:e(O)},null,8,["icon"])],2),l("div",{class:y(["progress-step",{active:i.value.birth_date}])},[o(e(n),{icon:e(h)},null,8,["icon"])],2),l("div",{class:y(["progress-step",{active:i.value.medical_record}])},[o(e(n),{icon:e(B)},null,8,["icon"])],2),l("div",{class:y(["progress-step",{active:I.value}])},[o(e(n),{icon:e($)},null,8,["icon"])],2)]),l("div",Ue,[o(e(n),{icon:e(me)},null,8,["icon"]),t[15]||(t[15]=l("span",null,"Preencha os campos obrigatórios (*) para cadastrar",-1))]),l("div",Ne,[l("div",Te,[o(e(n),{icon:e(O),class:"section-icon"},null,8,["icon"]),t[16]||(t[16]=l("h3",null,"Dados Pessoais",-1))]),l("div",Ee,[l("label",Le,[o(e(n),{icon:e(O)},null,8,["icon"]),t[17]||(t[17]=r(" Nome Completo ",-1)),t[18]||(t[18]=l("span",{class:"required"},"*",-1))]),o(e(f),{class:"modern-input",lines:"none"},{default:a(()=>[o(e(P),{modelValue:i.value.full_name,"onUpdate:modelValue":t[3]||(t[3]=s=>i.value.full_name=s),type:"text",required:"",placeholder:"Digite o nome completo do paciente"},null,8,["modelValue"])]),_:1})]),l("div",Me,[l("div",he,[l("label",$e,[o(e(n),{icon:e(h)},null,8,["icon"]),t[19]||(t[19]=r(" Data de Nascimento ",-1)),t[20]||(t[20]=l("span",{class:"required"},"*",-1))]),o(e(f),{class:"modern-input",lines:"none"},{default:a(()=>[o(e(P),{modelValue:i.value.birth_date,"onUpdate:modelValue":t[4]||(t[4]=s=>i.value.birth_date=s),type:"date",required:""},null,8,["modelValue"])]),_:1})]),l("div",Re,[l("label",je,[o(e(n),{icon:e(R)},null,8,["icon"]),t[21]||(t[21]=r(" Tipo Sanguíneo ",-1))]),o(e(f),{class:"modern-input",lines:"none"},{default:a(()=>[o(e(ae),{modelValue:i.value.blood_type,"onUpdate:modelValue":t[5]||(t[5]=s=>i.value.blood_type=s),placeholder:"Tipo",interface:"action-sheet"},{default:a(()=>[o(e(c),{value:"A+"},{default:a(()=>[...t[22]||(t[22]=[r("A+",-1)])]),_:1}),o(e(c),{value:"A-"},{default:a(()=>[...t[23]||(t[23]=[r("A-",-1)])]),_:1}),o(e(c),{value:"B+"},{default:a(()=>[...t[24]||(t[24]=[r("B+",-1)])]),_:1}),o(e(c),{value:"B-"},{default:a(()=>[...t[25]||(t[25]=[r("B-",-1)])]),_:1}),o(e(c),{value:"AB+"},{default:a(()=>[...t[26]||(t[26]=[r("AB+",-1)])]),_:1}),o(e(c),{value:"AB-"},{default:a(()=>[...t[27]||(t[27]=[r("AB-",-1)])]),_:1}),o(e(c),{value:"O+"},{default:a(()=>[...t[28]||(t[28]=[r("O+",-1)])]),_:1}),o(e(c),{value:"O-"},{default:a(()=>[...t[29]||(t[29]=[r("O-",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),l("div",ze,[l("div",Ge,[o(e(n),{icon:e(ve),class:"section-icon"},null,8,["icon"]),t[30]||(t[30]=l("h3",null,"Dados Médicos",-1))]),l("div",Fe,[l("label",He,[o(e(n),{icon:e(B)},null,8,["icon"]),t[31]||(t[31]=r(" Prontuário Médico ",-1)),t[32]||(t[32]=l("span",{class:"required"},"*",-1))]),o(e(f),{class:"modern-input",lines:"none"},{default:a(()=>[o(e(P),{modelValue:i.value.medical_record,"onUpdate:modelValue":t[6]||(t[6]=s=>i.value.medical_record=s),type:"text",required:"",placeholder:"Ex: PRO-2024-001"},null,8,["modelValue"])]),_:1})]),l("div",Je,[l("label",Ke,[o(e(n),{icon:e(fe)},null,8,["icon"]),t[33]||(t[33]=r(" Alergias ",-1))]),o(e(f),{class:"modern-textarea",lines:"none"},{default:a(()=>[o(e(L),{modelValue:i.value.allergies,"onUpdate:modelValue":t[7]||(t[7]=s=>i.value.allergies=s),rows:"3",placeholder:"Descreva alergias conhecidas (medicamentos, alimentos, etc.)","auto-grow":""},null,8,["modelValue"])]),_:1})]),l("div",Qe,[l("label",We,[o(e(n),{icon:e(_e)},null,8,["icon"]),t[34]||(t[34]=r(" Observações Gerais ",-1))]),o(e(f),{class:"modern-textarea",lines:"none"},{default:a(()=>[o(e(L),{modelValue:i.value.observations,"onUpdate:modelValue":t[8]||(t[8]=s=>i.value.observations=s),rows:"3",placeholder:"Observações adicionais sobre o paciente","auto-grow":""},null,8,["modelValue"])]),_:1})])]),I.value?C("",!0):(u(),p("div",Xe,[o(e(se),{color:"warning"},{default:a(()=>[o(e(n),{icon:e(ge)},null,8,["icon"]),o(e(ne),null,{default:a(()=>[...t[35]||(t[35]=[r("Preencha todos os campos obrigatórios",-1)])]),_:1})]),_:1})])),l("div",Ye,[o(e(w),{fill:"outline",expand:"block",class:"action-button",onClick:t[9]||(t[9]=s=>v.value=!1)},{default:a(()=>[o(e(n),{icon:e(M),slot:"start"},null,8,["icon"]),t[36]||(t[36]=r(" Cancelar ",-1))]),_:1}),o(e(w),{color:"success",expand:"block",type:"submit",class:"action-button",disabled:!I.value},{default:a(()=>[o(e(n),{icon:e($),slot:"start"},null,8,["icon"]),t[37]||(t[37]=r(" Cadastrar Paciente ",-1))]),_:1},8,["disabled"])])],32)]),_:1})]),_:1},8,["is-open"])]),_:1})]),_:1}))}}),nt=be(Ze,[["__scopeId","data-v-07d9fa19"]]);export{nt as default};
