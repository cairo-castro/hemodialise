import{_ as k,d as s,e as n,f as o,h as r,t as u,q as b,k as i,s as c,x as v,j as x,g as y,r as w,y as j,p as E}from"./_plugin-vue_export-helper-DMaL9WP0.js";const F={name:"LoginApp",setup(){const d=w(!1),e=w(""),m=j({email:"",password:"",remember:!1});return{loading:d,error:e,loginForm:m,login:async()=>{var p;d.value=!0,e.value="";try{const l=(p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content");if(console.log("CSRF Token:",l),!l){console.error("CSRF token not found - reloading page to get fresh token"),window.location.reload();return}const a=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":l,Accept:"application/json"},body:JSON.stringify({email:m.email,password:m.password,remember:m.remember})});if(console.log("Response status:",a.status),console.log("Response headers:",Object.fromEntries(a.headers.entries())),a.status===419){console.error("CSRF token expired - reloading page"),e.value="Sessão expirada. Recarregando página...",setTimeout(()=>{window.location.reload()},1500);return}const f=await a.json();console.log("Response data:",f),a.ok?window.location.href=f.redirect||"/dashboard":e.value=f.message||"Credenciais inválidas"}catch(l){console.error("Login error:",l),e.value="Erro ao conectar com o servidor"}finally{d.value=!1}}}}},S={class:"mobile-detect"},C={class:"min-h-screen flex items-center justify-center p-4"},V={class:"w-full max-w-md bg-white rounded-lg shadow-lg p-6"},_={key:0,class:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm"},L={class:"flex items-center"},A=["disabled"],M={key:0},O={key:1},R={class:"desktop-detect"},T={class:"min-h-screen flex"},U={class:"w-full lg:w-1/2 flex items-center justify-center p-8"},q={class:"w-full max-w-md"},z={key:0,class:"mb-6 p-4 bg-red-100 text-red-700 rounded-lg"},B={class:"flex items-center justify-between"},D={class:"flex items-center"},N=["disabled"],I={key:0},G={key:1};function H(d,e,m,t,p,l){return n(),s("div",null,[o("div",S,[o("div",C,[o("div",V,[e[9]||(e[9]=o("div",{class:"text-center mb-6"},[o("h1",{class:"text-2xl font-bold text-gray-800"},"Sistema Hemodiálise"),o("p",{class:"text-gray-600"},"Acesso Mobile")],-1)),t.error?(n(),s("div",_,u(t.error),1)):r("",!0),o("form",{onSubmit:e[3]||(e[3]=b(a=>t.login(),["prevent"])),class:"space-y-4"},[o("div",null,[i(o("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=a=>t.loginForm.email=a),placeholder:"Email",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",required:""},null,512),[[c,t.loginForm.email]])]),o("div",null,[i(o("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=a=>t.loginForm.password=a),placeholder:"Senha",class:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",required:""},null,512),[[c,t.loginForm.password]])]),o("div",L,[i(o("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>t.loginForm.remember=a),id:"remember",class:"mr-2"},null,512),[[v,t.loginForm.remember]]),e[8]||(e[8]=o("label",{for:"remember",class:"text-sm text-gray-600"},"Lembrar-me",-1))]),o("button",{type:"submit",disabled:t.loading,class:"w-full bg-blue-600 text-white p-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50"},[t.loading?r("",!0):(n(),s("span",M,"Entrar")),t.loading?(n(),s("span",O,"Entrando...")):r("",!0)],8,A)],32),e[10]||(e[10]=o("div",{class:"mt-6 text-center"},[o("p",{class:"text-sm text-gray-500"},"Credenciais de acesso:"),o("div",{class:"text-xs text-gray-400 space-y-1"},[o("p",null,[o("strong",null,"Admin:"),x(" admin@hemodialise.ma.gov.br / admin123")]),o("p",null,[o("strong",null,"Unidades:"),x(" Email da planilha / senha123")])])],-1))])])]),o("div",R,[o("div",T,[e[16]||(e[16]=y('<div class="hidden lg:flex lg:w-1/2 bg-blue-600 items-center justify-center" data-v-3244afef><div class="text-center text-white" data-v-3244afef><h1 class="text-4xl font-bold mb-4" data-v-3244afef>Sistema Hemodiálise</h1><p class="text-xl text-blue-100" data-v-3244afef>Gestão Completa e Segura</p><div class="mt-8" data-v-3244afef><div class="w-32 h-32 bg-white/20 rounded-full mx-auto flex items-center justify-center" data-v-3244afef><svg class="w-16 h-16" fill="currentColor" viewBox="0 0 20 20" data-v-3244afef><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-3244afef></path></svg></div></div></div></div>',1)),o("div",U,[o("div",q,[e[14]||(e[14]=o("div",{class:"text-center mb-8"},[o("h2",{class:"text-3xl font-bold text-gray-800"},"Bem-vindo"),o("p",{class:"text-gray-600 mt-2"},"Faça login para acessar o sistema")],-1)),t.error?(n(),s("div",z,u(t.error),1)):r("",!0),o("form",{onSubmit:e[7]||(e[7]=b(a=>t.login(),["prevent"])),class:"space-y-6"},[o("div",null,[e[11]||(e[11]=o("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),i(o("input",{type:"email","onUpdate:modelValue":e[4]||(e[4]=a=>t.loginForm.email=a),id:"email",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[c,t.loginForm.email]])]),o("div",null,[e[12]||(e[12]=o("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},"Senha",-1)),i(o("input",{type:"password","onUpdate:modelValue":e[5]||(e[5]=a=>t.loginForm.password=a),id:"password",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[c,t.loginForm.password]])]),o("div",B,[o("div",D,[i(o("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=a=>t.loginForm.remember=a),id:"remember_desktop",class:"mr-2"},null,512),[[v,t.loginForm.remember]]),e[13]||(e[13]=o("label",{for:"remember_desktop",class:"text-sm text-gray-600"},"Lembrar-me",-1))])]),o("button",{type:"submit",disabled:t.loading,class:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 transition duration-200 disabled:opacity-50"},[t.loading?r("",!0):(n(),s("span",I,"Entrar")),t.loading?(n(),s("span",G,"Entrando...")):r("",!0)],8,N)],32),e[15]||(e[15]=y('<div class="mt-8 text-center border-t pt-6" data-v-3244afef><p class="text-sm text-gray-500 mb-2" data-v-3244afef>Credenciais de acesso:</p><div class="text-xs text-gray-400 space-y-1" data-v-3244afef><p data-v-3244afef><strong data-v-3244afef>Admin:</strong> admin@hemodialise.ma.gov.br / admin123</p><p data-v-3244afef><strong data-v-3244afef>Gerente:</strong> joenvilly.azevedo@emserh.ma.gov.br / A123456*</p><p data-v-3244afef><strong data-v-3244afef>Coordenador:</strong> andre.campos@emserh.ma.gov.br / A123456*</p><p data-v-3244afef><strong data-v-3244afef>Unidades:</strong> Email da planilha / senha123</p></div></div>',1))])])])])])}const P=k(F,[["render",H],["__scopeId","data-v-3244afef"]]);console.log("Login.js carregado - iniciando Vue.js para login...");let g=null;function h(){if(g){console.log("Vue.js Login app já está montado, ignorando inicialização duplicada");return}if(console.log("Procurando elemento #login-app..."),document.getElementById("login-app")){console.log("Elemento #login-app encontrado, criando app Vue.js...");try{g=E(P),g.mount("#login-app"),console.log("Vue.js Login app montado com sucesso!")}catch(e){console.error("Erro ao montar Vue.js Login app:",e),g=null}}else console.log("Elemento #login-app não encontrado")}console.log("Configurando inicialização do login...");document.readyState==="loading"?(console.log("DOM ainda carregando, aguardando DOMContentLoaded..."),document.addEventListener("DOMContentLoaded",h)):(console.log("DOM já carregado, inicializando login imediatamente..."),h());console.log("Login.js configurado completamente");
